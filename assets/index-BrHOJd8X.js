var Dv=Object.defineProperty;var Fv=(n,t,e)=>t in n?Dv(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var bv=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports);var Cm=(n,t,e)=>Fv(n,typeof t!="symbol"?t+"":t,e);var S3=bv(xt=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function e(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=e(s);fetch(s.href,o)}})();var Zc={exports:{}},$a={},Qc={exports:{}},Tt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sm;function zv(){if(Sm)return Tt;Sm=1;var n=Symbol.for("react.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),_=Symbol.iterator;function y(T){return T===null||typeof T!="object"?null:(T=_&&T[_]||T["@@iterator"],typeof T=="function"?T:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,M={};function w(T,A,ft){this.props=T,this.context=A,this.refs=M,this.updater=ft||v}w.prototype.isReactComponent={},w.prototype.setState=function(T,A){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,A,"setState")},w.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function S(){}S.prototype=w.prototype;function R(T,A,ft){this.props=T,this.context=A,this.refs=M,this.updater=ft||v}var O=R.prototype=new S;O.constructor=R,E(O,w.prototype),O.isPureReactComponent=!0;var P=Array.isArray,k=Object.prototype.hasOwnProperty,b={current:null},B={key:!0,ref:!0,__self:!0,__source:!0};function G(T,A,ft){var dt,pt={},Et=null,St=null;if(A!=null)for(dt in A.ref!==void 0&&(St=A.ref),A.key!==void 0&&(Et=""+A.key),A)k.call(A,dt)&&!B.hasOwnProperty(dt)&&(pt[dt]=A[dt]);var Rt=arguments.length-2;if(Rt===1)pt.children=ft;else if(1<Rt){for(var kt=Array(Rt),Wt=0;Wt<Rt;Wt++)kt[Wt]=arguments[Wt+2];pt.children=kt}if(T&&T.defaultProps)for(dt in Rt=T.defaultProps,Rt)pt[dt]===void 0&&(pt[dt]=Rt[dt]);return{$$typeof:n,type:T,key:Et,ref:St,props:pt,_owner:b.current}}function W(T,A){return{$$typeof:n,type:T.type,key:A,ref:T.ref,props:T.props,_owner:T._owner}}function K(T){return typeof T=="object"&&T!==null&&T.$$typeof===n}function rt(T){var A={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(ft){return A[ft]})}var lt=/\/+/g;function ct(T,A){return typeof T=="object"&&T!==null&&T.key!=null?rt(""+T.key):A.toString(36)}function et(T,A,ft,dt,pt){var Et=typeof T;(Et==="undefined"||Et==="boolean")&&(T=null);var St=!1;if(T===null)St=!0;else switch(Et){case"string":case"number":St=!0;break;case"object":switch(T.$$typeof){case n:case t:St=!0}}if(St)return St=T,pt=pt(St),T=dt===""?"."+ct(St,0):dt,P(pt)?(ft="",T!=null&&(ft=T.replace(lt,"$&/")+"/"),et(pt,A,ft,"",function(Wt){return Wt})):pt!=null&&(K(pt)&&(pt=W(pt,ft+(!pt.key||St&&St.key===pt.key?"":(""+pt.key).replace(lt,"$&/")+"/")+T)),A.push(pt)),1;if(St=0,dt=dt===""?".":dt+":",P(T))for(var Rt=0;Rt<T.length;Rt++){Et=T[Rt];var kt=dt+ct(Et,Rt);St+=et(Et,A,ft,kt,pt)}else if(kt=y(T),typeof kt=="function")for(T=kt.call(T),Rt=0;!(Et=T.next()).done;)Et=Et.value,kt=dt+ct(Et,Rt++),St+=et(Et,A,ft,kt,pt);else if(Et==="object")throw A=String(T),Error("Objects are not valid as a React child (found: "+(A==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":A)+"). If you meant to render a collection of children, use an array instead.");return St}function wt(T,A,ft){if(T==null)return T;var dt=[],pt=0;return et(T,dt,"","",function(Et){return A.call(ft,Et,pt++)}),dt}function st(T){if(T._status===-1){var A=T._result;A=A(),A.then(function(ft){(T._status===0||T._status===-1)&&(T._status=1,T._result=ft)},function(ft){(T._status===0||T._status===-1)&&(T._status=2,T._result=ft)}),T._status===-1&&(T._status=0,T._result=A)}if(T._status===1)return T._result.default;throw T._result}var nt={current:null},z={transition:null},H={ReactCurrentDispatcher:nt,ReactCurrentBatchConfig:z,ReactCurrentOwner:b};function V(){throw Error("act(...) is not supported in production builds of React.")}return Tt.Children={map:wt,forEach:function(T,A,ft){wt(T,function(){A.apply(this,arguments)},ft)},count:function(T){var A=0;return wt(T,function(){A++}),A},toArray:function(T){return wt(T,function(A){return A})||[]},only:function(T){if(!K(T))throw Error("React.Children.only expected to receive a single React element child.");return T}},Tt.Component=w,Tt.Fragment=e,Tt.Profiler=s,Tt.PureComponent=R,Tt.StrictMode=i,Tt.Suspense=c,Tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=H,Tt.act=V,Tt.cloneElement=function(T,A,ft){if(T==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+T+".");var dt=E({},T.props),pt=T.key,Et=T.ref,St=T._owner;if(A!=null){if(A.ref!==void 0&&(Et=A.ref,St=b.current),A.key!==void 0&&(pt=""+A.key),T.type&&T.type.defaultProps)var Rt=T.type.defaultProps;for(kt in A)k.call(A,kt)&&!B.hasOwnProperty(kt)&&(dt[kt]=A[kt]===void 0&&Rt!==void 0?Rt[kt]:A[kt])}var kt=arguments.length-2;if(kt===1)dt.children=ft;else if(1<kt){Rt=Array(kt);for(var Wt=0;Wt<kt;Wt++)Rt[Wt]=arguments[Wt+2];dt.children=Rt}return{$$typeof:n,type:T.type,key:pt,ref:Et,props:dt,_owner:St}},Tt.createContext=function(T){return T={$$typeof:l,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},T.Provider={$$typeof:o,_context:T},T.Consumer=T},Tt.createElement=G,Tt.createFactory=function(T){var A=G.bind(null,T);return A.type=T,A},Tt.createRef=function(){return{current:null}},Tt.forwardRef=function(T){return{$$typeof:h,render:T}},Tt.isValidElement=K,Tt.lazy=function(T){return{$$typeof:g,_payload:{_status:-1,_result:T},_init:st}},Tt.memo=function(T,A){return{$$typeof:d,type:T,compare:A===void 0?null:A}},Tt.startTransition=function(T){var A=z.transition;z.transition={};try{T()}finally{z.transition=A}},Tt.unstable_act=V,Tt.useCallback=function(T,A){return nt.current.useCallback(T,A)},Tt.useContext=function(T){return nt.current.useContext(T)},Tt.useDebugValue=function(){},Tt.useDeferredValue=function(T){return nt.current.useDeferredValue(T)},Tt.useEffect=function(T,A){return nt.current.useEffect(T,A)},Tt.useId=function(){return nt.current.useId()},Tt.useImperativeHandle=function(T,A,ft){return nt.current.useImperativeHandle(T,A,ft)},Tt.useInsertionEffect=function(T,A){return nt.current.useInsertionEffect(T,A)},Tt.useLayoutEffect=function(T,A){return nt.current.useLayoutEffect(T,A)},Tt.useMemo=function(T,A){return nt.current.useMemo(T,A)},Tt.useReducer=function(T,A,ft){return nt.current.useReducer(T,A,ft)},Tt.useRef=function(T){return nt.current.useRef(T)},Tt.useState=function(T){return nt.current.useState(T)},Tt.useSyncExternalStore=function(T,A,ft){return nt.current.useSyncExternalStore(T,A,ft)},Tt.useTransition=function(){return nt.current.useTransition()},Tt.version="18.3.1",Tt}var Rm;function qf(){return Rm||(Rm=1,Qc.exports=zv()),Qc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Im;function Gv(){if(Im)return $a;Im=1;var n=qf(),t=Symbol.for("react.element"),e=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(h,c,d){var g,_={},y=null,v=null;d!==void 0&&(y=""+d),c.key!==void 0&&(y=""+c.key),c.ref!==void 0&&(v=c.ref);for(g in c)i.call(c,g)&&!o.hasOwnProperty(g)&&(_[g]=c[g]);if(h&&h.defaultProps)for(g in c=h.defaultProps,c)_[g]===void 0&&(_[g]=c[g]);return{$$typeof:t,type:h,key:y,ref:v,props:_,_owner:s.current}}return $a.Fragment=e,$a.jsx=l,$a.jsxs=l,$a}var Tm;function jv(){return Tm||(Tm=1,Zc.exports=Gv()),Zc.exports}var ot=jv(),ne=qf(),sh={},Jc={exports:{}},Ye={},tf={exports:{}},ef={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pm;function Wv(){return Pm||(Pm=1,function(n){function t(z,H){var V=z.length;z.push(H);t:for(;0<V;){var T=V-1>>>1,A=z[T];if(0<s(A,H))z[T]=H,z[V]=A,V=T;else break t}}function e(z){return z.length===0?null:z[0]}function i(z){if(z.length===0)return null;var H=z[0],V=z.pop();if(V!==H){z[0]=V;t:for(var T=0,A=z.length,ft=A>>>1;T<ft;){var dt=2*(T+1)-1,pt=z[dt],Et=dt+1,St=z[Et];if(0>s(pt,V))Et<A&&0>s(St,pt)?(z[T]=St,z[Et]=V,T=Et):(z[T]=pt,z[dt]=V,T=dt);else if(Et<A&&0>s(St,V))z[T]=St,z[Et]=V,T=Et;else break t}}return H}function s(z,H){var V=z.sortIndex-H.sortIndex;return V!==0?V:z.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,h=l.now();n.unstable_now=function(){return l.now()-h}}var c=[],d=[],g=1,_=null,y=3,v=!1,E=!1,M=!1,w=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(z){for(var H=e(d);H!==null;){if(H.callback===null)i(d);else if(H.startTime<=z)i(d),H.sortIndex=H.expirationTime,t(c,H);else break;H=e(d)}}function P(z){if(M=!1,O(z),!E)if(e(c)!==null)E=!0,st(k);else{var H=e(d);H!==null&&nt(P,H.startTime-z)}}function k(z,H){E=!1,M&&(M=!1,S(G),G=-1),v=!0;var V=y;try{for(O(H),_=e(c);_!==null&&(!(_.expirationTime>H)||z&&!rt());){var T=_.callback;if(typeof T=="function"){_.callback=null,y=_.priorityLevel;var A=T(_.expirationTime<=H);H=n.unstable_now(),typeof A=="function"?_.callback=A:_===e(c)&&i(c),O(H)}else i(c);_=e(c)}if(_!==null)var ft=!0;else{var dt=e(d);dt!==null&&nt(P,dt.startTime-H),ft=!1}return ft}finally{_=null,y=V,v=!1}}var b=!1,B=null,G=-1,W=5,K=-1;function rt(){return!(n.unstable_now()-K<W)}function lt(){if(B!==null){var z=n.unstable_now();K=z;var H=!0;try{H=B(!0,z)}finally{H?ct():(b=!1,B=null)}}else b=!1}var ct;if(typeof R=="function")ct=function(){R(lt)};else if(typeof MessageChannel<"u"){var et=new MessageChannel,wt=et.port2;et.port1.onmessage=lt,ct=function(){wt.postMessage(null)}}else ct=function(){w(lt,0)};function st(z){B=z,b||(b=!0,ct())}function nt(z,H){G=w(function(){z(n.unstable_now())},H)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(z){z.callback=null},n.unstable_continueExecution=function(){E||v||(E=!0,st(k))},n.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<z?Math.floor(1e3/z):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_getFirstCallbackNode=function(){return e(c)},n.unstable_next=function(z){switch(y){case 1:case 2:case 3:var H=3;break;default:H=y}var V=y;y=H;try{return z()}finally{y=V}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(z,H){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var V=y;y=z;try{return H()}finally{y=V}},n.unstable_scheduleCallback=function(z,H,V){var T=n.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?T+V:T):V=T,z){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=V+A,z={id:g++,callback:H,priorityLevel:z,startTime:V,expirationTime:A,sortIndex:-1},V>T?(z.sortIndex=V,t(d,z),e(c)===null&&z===e(d)&&(M?(S(G),G=-1):M=!0,nt(P,V-T))):(z.sortIndex=A,t(c,z),E||v||(E=!0,st(k))),z},n.unstable_shouldYield=rt,n.unstable_wrapCallback=function(z){var H=y;return function(){var V=y;y=H;try{return z.apply(this,arguments)}finally{y=V}}}}(ef)),ef}var Lm;function Bv(){return Lm||(Lm=1,tf.exports=Wv()),tf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Am;function Uv(){if(Am)return Ye;Am=1;var n=qf(),t=Bv();function e(r){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+r,u=1;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+r+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,s={};function o(r,a){l(r,a),l(r+"Capture",a)}function l(r,a){for(s[r]=a,r=0;r<a.length;r++)i.add(a[r])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},_={};function y(r){return c.call(_,r)?!0:c.call(g,r)?!1:d.test(r)?_[r]=!0:(g[r]=!0,!1)}function v(r,a,u,f){if(u!==null&&u.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return f?!1:u!==null?!u.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function E(r,a,u,f){if(a===null||typeof a>"u"||v(r,a,u,f))return!0;if(f)return!1;if(u!==null)switch(u.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function M(r,a,u,f,m,p,x){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=f,this.attributeNamespace=m,this.mustUseProperty=u,this.propertyName=r,this.type=a,this.sanitizeURL=p,this.removeEmptyString=x}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){w[r]=new M(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var a=r[0];w[a]=new M(a,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){w[r]=new M(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){w[r]=new M(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){w[r]=new M(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){w[r]=new M(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){w[r]=new M(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){w[r]=new M(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){w[r]=new M(r,5,!1,r.toLowerCase(),null,!1,!1)});var S=/[\-:]([a-z])/g;function R(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var a=r.replace(S,R);w[a]=new M(a,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var a=r.replace(S,R);w[a]=new M(a,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var a=r.replace(S,R);w[a]=new M(a,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){w[r]=new M(r,1,!1,r.toLowerCase(),null,!1,!1)}),w.xlinkHref=new M("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){w[r]=new M(r,1,!1,r.toLowerCase(),null,!0,!0)});function O(r,a,u,f){var m=w.hasOwnProperty(a)?w[a]:null;(m!==null?m.type!==0:f||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(E(a,u,m,f)&&(u=null),f||m===null?y(a)&&(u===null?r.removeAttribute(a):r.setAttribute(a,""+u)):m.mustUseProperty?r[m.propertyName]=u===null?m.type===3?!1:"":u:(a=m.attributeName,f=m.attributeNamespace,u===null?r.removeAttribute(a):(m=m.type,u=m===3||m===4&&u===!0?"":""+u,f?r.setAttributeNS(f,a,u):r.setAttribute(a,u))))}var P=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k=Symbol.for("react.element"),b=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),W=Symbol.for("react.profiler"),K=Symbol.for("react.provider"),rt=Symbol.for("react.context"),lt=Symbol.for("react.forward_ref"),ct=Symbol.for("react.suspense"),et=Symbol.for("react.suspense_list"),wt=Symbol.for("react.memo"),st=Symbol.for("react.lazy"),nt=Symbol.for("react.offscreen"),z=Symbol.iterator;function H(r){return r===null||typeof r!="object"?null:(r=z&&r[z]||r["@@iterator"],typeof r=="function"?r:null)}var V=Object.assign,T;function A(r){if(T===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);T=a&&a[1]||""}return`
`+T+r}var ft=!1;function dt(r,a){if(!r||ft)return"";ft=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(F){var f=F}Reflect.construct(r,[],a)}else{try{a.call()}catch(F){f=F}r.call(a.prototype)}else{try{throw Error()}catch(F){f=F}r()}}catch(F){if(F&&f&&typeof F.stack=="string"){for(var m=F.stack.split(`
`),p=f.stack.split(`
`),x=m.length-1,C=p.length-1;1<=x&&0<=C&&m[x]!==p[C];)C--;for(;1<=x&&0<=C;x--,C--)if(m[x]!==p[C]){if(x!==1||C!==1)do if(x--,C--,0>C||m[x]!==p[C]){var I=`
`+m[x].replace(" at new "," at ");return r.displayName&&I.includes("<anonymous>")&&(I=I.replace("<anonymous>",r.displayName)),I}while(1<=x&&0<=C);break}}}finally{ft=!1,Error.prepareStackTrace=u}return(r=r?r.displayName||r.name:"")?A(r):""}function pt(r){switch(r.tag){case 5:return A(r.type);case 16:return A("Lazy");case 13:return A("Suspense");case 19:return A("SuspenseList");case 0:case 2:case 15:return r=dt(r.type,!1),r;case 11:return r=dt(r.type.render,!1),r;case 1:return r=dt(r.type,!0),r;default:return""}}function Et(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case B:return"Fragment";case b:return"Portal";case W:return"Profiler";case G:return"StrictMode";case ct:return"Suspense";case et:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case rt:return(r.displayName||"Context")+".Consumer";case K:return(r._context.displayName||"Context")+".Provider";case lt:var a=r.render;return r=r.displayName,r||(r=a.displayName||a.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case wt:return a=r.displayName||null,a!==null?a:Et(r.type)||"Memo";case st:a=r._payload,r=r._init;try{return Et(r(a))}catch{}}return null}function St(r){var a=r.type;switch(r.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=a.render,r=r.displayName||r.name||"",a.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Et(a);case 8:return a===G?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function Rt(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function kt(r){var a=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Wt(r){var a=kt(r)?"checked":"value",u=Object.getOwnPropertyDescriptor(r.constructor.prototype,a),f=""+r[a];if(!r.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,p=u.set;return Object.defineProperty(r,a,{configurable:!0,get:function(){return m.call(this)},set:function(x){f=""+x,p.call(this,x)}}),Object.defineProperty(r,a,{enumerable:u.enumerable}),{getValue:function(){return f},setValue:function(x){f=""+x},stopTracking:function(){r._valueTracker=null,delete r[a]}}}}function Qn(r){r._valueTracker||(r._valueTracker=Wt(r))}function Hr(r){if(!r)return!1;var a=r._valueTracker;if(!a)return!0;var u=a.getValue(),f="";return r&&(f=kt(r)?r.checked?"true":"false":r.value),r=f,r!==u?(a.setValue(r),!0):!1}function dr(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Jn(r,a){var u=a.checked;return V({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??r._wrapperState.initialChecked})}function Kr(r,a){var u=a.defaultValue==null?"":a.defaultValue,f=a.checked!=null?a.checked:a.defaultChecked;u=Rt(a.value!=null?a.value:u),r._wrapperState={initialChecked:f,initialValue:u,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function Ho(r,a){a=a.checked,a!=null&&O(r,"checked",a,!1)}function oa(r,a){Ho(r,a);var u=Rt(a.value),f=a.type;if(u!=null)f==="number"?(u===0&&r.value===""||r.value!=u)&&(r.value=""+u):r.value!==""+u&&(r.value=""+u);else if(f==="submit"||f==="reset"){r.removeAttribute("value");return}a.hasOwnProperty("value")?Zr(r,a.type,u):a.hasOwnProperty("defaultValue")&&Zr(r,a.type,Rt(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(r.defaultChecked=!!a.defaultChecked)}function Ko(r,a,u){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var f=a.type;if(!(f!=="submit"&&f!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+r._wrapperState.initialValue,u||a===r.value||(r.value=a),r.defaultValue=a}u=r.name,u!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,u!==""&&(r.name=u)}function Zr(r,a,u){(a!=="number"||dr(r.ownerDocument)!==r)&&(u==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+u&&(r.defaultValue=""+u))}var ti=Array.isArray;function wi(r,a,u,f){if(r=r.options,a){a={};for(var m=0;m<u.length;m++)a["$"+u[m]]=!0;for(u=0;u<r.length;u++)m=a.hasOwnProperty("$"+r[u].value),r[u].selected!==m&&(r[u].selected=m),m&&f&&(r[u].defaultSelected=!0)}else{for(u=""+Rt(u),a=null,m=0;m<r.length;m++){if(r[m].value===u){r[m].selected=!0,f&&(r[m].defaultSelected=!0);return}a!==null||r[m].disabled||(a=r[m])}a!==null&&(a.selected=!0)}}function Ci(r,a){if(a.dangerouslySetInnerHTML!=null)throw Error(e(91));return V({},a,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Si(r,a){var u=a.value;if(u==null){if(u=a.children,a=a.defaultValue,u!=null){if(a!=null)throw Error(e(92));if(ti(u)){if(1<u.length)throw Error(e(93));u=u[0]}a=u}a==null&&(a=""),u=a}r._wrapperState={initialValue:Rt(u)}}function Qr(r,a){var u=Rt(a.value),f=Rt(a.defaultValue);u!=null&&(u=""+u,u!==r.value&&(r.value=u),a.defaultValue==null&&r.defaultValue!==u&&(r.defaultValue=u)),f!=null&&(r.defaultValue=""+f)}function Jr(r){var a=r.textContent;a===r._wrapperState.initialValue&&a!==""&&a!==null&&(r.value=a)}function gr(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ri(r,a){return r==null||r==="http://www.w3.org/1999/xhtml"?gr(a):r==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var ts,la=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,u,f,m){MSApp.execUnsafeLocalFunction(function(){return r(a,u,f,m)})}:r}(function(r,a){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=a;else{for(ts=ts||document.createElement("div"),ts.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=ts.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;a.firstChild;)r.appendChild(a.firstChild)}});function Ii(r,a){if(a){var u=r.firstChild;if(u&&u===r.lastChild&&u.nodeType===3){u.nodeValue=a;return}}r.textContent=a}var ei={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mu=["Webkit","ms","Moz","O"];Object.keys(ei).forEach(function(r){mu.forEach(function(a){a=a+r.charAt(0).toUpperCase()+r.substring(1),ei[a]=ei[r]})});function Zo(r,a,u){return a==null||typeof a=="boolean"||a===""?"":u||typeof a!="number"||a===0||ei.hasOwnProperty(r)&&ei[r]?(""+a).trim():a+"px"}function ha(r,a){r=r.style;for(var u in a)if(a.hasOwnProperty(u)){var f=u.indexOf("--")===0,m=Zo(u,a[u],f);u==="float"&&(u="cssFloat"),f?r.setProperty(u,m):r[u]=m}}var Qo=V({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mr(r,a){if(a){if(Qo[r]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(e(137,r));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(e(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(e(61))}if(a.style!=null&&typeof a.style!="object")throw Error(e(62))}}function es(r,a){if(r.indexOf("-")===-1)return typeof a.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ua=null;function _r(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var ni=null,un=null,cn=null;function ca(r){if(r=Aa(r)){if(typeof ni!="function")throw Error(e(280));var a=r.stateNode;a&&(a=xl(a),ni(r.stateNode,r.type,a))}}function fa(r){un?cn?cn.push(r):cn=[r]:un=r}function Le(){if(un){var r=un,a=cn;if(cn=un=null,ca(r),a)for(r=0;r<a.length;r++)ca(a[r])}}function Fn(r,a){return r(a)}function Ae(){}var We=!1;function ke(r,a,u){if(We)return r(a,u);We=!0;try{return Fn(r,a,u)}finally{We=!1,(un!==null||cn!==null)&&(Ae(),Le())}}function Oe(r,a){var u=r.stateNode;if(u===null)return null;var f=xl(u);if(f===null)return null;u=f[a];t:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(r=r.type,f=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!f;break t;default:r=!1}if(r)return null;if(u&&typeof u!="function")throw Error(e(231,a,typeof u));return u}var nn=!1;if(h)try{var jt={};Object.defineProperty(jt,"passive",{get:function(){nn=!0}}),window.addEventListener("test",jt,jt),window.removeEventListener("test",jt,jt)}catch{nn=!1}function me(r,a,u,f,m,p,x,C,I){var F=Array.prototype.slice.call(arguments,3);try{a.apply(u,F)}catch(X){this.onError(X)}}var Ne=!1,ns=null,Jo=!1,_u=null,Uy={onError:function(r){Ne=!0,ns=r}};function Xy(r,a,u,f,m,p,x,C,I){Ne=!1,ns=null,me.apply(Uy,arguments)}function Vy(r,a,u,f,m,p,x,C,I){if(Xy.apply(this,arguments),Ne){if(Ne){var F=ns;Ne=!1,ns=null}else throw Error(e(198));Jo||(Jo=!0,_u=F)}}function pr(r){var a=r,u=r;if(r.alternate)for(;a.return;)a=a.return;else{r=a;do a=r,a.flags&4098&&(u=a.return),r=a.return;while(r)}return a.tag===3?u:null}function Yd(r){if(r.tag===13){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function qd(r){if(pr(r)!==r)throw Error(e(188))}function $y(r){var a=r.alternate;if(!a){if(a=pr(r),a===null)throw Error(e(188));return a!==r?null:r}for(var u=r,f=a;;){var m=u.return;if(m===null)break;var p=m.alternate;if(p===null){if(f=m.return,f!==null){u=f;continue}break}if(m.child===p.child){for(p=m.child;p;){if(p===u)return qd(m),r;if(p===f)return qd(m),a;p=p.sibling}throw Error(e(188))}if(u.return!==f.return)u=m,f=p;else{for(var x=!1,C=m.child;C;){if(C===u){x=!0,u=m,f=p;break}if(C===f){x=!0,f=m,u=p;break}C=C.sibling}if(!x){for(C=p.child;C;){if(C===u){x=!0,u=p,f=m;break}if(C===f){x=!0,f=p,u=m;break}C=C.sibling}if(!x)throw Error(e(189))}}if(u.alternate!==f)throw Error(e(190))}if(u.tag!==3)throw Error(e(188));return u.stateNode.current===u?r:a}function Hd(r){return r=$y(r),r!==null?Kd(r):null}function Kd(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var a=Kd(r);if(a!==null)return a;r=r.sibling}return null}var Zd=t.unstable_scheduleCallback,Qd=t.unstable_cancelCallback,Yy=t.unstable_shouldYield,qy=t.unstable_requestPaint,te=t.unstable_now,Hy=t.unstable_getCurrentPriorityLevel,pu=t.unstable_ImmediatePriority,Jd=t.unstable_UserBlockingPriority,tl=t.unstable_NormalPriority,Ky=t.unstable_LowPriority,tg=t.unstable_IdlePriority,el=null,bn=null;function Zy(r){if(bn&&typeof bn.onCommitFiberRoot=="function")try{bn.onCommitFiberRoot(el,r,void 0,(r.current.flags&128)===128)}catch{}}var wn=Math.clz32?Math.clz32:t1,Qy=Math.log,Jy=Math.LN2;function t1(r){return r>>>=0,r===0?32:31-(Qy(r)/Jy|0)|0}var nl=64,il=4194304;function da(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function rl(r,a){var u=r.pendingLanes;if(u===0)return 0;var f=0,m=r.suspendedLanes,p=r.pingedLanes,x=u&268435455;if(x!==0){var C=x&~m;C!==0?f=da(C):(p&=x,p!==0&&(f=da(p)))}else x=u&~m,x!==0?f=da(x):p!==0&&(f=da(p));if(f===0)return 0;if(a!==0&&a!==f&&!(a&m)&&(m=f&-f,p=a&-a,m>=p||m===16&&(p&4194240)!==0))return a;if(f&4&&(f|=u&16),a=r.entangledLanes,a!==0)for(r=r.entanglements,a&=f;0<a;)u=31-wn(a),m=1<<u,f|=r[u],a&=~m;return f}function e1(r,a){switch(r){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function n1(r,a){for(var u=r.suspendedLanes,f=r.pingedLanes,m=r.expirationTimes,p=r.pendingLanes;0<p;){var x=31-wn(p),C=1<<x,I=m[x];I===-1?(!(C&u)||C&f)&&(m[x]=e1(C,a)):I<=a&&(r.expiredLanes|=C),p&=~C}}function yu(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function eg(){var r=nl;return nl<<=1,!(nl&4194240)&&(nl=64),r}function vu(r){for(var a=[],u=0;31>u;u++)a.push(r);return a}function ga(r,a,u){r.pendingLanes|=a,a!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,a=31-wn(a),r[a]=u}function i1(r,a){var u=r.pendingLanes&~a;r.pendingLanes=a,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=a,r.mutableReadLanes&=a,r.entangledLanes&=a,a=r.entanglements;var f=r.eventTimes;for(r=r.expirationTimes;0<u;){var m=31-wn(u),p=1<<m;a[m]=0,f[m]=-1,r[m]=-1,u&=~p}}function xu(r,a){var u=r.entangledLanes|=a;for(r=r.entanglements;u;){var f=31-wn(u),m=1<<f;m&a|r[f]&a&&(r[f]|=a),u&=~m}}var zt=0;function ng(r){return r&=-r,1<r?4<r?r&268435455?16:536870912:4:1}var ig,Eu,rg,sg,ag,Mu=!1,sl=[],Ti=null,Pi=null,Li=null,ma=new Map,_a=new Map,Ai=[],r1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function og(r,a){switch(r){case"focusin":case"focusout":Ti=null;break;case"dragenter":case"dragleave":Pi=null;break;case"mouseover":case"mouseout":Li=null;break;case"pointerover":case"pointerout":ma.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":_a.delete(a.pointerId)}}function pa(r,a,u,f,m,p){return r===null||r.nativeEvent!==p?(r={blockedOn:a,domEventName:u,eventSystemFlags:f,nativeEvent:p,targetContainers:[m]},a!==null&&(a=Aa(a),a!==null&&Eu(a)),r):(r.eventSystemFlags|=f,a=r.targetContainers,m!==null&&a.indexOf(m)===-1&&a.push(m),r)}function s1(r,a,u,f,m){switch(a){case"focusin":return Ti=pa(Ti,r,a,u,f,m),!0;case"dragenter":return Pi=pa(Pi,r,a,u,f,m),!0;case"mouseover":return Li=pa(Li,r,a,u,f,m),!0;case"pointerover":var p=m.pointerId;return ma.set(p,pa(ma.get(p)||null,r,a,u,f,m)),!0;case"gotpointercapture":return p=m.pointerId,_a.set(p,pa(_a.get(p)||null,r,a,u,f,m)),!0}return!1}function lg(r){var a=yr(r.target);if(a!==null){var u=pr(a);if(u!==null){if(a=u.tag,a===13){if(a=Yd(u),a!==null){r.blockedOn=a,ag(r.priority,function(){rg(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){r.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}r.blockedOn=null}function al(r){if(r.blockedOn!==null)return!1;for(var a=r.targetContainers;0<a.length;){var u=Cu(r.domEventName,r.eventSystemFlags,a[0],r.nativeEvent);if(u===null){u=r.nativeEvent;var f=new u.constructor(u.type,u);ua=f,u.target.dispatchEvent(f),ua=null}else return a=Aa(u),a!==null&&Eu(a),r.blockedOn=u,!1;a.shift()}return!0}function hg(r,a,u){al(r)&&u.delete(a)}function a1(){Mu=!1,Ti!==null&&al(Ti)&&(Ti=null),Pi!==null&&al(Pi)&&(Pi=null),Li!==null&&al(Li)&&(Li=null),ma.forEach(hg),_a.forEach(hg)}function ya(r,a){r.blockedOn===a&&(r.blockedOn=null,Mu||(Mu=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,a1)))}function va(r){function a(m){return ya(m,r)}if(0<sl.length){ya(sl[0],r);for(var u=1;u<sl.length;u++){var f=sl[u];f.blockedOn===r&&(f.blockedOn=null)}}for(Ti!==null&&ya(Ti,r),Pi!==null&&ya(Pi,r),Li!==null&&ya(Li,r),ma.forEach(a),_a.forEach(a),u=0;u<Ai.length;u++)f=Ai[u],f.blockedOn===r&&(f.blockedOn=null);for(;0<Ai.length&&(u=Ai[0],u.blockedOn===null);)lg(u),u.blockedOn===null&&Ai.shift()}var is=P.ReactCurrentBatchConfig,ol=!0;function o1(r,a,u,f){var m=zt,p=is.transition;is.transition=null;try{zt=1,wu(r,a,u,f)}finally{zt=m,is.transition=p}}function l1(r,a,u,f){var m=zt,p=is.transition;is.transition=null;try{zt=4,wu(r,a,u,f)}finally{zt=m,is.transition=p}}function wu(r,a,u,f){if(ol){var m=Cu(r,a,u,f);if(m===null)Wu(r,a,f,ll,u),og(r,f);else if(s1(m,r,a,u,f))f.stopPropagation();else if(og(r,f),a&4&&-1<r1.indexOf(r)){for(;m!==null;){var p=Aa(m);if(p!==null&&ig(p),p=Cu(r,a,u,f),p===null&&Wu(r,a,f,ll,u),p===m)break;m=p}m!==null&&f.stopPropagation()}else Wu(r,a,f,null,u)}}var ll=null;function Cu(r,a,u,f){if(ll=null,r=_r(f),r=yr(r),r!==null)if(a=pr(r),a===null)r=null;else if(u=a.tag,u===13){if(r=Yd(a),r!==null)return r;r=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;r=null}else a!==r&&(r=null);return ll=r,null}function ug(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Hy()){case pu:return 1;case Jd:return 4;case tl:case Ky:return 16;case tg:return 536870912;default:return 16}default:return 16}}var ki=null,Su=null,hl=null;function cg(){if(hl)return hl;var r,a=Su,u=a.length,f,m="value"in ki?ki.value:ki.textContent,p=m.length;for(r=0;r<u&&a[r]===m[r];r++);var x=u-r;for(f=1;f<=x&&a[u-f]===m[p-f];f++);return hl=m.slice(r,1<f?1-f:void 0)}function ul(r){var a=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&a===13&&(r=13)):r=a,r===10&&(r=13),32<=r||r===13?r:0}function cl(){return!0}function fg(){return!1}function rn(r){function a(u,f,m,p,x){this._reactName=u,this._targetInst=m,this.type=f,this.nativeEvent=p,this.target=x,this.currentTarget=null;for(var C in r)r.hasOwnProperty(C)&&(u=r[C],this[C]=u?u(p):p[C]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?cl:fg,this.isPropagationStopped=fg,this}return V(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=cl)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=cl)},persist:function(){},isPersistent:cl}),a}var rs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ru=rn(rs),xa=V({},rs,{view:0,detail:0}),h1=rn(xa),Iu,Tu,Ea,fl=V({},xa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lu,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Ea&&(Ea&&r.type==="mousemove"?(Iu=r.screenX-Ea.screenX,Tu=r.screenY-Ea.screenY):Tu=Iu=0,Ea=r),Iu)},movementY:function(r){return"movementY"in r?r.movementY:Tu}}),dg=rn(fl),u1=V({},fl,{dataTransfer:0}),c1=rn(u1),f1=V({},xa,{relatedTarget:0}),Pu=rn(f1),d1=V({},rs,{animationName:0,elapsedTime:0,pseudoElement:0}),g1=rn(d1),m1=V({},rs,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),_1=rn(m1),p1=V({},rs,{data:0}),gg=rn(p1),y1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},v1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},x1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function E1(r){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(r):(r=x1[r])?!!a[r]:!1}function Lu(){return E1}var M1=V({},xa,{key:function(r){if(r.key){var a=y1[r.key]||r.key;if(a!=="Unidentified")return a}return r.type==="keypress"?(r=ul(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?v1[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lu,charCode:function(r){return r.type==="keypress"?ul(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?ul(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),w1=rn(M1),C1=V({},fl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mg=rn(C1),S1=V({},xa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lu}),R1=rn(S1),I1=V({},rs,{propertyName:0,elapsedTime:0,pseudoElement:0}),T1=rn(I1),P1=V({},fl,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),L1=rn(P1),A1=[9,13,27,32],Au=h&&"CompositionEvent"in window,Ma=null;h&&"documentMode"in document&&(Ma=document.documentMode);var k1=h&&"TextEvent"in window&&!Ma,_g=h&&(!Au||Ma&&8<Ma&&11>=Ma),pg=" ",yg=!1;function vg(r,a){switch(r){case"keyup":return A1.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xg(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var ss=!1;function O1(r,a){switch(r){case"compositionend":return xg(a);case"keypress":return a.which!==32?null:(yg=!0,pg);case"textInput":return r=a.data,r===pg&&yg?null:r;default:return null}}function N1(r,a){if(ss)return r==="compositionend"||!Au&&vg(r,a)?(r=cg(),hl=Su=ki=null,ss=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return _g&&a.locale!=="ko"?null:a.data;default:return null}}var D1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Eg(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a==="input"?!!D1[r.type]:a==="textarea"}function Mg(r,a,u,f){fa(f),a=pl(a,"onChange"),0<a.length&&(u=new Ru("onChange","change",null,u,f),r.push({event:u,listeners:a}))}var wa=null,Ca=null;function F1(r){jg(r,0)}function dl(r){var a=us(r);if(Hr(a))return r}function b1(r,a){if(r==="change")return a}var wg=!1;if(h){var ku;if(h){var Ou="oninput"in document;if(!Ou){var Cg=document.createElement("div");Cg.setAttribute("oninput","return;"),Ou=typeof Cg.oninput=="function"}ku=Ou}else ku=!1;wg=ku&&(!document.documentMode||9<document.documentMode)}function Sg(){wa&&(wa.detachEvent("onpropertychange",Rg),Ca=wa=null)}function Rg(r){if(r.propertyName==="value"&&dl(Ca)){var a=[];Mg(a,Ca,r,_r(r)),ke(F1,a)}}function z1(r,a,u){r==="focusin"?(Sg(),wa=a,Ca=u,wa.attachEvent("onpropertychange",Rg)):r==="focusout"&&Sg()}function G1(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return dl(Ca)}function j1(r,a){if(r==="click")return dl(a)}function W1(r,a){if(r==="input"||r==="change")return dl(a)}function B1(r,a){return r===a&&(r!==0||1/r===1/a)||r!==r&&a!==a}var Cn=typeof Object.is=="function"?Object.is:B1;function Sa(r,a){if(Cn(r,a))return!0;if(typeof r!="object"||r===null||typeof a!="object"||a===null)return!1;var u=Object.keys(r),f=Object.keys(a);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var m=u[f];if(!c.call(a,m)||!Cn(r[m],a[m]))return!1}return!0}function Ig(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Tg(r,a){var u=Ig(r);r=0;for(var f;u;){if(u.nodeType===3){if(f=r+u.textContent.length,r<=a&&f>=a)return{node:u,offset:a-r};r=f}t:{for(;u;){if(u.nextSibling){u=u.nextSibling;break t}u=u.parentNode}u=void 0}u=Ig(u)}}function Pg(r,a){return r&&a?r===a?!0:r&&r.nodeType===3?!1:a&&a.nodeType===3?Pg(r,a.parentNode):"contains"in r?r.contains(a):r.compareDocumentPosition?!!(r.compareDocumentPosition(a)&16):!1:!1}function Lg(){for(var r=window,a=dr();a instanceof r.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)r=a.contentWindow;else break;a=dr(r.document)}return a}function Nu(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a&&(a==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||a==="textarea"||r.contentEditable==="true")}function U1(r){var a=Lg(),u=r.focusedElem,f=r.selectionRange;if(a!==u&&u&&u.ownerDocument&&Pg(u.ownerDocument.documentElement,u)){if(f!==null&&Nu(u)){if(a=f.start,r=f.end,r===void 0&&(r=a),"selectionStart"in u)u.selectionStart=a,u.selectionEnd=Math.min(r,u.value.length);else if(r=(a=u.ownerDocument||document)&&a.defaultView||window,r.getSelection){r=r.getSelection();var m=u.textContent.length,p=Math.min(f.start,m);f=f.end===void 0?p:Math.min(f.end,m),!r.extend&&p>f&&(m=f,f=p,p=m),m=Tg(u,p);var x=Tg(u,f);m&&x&&(r.rangeCount!==1||r.anchorNode!==m.node||r.anchorOffset!==m.offset||r.focusNode!==x.node||r.focusOffset!==x.offset)&&(a=a.createRange(),a.setStart(m.node,m.offset),r.removeAllRanges(),p>f?(r.addRange(a),r.extend(x.node,x.offset)):(a.setEnd(x.node,x.offset),r.addRange(a)))}}for(a=[],r=u;r=r.parentNode;)r.nodeType===1&&a.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<a.length;u++)r=a[u],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var X1=h&&"documentMode"in document&&11>=document.documentMode,as=null,Du=null,Ra=null,Fu=!1;function Ag(r,a,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Fu||as==null||as!==dr(f)||(f=as,"selectionStart"in f&&Nu(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Ra&&Sa(Ra,f)||(Ra=f,f=pl(Du,"onSelect"),0<f.length&&(a=new Ru("onSelect","select",null,a,u),r.push({event:a,listeners:f}),a.target=as)))}function gl(r,a){var u={};return u[r.toLowerCase()]=a.toLowerCase(),u["Webkit"+r]="webkit"+a,u["Moz"+r]="moz"+a,u}var os={animationend:gl("Animation","AnimationEnd"),animationiteration:gl("Animation","AnimationIteration"),animationstart:gl("Animation","AnimationStart"),transitionend:gl("Transition","TransitionEnd")},bu={},kg={};h&&(kg=document.createElement("div").style,"AnimationEvent"in window||(delete os.animationend.animation,delete os.animationiteration.animation,delete os.animationstart.animation),"TransitionEvent"in window||delete os.transitionend.transition);function ml(r){if(bu[r])return bu[r];if(!os[r])return r;var a=os[r],u;for(u in a)if(a.hasOwnProperty(u)&&u in kg)return bu[r]=a[u];return r}var Og=ml("animationend"),Ng=ml("animationiteration"),Dg=ml("animationstart"),Fg=ml("transitionend"),bg=new Map,zg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Oi(r,a){bg.set(r,a),o(a,[r])}for(var zu=0;zu<zg.length;zu++){var Gu=zg[zu],V1=Gu.toLowerCase(),$1=Gu[0].toUpperCase()+Gu.slice(1);Oi(V1,"on"+$1)}Oi(Og,"onAnimationEnd"),Oi(Ng,"onAnimationIteration"),Oi(Dg,"onAnimationStart"),Oi("dblclick","onDoubleClick"),Oi("focusin","onFocus"),Oi("focusout","onBlur"),Oi(Fg,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ia="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Y1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ia));function Gg(r,a,u){var f=r.type||"unknown-event";r.currentTarget=u,Vy(f,a,void 0,r),r.currentTarget=null}function jg(r,a){a=(a&4)!==0;for(var u=0;u<r.length;u++){var f=r[u],m=f.event;f=f.listeners;t:{var p=void 0;if(a)for(var x=f.length-1;0<=x;x--){var C=f[x],I=C.instance,F=C.currentTarget;if(C=C.listener,I!==p&&m.isPropagationStopped())break t;Gg(m,C,F),p=I}else for(x=0;x<f.length;x++){if(C=f[x],I=C.instance,F=C.currentTarget,C=C.listener,I!==p&&m.isPropagationStopped())break t;Gg(m,C,F),p=I}}}if(Jo)throw r=_u,Jo=!1,_u=null,r}function Ut(r,a){var u=a[Yu];u===void 0&&(u=a[Yu]=new Set);var f=r+"__bubble";u.has(f)||(Wg(a,r,2,!1),u.add(f))}function ju(r,a,u){var f=0;a&&(f|=4),Wg(u,r,f,a)}var _l="_reactListening"+Math.random().toString(36).slice(2);function Ta(r){if(!r[_l]){r[_l]=!0,i.forEach(function(u){u!=="selectionchange"&&(Y1.has(u)||ju(u,!1,r),ju(u,!0,r))});var a=r.nodeType===9?r:r.ownerDocument;a===null||a[_l]||(a[_l]=!0,ju("selectionchange",!1,a))}}function Wg(r,a,u,f){switch(ug(a)){case 1:var m=o1;break;case 4:m=l1;break;default:m=wu}u=m.bind(null,a,u,r),m=void 0,!nn||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(m=!0),f?m!==void 0?r.addEventListener(a,u,{capture:!0,passive:m}):r.addEventListener(a,u,!0):m!==void 0?r.addEventListener(a,u,{passive:m}):r.addEventListener(a,u,!1)}function Wu(r,a,u,f,m){var p=f;if(!(a&1)&&!(a&2)&&f!==null)t:for(;;){if(f===null)return;var x=f.tag;if(x===3||x===4){var C=f.stateNode.containerInfo;if(C===m||C.nodeType===8&&C.parentNode===m)break;if(x===4)for(x=f.return;x!==null;){var I=x.tag;if((I===3||I===4)&&(I=x.stateNode.containerInfo,I===m||I.nodeType===8&&I.parentNode===m))return;x=x.return}for(;C!==null;){if(x=yr(C),x===null)return;if(I=x.tag,I===5||I===6){f=p=x;continue t}C=C.parentNode}}f=f.return}ke(function(){var F=p,X=_r(u),Y=[];t:{var U=bg.get(r);if(U!==void 0){var J=Ru,it=r;switch(r){case"keypress":if(ul(u)===0)break t;case"keydown":case"keyup":J=w1;break;case"focusin":it="focus",J=Pu;break;case"focusout":it="blur",J=Pu;break;case"beforeblur":case"afterblur":J=Pu;break;case"click":if(u.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=dg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=c1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=R1;break;case Og:case Ng:case Dg:J=g1;break;case Fg:J=T1;break;case"scroll":J=h1;break;case"wheel":J=L1;break;case"copy":case"cut":case"paste":J=_1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=mg}var at=(a&4)!==0,ee=!at&&r==="scroll",N=at?U!==null?U+"Capture":null:U;at=[];for(var L=F,D;L!==null;){D=L;var q=D.stateNode;if(D.tag===5&&q!==null&&(D=q,N!==null&&(q=Oe(L,N),q!=null&&at.push(Pa(L,q,D)))),ee)break;L=L.return}0<at.length&&(U=new J(U,it,null,u,X),Y.push({event:U,listeners:at}))}}if(!(a&7)){t:{if(U=r==="mouseover"||r==="pointerover",J=r==="mouseout"||r==="pointerout",U&&u!==ua&&(it=u.relatedTarget||u.fromElement)&&(yr(it)||it[ii]))break t;if((J||U)&&(U=X.window===X?X:(U=X.ownerDocument)?U.defaultView||U.parentWindow:window,J?(it=u.relatedTarget||u.toElement,J=F,it=it?yr(it):null,it!==null&&(ee=pr(it),it!==ee||it.tag!==5&&it.tag!==6)&&(it=null)):(J=null,it=F),J!==it)){if(at=dg,q="onMouseLeave",N="onMouseEnter",L="mouse",(r==="pointerout"||r==="pointerover")&&(at=mg,q="onPointerLeave",N="onPointerEnter",L="pointer"),ee=J==null?U:us(J),D=it==null?U:us(it),U=new at(q,L+"leave",J,u,X),U.target=ee,U.relatedTarget=D,q=null,yr(X)===F&&(at=new at(N,L+"enter",it,u,X),at.target=D,at.relatedTarget=ee,q=at),ee=q,J&&it)e:{for(at=J,N=it,L=0,D=at;D;D=ls(D))L++;for(D=0,q=N;q;q=ls(q))D++;for(;0<L-D;)at=ls(at),L--;for(;0<D-L;)N=ls(N),D--;for(;L--;){if(at===N||N!==null&&at===N.alternate)break e;at=ls(at),N=ls(N)}at=null}else at=null;J!==null&&Bg(Y,U,J,at,!1),it!==null&&ee!==null&&Bg(Y,ee,it,at,!0)}}t:{if(U=F?us(F):window,J=U.nodeName&&U.nodeName.toLowerCase(),J==="select"||J==="input"&&U.type==="file")var ht=b1;else if(Eg(U))if(wg)ht=W1;else{ht=G1;var mt=z1}else(J=U.nodeName)&&J.toLowerCase()==="input"&&(U.type==="checkbox"||U.type==="radio")&&(ht=j1);if(ht&&(ht=ht(r,F))){Mg(Y,ht,u,X);break t}mt&&mt(r,U,F),r==="focusout"&&(mt=U._wrapperState)&&mt.controlled&&U.type==="number"&&Zr(U,"number",U.value)}switch(mt=F?us(F):window,r){case"focusin":(Eg(mt)||mt.contentEditable==="true")&&(as=mt,Du=F,Ra=null);break;case"focusout":Ra=Du=as=null;break;case"mousedown":Fu=!0;break;case"contextmenu":case"mouseup":case"dragend":Fu=!1,Ag(Y,u,X);break;case"selectionchange":if(X1)break;case"keydown":case"keyup":Ag(Y,u,X)}var _t;if(Au)t:{switch(r){case"compositionstart":var yt="onCompositionStart";break t;case"compositionend":yt="onCompositionEnd";break t;case"compositionupdate":yt="onCompositionUpdate";break t}yt=void 0}else ss?vg(r,u)&&(yt="onCompositionEnd"):r==="keydown"&&u.keyCode===229&&(yt="onCompositionStart");yt&&(_g&&u.locale!=="ko"&&(ss||yt!=="onCompositionStart"?yt==="onCompositionEnd"&&ss&&(_t=cg()):(ki=X,Su="value"in ki?ki.value:ki.textContent,ss=!0)),mt=pl(F,yt),0<mt.length&&(yt=new gg(yt,r,null,u,X),Y.push({event:yt,listeners:mt}),_t?yt.data=_t:(_t=xg(u),_t!==null&&(yt.data=_t)))),(_t=k1?O1(r,u):N1(r,u))&&(F=pl(F,"onBeforeInput"),0<F.length&&(X=new gg("onBeforeInput","beforeinput",null,u,X),Y.push({event:X,listeners:F}),X.data=_t))}jg(Y,a)})}function Pa(r,a,u){return{instance:r,listener:a,currentTarget:u}}function pl(r,a){for(var u=a+"Capture",f=[];r!==null;){var m=r,p=m.stateNode;m.tag===5&&p!==null&&(m=p,p=Oe(r,u),p!=null&&f.unshift(Pa(r,p,m)),p=Oe(r,a),p!=null&&f.push(Pa(r,p,m))),r=r.return}return f}function ls(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Bg(r,a,u,f,m){for(var p=a._reactName,x=[];u!==null&&u!==f;){var C=u,I=C.alternate,F=C.stateNode;if(I!==null&&I===f)break;C.tag===5&&F!==null&&(C=F,m?(I=Oe(u,p),I!=null&&x.unshift(Pa(u,I,C))):m||(I=Oe(u,p),I!=null&&x.push(Pa(u,I,C)))),u=u.return}x.length!==0&&r.push({event:a,listeners:x})}var q1=/\r\n?/g,H1=/\u0000|\uFFFD/g;function Ug(r){return(typeof r=="string"?r:""+r).replace(q1,`
`).replace(H1,"")}function yl(r,a,u){if(a=Ug(a),Ug(r)!==a&&u)throw Error(e(425))}function vl(){}var Bu=null,Uu=null;function Xu(r,a){return r==="textarea"||r==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Vu=typeof setTimeout=="function"?setTimeout:void 0,K1=typeof clearTimeout=="function"?clearTimeout:void 0,Xg=typeof Promise=="function"?Promise:void 0,Z1=typeof queueMicrotask=="function"?queueMicrotask:typeof Xg<"u"?function(r){return Xg.resolve(null).then(r).catch(Q1)}:Vu;function Q1(r){setTimeout(function(){throw r})}function $u(r,a){var u=a,f=0;do{var m=u.nextSibling;if(r.removeChild(u),m&&m.nodeType===8)if(u=m.data,u==="/$"){if(f===0){r.removeChild(m),va(a);return}f--}else u!=="$"&&u!=="$?"&&u!=="$!"||f++;u=m}while(u);va(a)}function Ni(r){for(;r!=null;r=r.nextSibling){var a=r.nodeType;if(a===1||a===3)break;if(a===8){if(a=r.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return r}function Vg(r){r=r.previousSibling;for(var a=0;r;){if(r.nodeType===8){var u=r.data;if(u==="$"||u==="$!"||u==="$?"){if(a===0)return r;a--}else u==="/$"&&a++}r=r.previousSibling}return null}var hs=Math.random().toString(36).slice(2),zn="__reactFiber$"+hs,La="__reactProps$"+hs,ii="__reactContainer$"+hs,Yu="__reactEvents$"+hs,J1="__reactListeners$"+hs,tv="__reactHandles$"+hs;function yr(r){var a=r[zn];if(a)return a;for(var u=r.parentNode;u;){if(a=u[ii]||u[zn]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(r=Vg(r);r!==null;){if(u=r[zn])return u;r=Vg(r)}return a}r=u,u=r.parentNode}return null}function Aa(r){return r=r[zn]||r[ii],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function us(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(e(33))}function xl(r){return r[La]||null}var qu=[],cs=-1;function Di(r){return{current:r}}function Xt(r){0>cs||(r.current=qu[cs],qu[cs]=null,cs--)}function Bt(r,a){cs++,qu[cs]=r.current,r.current=a}var Fi={},we=Di(Fi),Be=Di(!1),vr=Fi;function fs(r,a){var u=r.type.contextTypes;if(!u)return Fi;var f=r.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===a)return f.__reactInternalMemoizedMaskedChildContext;var m={},p;for(p in u)m[p]=a[p];return f&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=a,r.__reactInternalMemoizedMaskedChildContext=m),m}function Ue(r){return r=r.childContextTypes,r!=null}function El(){Xt(Be),Xt(we)}function $g(r,a,u){if(we.current!==Fi)throw Error(e(168));Bt(we,a),Bt(Be,u)}function Yg(r,a,u){var f=r.stateNode;if(a=a.childContextTypes,typeof f.getChildContext!="function")return u;f=f.getChildContext();for(var m in f)if(!(m in a))throw Error(e(108,St(r)||"Unknown",m));return V({},u,f)}function Ml(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Fi,vr=we.current,Bt(we,r),Bt(Be,Be.current),!0}function qg(r,a,u){var f=r.stateNode;if(!f)throw Error(e(169));u?(r=Yg(r,a,vr),f.__reactInternalMemoizedMergedChildContext=r,Xt(Be),Xt(we),Bt(we,r)):Xt(Be),Bt(Be,u)}var ri=null,wl=!1,Hu=!1;function Hg(r){ri===null?ri=[r]:ri.push(r)}function ev(r){wl=!0,Hg(r)}function bi(){if(!Hu&&ri!==null){Hu=!0;var r=0,a=zt;try{var u=ri;for(zt=1;r<u.length;r++){var f=u[r];do f=f(!0);while(f!==null)}ri=null,wl=!1}catch(m){throw ri!==null&&(ri=ri.slice(r+1)),Zd(pu,bi),m}finally{zt=a,Hu=!1}}return null}var ds=[],gs=0,Cl=null,Sl=0,fn=[],dn=0,xr=null,si=1,ai="";function Er(r,a){ds[gs++]=Sl,ds[gs++]=Cl,Cl=r,Sl=a}function Kg(r,a,u){fn[dn++]=si,fn[dn++]=ai,fn[dn++]=xr,xr=r;var f=si;r=ai;var m=32-wn(f)-1;f&=~(1<<m),u+=1;var p=32-wn(a)+m;if(30<p){var x=m-m%5;p=(f&(1<<x)-1).toString(32),f>>=x,m-=x,si=1<<32-wn(a)+m|u<<m|f,ai=p+r}else si=1<<p|u<<m|f,ai=r}function Ku(r){r.return!==null&&(Er(r,1),Kg(r,1,0))}function Zu(r){for(;r===Cl;)Cl=ds[--gs],ds[gs]=null,Sl=ds[--gs],ds[gs]=null;for(;r===xr;)xr=fn[--dn],fn[dn]=null,ai=fn[--dn],fn[dn]=null,si=fn[--dn],fn[dn]=null}var sn=null,an=null,Vt=!1,Sn=null;function Zg(r,a){var u=pn(5,null,null,0);u.elementType="DELETED",u.stateNode=a,u.return=r,a=r.deletions,a===null?(r.deletions=[u],r.flags|=16):a.push(u)}function Qg(r,a){switch(r.tag){case 5:var u=r.type;return a=a.nodeType!==1||u.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(r.stateNode=a,sn=r,an=Ni(a.firstChild),!0):!1;case 6:return a=r.pendingProps===""||a.nodeType!==3?null:a,a!==null?(r.stateNode=a,sn=r,an=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(u=xr!==null?{id:si,overflow:ai}:null,r.memoizedState={dehydrated:a,treeContext:u,retryLane:1073741824},u=pn(18,null,null,0),u.stateNode=a,u.return=r,r.child=u,sn=r,an=null,!0):!1;default:return!1}}function Qu(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Ju(r){if(Vt){var a=an;if(a){var u=a;if(!Qg(r,a)){if(Qu(r))throw Error(e(418));a=Ni(u.nextSibling);var f=sn;a&&Qg(r,a)?Zg(f,u):(r.flags=r.flags&-4097|2,Vt=!1,sn=r)}}else{if(Qu(r))throw Error(e(418));r.flags=r.flags&-4097|2,Vt=!1,sn=r}}}function Jg(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;sn=r}function Rl(r){if(r!==sn)return!1;if(!Vt)return Jg(r),Vt=!0,!1;var a;if((a=r.tag!==3)&&!(a=r.tag!==5)&&(a=r.type,a=a!=="head"&&a!=="body"&&!Xu(r.type,r.memoizedProps)),a&&(a=an)){if(Qu(r))throw t0(),Error(e(418));for(;a;)Zg(r,a),a=Ni(a.nextSibling)}if(Jg(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(e(317));t:{for(r=r.nextSibling,a=0;r;){if(r.nodeType===8){var u=r.data;if(u==="/$"){if(a===0){an=Ni(r.nextSibling);break t}a--}else u!=="$"&&u!=="$!"&&u!=="$?"||a++}r=r.nextSibling}an=null}}else an=sn?Ni(r.stateNode.nextSibling):null;return!0}function t0(){for(var r=an;r;)r=Ni(r.nextSibling)}function ms(){an=sn=null,Vt=!1}function tc(r){Sn===null?Sn=[r]:Sn.push(r)}var nv=P.ReactCurrentBatchConfig;function ka(r,a,u){if(r=u.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(e(309));var f=u.stateNode}if(!f)throw Error(e(147,r));var m=f,p=""+r;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===p?a.ref:(a=function(x){var C=m.refs;x===null?delete C[p]:C[p]=x},a._stringRef=p,a)}if(typeof r!="string")throw Error(e(284));if(!u._owner)throw Error(e(290,r))}return r}function Il(r,a){throw r=Object.prototype.toString.call(a),Error(e(31,r==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":r))}function e0(r){var a=r._init;return a(r._payload)}function n0(r){function a(N,L){if(r){var D=N.deletions;D===null?(N.deletions=[L],N.flags|=16):D.push(L)}}function u(N,L){if(!r)return null;for(;L!==null;)a(N,L),L=L.sibling;return null}function f(N,L){for(N=new Map;L!==null;)L.key!==null?N.set(L.key,L):N.set(L.index,L),L=L.sibling;return N}function m(N,L){return N=Vi(N,L),N.index=0,N.sibling=null,N}function p(N,L,D){return N.index=D,r?(D=N.alternate,D!==null?(D=D.index,D<L?(N.flags|=2,L):D):(N.flags|=2,L)):(N.flags|=1048576,L)}function x(N){return r&&N.alternate===null&&(N.flags|=2),N}function C(N,L,D,q){return L===null||L.tag!==6?(L=Vc(D,N.mode,q),L.return=N,L):(L=m(L,D),L.return=N,L)}function I(N,L,D,q){var ht=D.type;return ht===B?X(N,L,D.props.children,q,D.key):L!==null&&(L.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===st&&e0(ht)===L.type)?(q=m(L,D.props),q.ref=ka(N,L,D),q.return=N,q):(q=Zl(D.type,D.key,D.props,null,N.mode,q),q.ref=ka(N,L,D),q.return=N,q)}function F(N,L,D,q){return L===null||L.tag!==4||L.stateNode.containerInfo!==D.containerInfo||L.stateNode.implementation!==D.implementation?(L=$c(D,N.mode,q),L.return=N,L):(L=m(L,D.children||[]),L.return=N,L)}function X(N,L,D,q,ht){return L===null||L.tag!==7?(L=Pr(D,N.mode,q,ht),L.return=N,L):(L=m(L,D),L.return=N,L)}function Y(N,L,D){if(typeof L=="string"&&L!==""||typeof L=="number")return L=Vc(""+L,N.mode,D),L.return=N,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case k:return D=Zl(L.type,L.key,L.props,null,N.mode,D),D.ref=ka(N,null,L),D.return=N,D;case b:return L=$c(L,N.mode,D),L.return=N,L;case st:var q=L._init;return Y(N,q(L._payload),D)}if(ti(L)||H(L))return L=Pr(L,N.mode,D,null),L.return=N,L;Il(N,L)}return null}function U(N,L,D,q){var ht=L!==null?L.key:null;if(typeof D=="string"&&D!==""||typeof D=="number")return ht!==null?null:C(N,L,""+D,q);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case k:return D.key===ht?I(N,L,D,q):null;case b:return D.key===ht?F(N,L,D,q):null;case st:return ht=D._init,U(N,L,ht(D._payload),q)}if(ti(D)||H(D))return ht!==null?null:X(N,L,D,q,null);Il(N,D)}return null}function J(N,L,D,q,ht){if(typeof q=="string"&&q!==""||typeof q=="number")return N=N.get(D)||null,C(L,N,""+q,ht);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case k:return N=N.get(q.key===null?D:q.key)||null,I(L,N,q,ht);case b:return N=N.get(q.key===null?D:q.key)||null,F(L,N,q,ht);case st:var mt=q._init;return J(N,L,D,mt(q._payload),ht)}if(ti(q)||H(q))return N=N.get(D)||null,X(L,N,q,ht,null);Il(L,q)}return null}function it(N,L,D,q){for(var ht=null,mt=null,_t=L,yt=L=0,ce=null;_t!==null&&yt<D.length;yt++){_t.index>yt?(ce=_t,_t=null):ce=_t.sibling;var Ot=U(N,_t,D[yt],q);if(Ot===null){_t===null&&(_t=ce);break}r&&_t&&Ot.alternate===null&&a(N,_t),L=p(Ot,L,yt),mt===null?ht=Ot:mt.sibling=Ot,mt=Ot,_t=ce}if(yt===D.length)return u(N,_t),Vt&&Er(N,yt),ht;if(_t===null){for(;yt<D.length;yt++)_t=Y(N,D[yt],q),_t!==null&&(L=p(_t,L,yt),mt===null?ht=_t:mt.sibling=_t,mt=_t);return Vt&&Er(N,yt),ht}for(_t=f(N,_t);yt<D.length;yt++)ce=J(_t,N,yt,D[yt],q),ce!==null&&(r&&ce.alternate!==null&&_t.delete(ce.key===null?yt:ce.key),L=p(ce,L,yt),mt===null?ht=ce:mt.sibling=ce,mt=ce);return r&&_t.forEach(function($i){return a(N,$i)}),Vt&&Er(N,yt),ht}function at(N,L,D,q){var ht=H(D);if(typeof ht!="function")throw Error(e(150));if(D=ht.call(D),D==null)throw Error(e(151));for(var mt=ht=null,_t=L,yt=L=0,ce=null,Ot=D.next();_t!==null&&!Ot.done;yt++,Ot=D.next()){_t.index>yt?(ce=_t,_t=null):ce=_t.sibling;var $i=U(N,_t,Ot.value,q);if($i===null){_t===null&&(_t=ce);break}r&&_t&&$i.alternate===null&&a(N,_t),L=p($i,L,yt),mt===null?ht=$i:mt.sibling=$i,mt=$i,_t=ce}if(Ot.done)return u(N,_t),Vt&&Er(N,yt),ht;if(_t===null){for(;!Ot.done;yt++,Ot=D.next())Ot=Y(N,Ot.value,q),Ot!==null&&(L=p(Ot,L,yt),mt===null?ht=Ot:mt.sibling=Ot,mt=Ot);return Vt&&Er(N,yt),ht}for(_t=f(N,_t);!Ot.done;yt++,Ot=D.next())Ot=J(_t,N,yt,Ot.value,q),Ot!==null&&(r&&Ot.alternate!==null&&_t.delete(Ot.key===null?yt:Ot.key),L=p(Ot,L,yt),mt===null?ht=Ot:mt.sibling=Ot,mt=Ot);return r&&_t.forEach(function(Nv){return a(N,Nv)}),Vt&&Er(N,yt),ht}function ee(N,L,D,q){if(typeof D=="object"&&D!==null&&D.type===B&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case k:t:{for(var ht=D.key,mt=L;mt!==null;){if(mt.key===ht){if(ht=D.type,ht===B){if(mt.tag===7){u(N,mt.sibling),L=m(mt,D.props.children),L.return=N,N=L;break t}}else if(mt.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===st&&e0(ht)===mt.type){u(N,mt.sibling),L=m(mt,D.props),L.ref=ka(N,mt,D),L.return=N,N=L;break t}u(N,mt);break}else a(N,mt);mt=mt.sibling}D.type===B?(L=Pr(D.props.children,N.mode,q,D.key),L.return=N,N=L):(q=Zl(D.type,D.key,D.props,null,N.mode,q),q.ref=ka(N,L,D),q.return=N,N=q)}return x(N);case b:t:{for(mt=D.key;L!==null;){if(L.key===mt)if(L.tag===4&&L.stateNode.containerInfo===D.containerInfo&&L.stateNode.implementation===D.implementation){u(N,L.sibling),L=m(L,D.children||[]),L.return=N,N=L;break t}else{u(N,L);break}else a(N,L);L=L.sibling}L=$c(D,N.mode,q),L.return=N,N=L}return x(N);case st:return mt=D._init,ee(N,L,mt(D._payload),q)}if(ti(D))return it(N,L,D,q);if(H(D))return at(N,L,D,q);Il(N,D)}return typeof D=="string"&&D!==""||typeof D=="number"?(D=""+D,L!==null&&L.tag===6?(u(N,L.sibling),L=m(L,D),L.return=N,N=L):(u(N,L),L=Vc(D,N.mode,q),L.return=N,N=L),x(N)):u(N,L)}return ee}var _s=n0(!0),i0=n0(!1),Tl=Di(null),Pl=null,ps=null,ec=null;function nc(){ec=ps=Pl=null}function ic(r){var a=Tl.current;Xt(Tl),r._currentValue=a}function rc(r,a,u){for(;r!==null;){var f=r.alternate;if((r.childLanes&a)!==a?(r.childLanes|=a,f!==null&&(f.childLanes|=a)):f!==null&&(f.childLanes&a)!==a&&(f.childLanes|=a),r===u)break;r=r.return}}function ys(r,a){Pl=r,ec=ps=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&a&&(Xe=!0),r.firstContext=null)}function gn(r){var a=r._currentValue;if(ec!==r)if(r={context:r,memoizedValue:a,next:null},ps===null){if(Pl===null)throw Error(e(308));ps=r,Pl.dependencies={lanes:0,firstContext:r}}else ps=ps.next=r;return a}var Mr=null;function sc(r){Mr===null?Mr=[r]:Mr.push(r)}function r0(r,a,u,f){var m=a.interleaved;return m===null?(u.next=u,sc(a)):(u.next=m.next,m.next=u),a.interleaved=u,oi(r,f)}function oi(r,a){r.lanes|=a;var u=r.alternate;for(u!==null&&(u.lanes|=a),u=r,r=r.return;r!==null;)r.childLanes|=a,u=r.alternate,u!==null&&(u.childLanes|=a),u=r,r=r.return;return u.tag===3?u.stateNode:null}var zi=!1;function ac(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function s0(r,a){r=r.updateQueue,a.updateQueue===r&&(a.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function li(r,a){return{eventTime:r,lane:a,tag:0,payload:null,callback:null,next:null}}function Gi(r,a,u){var f=r.updateQueue;if(f===null)return null;if(f=f.shared,Lt&2){var m=f.pending;return m===null?a.next=a:(a.next=m.next,m.next=a),f.pending=a,oi(r,u)}return m=f.interleaved,m===null?(a.next=a,sc(f)):(a.next=m.next,m.next=a),f.interleaved=a,oi(r,u)}function Ll(r,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194240)!==0)){var f=a.lanes;f&=r.pendingLanes,u|=f,a.lanes=u,xu(r,u)}}function a0(r,a){var u=r.updateQueue,f=r.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var m=null,p=null;if(u=u.firstBaseUpdate,u!==null){do{var x={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};p===null?m=p=x:p=p.next=x,u=u.next}while(u!==null);p===null?m=p=a:p=p.next=a}else m=p=a;u={baseState:f.baseState,firstBaseUpdate:m,lastBaseUpdate:p,shared:f.shared,effects:f.effects},r.updateQueue=u;return}r=u.lastBaseUpdate,r===null?u.firstBaseUpdate=a:r.next=a,u.lastBaseUpdate=a}function Al(r,a,u,f){var m=r.updateQueue;zi=!1;var p=m.firstBaseUpdate,x=m.lastBaseUpdate,C=m.shared.pending;if(C!==null){m.shared.pending=null;var I=C,F=I.next;I.next=null,x===null?p=F:x.next=F,x=I;var X=r.alternate;X!==null&&(X=X.updateQueue,C=X.lastBaseUpdate,C!==x&&(C===null?X.firstBaseUpdate=F:C.next=F,X.lastBaseUpdate=I))}if(p!==null){var Y=m.baseState;x=0,X=F=I=null,C=p;do{var U=C.lane,J=C.eventTime;if((f&U)===U){X!==null&&(X=X.next={eventTime:J,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});t:{var it=r,at=C;switch(U=a,J=u,at.tag){case 1:if(it=at.payload,typeof it=="function"){Y=it.call(J,Y,U);break t}Y=it;break t;case 3:it.flags=it.flags&-65537|128;case 0:if(it=at.payload,U=typeof it=="function"?it.call(J,Y,U):it,U==null)break t;Y=V({},Y,U);break t;case 2:zi=!0}}C.callback!==null&&C.lane!==0&&(r.flags|=64,U=m.effects,U===null?m.effects=[C]:U.push(C))}else J={eventTime:J,lane:U,tag:C.tag,payload:C.payload,callback:C.callback,next:null},X===null?(F=X=J,I=Y):X=X.next=J,x|=U;if(C=C.next,C===null){if(C=m.shared.pending,C===null)break;U=C,C=U.next,U.next=null,m.lastBaseUpdate=U,m.shared.pending=null}}while(!0);if(X===null&&(I=Y),m.baseState=I,m.firstBaseUpdate=F,m.lastBaseUpdate=X,a=m.shared.interleaved,a!==null){m=a;do x|=m.lane,m=m.next;while(m!==a)}else p===null&&(m.shared.lanes=0);Sr|=x,r.lanes=x,r.memoizedState=Y}}function o0(r,a,u){if(r=a.effects,a.effects=null,r!==null)for(a=0;a<r.length;a++){var f=r[a],m=f.callback;if(m!==null){if(f.callback=null,f=u,typeof m!="function")throw Error(e(191,m));m.call(f)}}}var Oa={},Gn=Di(Oa),Na=Di(Oa),Da=Di(Oa);function wr(r){if(r===Oa)throw Error(e(174));return r}function oc(r,a){switch(Bt(Da,a),Bt(Na,r),Bt(Gn,Oa),r=a.nodeType,r){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:Ri(null,"");break;default:r=r===8?a.parentNode:a,a=r.namespaceURI||null,r=r.tagName,a=Ri(a,r)}Xt(Gn),Bt(Gn,a)}function vs(){Xt(Gn),Xt(Na),Xt(Da)}function l0(r){wr(Da.current);var a=wr(Gn.current),u=Ri(a,r.type);a!==u&&(Bt(Na,r),Bt(Gn,u))}function lc(r){Na.current===r&&(Xt(Gn),Xt(Na))}var Yt=Di(0);function kl(r){for(var a=r;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if(a.flags&128)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var hc=[];function uc(){for(var r=0;r<hc.length;r++)hc[r]._workInProgressVersionPrimary=null;hc.length=0}var Ol=P.ReactCurrentDispatcher,cc=P.ReactCurrentBatchConfig,Cr=0,qt=null,se=null,he=null,Nl=!1,Fa=!1,ba=0,iv=0;function Ce(){throw Error(e(321))}function fc(r,a){if(a===null)return!1;for(var u=0;u<a.length&&u<r.length;u++)if(!Cn(r[u],a[u]))return!1;return!0}function dc(r,a,u,f,m,p){if(Cr=p,qt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Ol.current=r===null||r.memoizedState===null?ov:lv,r=u(f,m),Fa){p=0;do{if(Fa=!1,ba=0,25<=p)throw Error(e(301));p+=1,he=se=null,a.updateQueue=null,Ol.current=hv,r=u(f,m)}while(Fa)}if(Ol.current=bl,a=se!==null&&se.next!==null,Cr=0,he=se=qt=null,Nl=!1,a)throw Error(e(300));return r}function gc(){var r=ba!==0;return ba=0,r}function jn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return he===null?qt.memoizedState=he=r:he=he.next=r,he}function mn(){if(se===null){var r=qt.alternate;r=r!==null?r.memoizedState:null}else r=se.next;var a=he===null?qt.memoizedState:he.next;if(a!==null)he=a,se=r;else{if(r===null)throw Error(e(310));se=r,r={memoizedState:se.memoizedState,baseState:se.baseState,baseQueue:se.baseQueue,queue:se.queue,next:null},he===null?qt.memoizedState=he=r:he=he.next=r}return he}function za(r,a){return typeof a=="function"?a(r):a}function mc(r){var a=mn(),u=a.queue;if(u===null)throw Error(e(311));u.lastRenderedReducer=r;var f=se,m=f.baseQueue,p=u.pending;if(p!==null){if(m!==null){var x=m.next;m.next=p.next,p.next=x}f.baseQueue=m=p,u.pending=null}if(m!==null){p=m.next,f=f.baseState;var C=x=null,I=null,F=p;do{var X=F.lane;if((Cr&X)===X)I!==null&&(I=I.next={lane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),f=F.hasEagerState?F.eagerState:r(f,F.action);else{var Y={lane:X,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null};I===null?(C=I=Y,x=f):I=I.next=Y,qt.lanes|=X,Sr|=X}F=F.next}while(F!==null&&F!==p);I===null?x=f:I.next=C,Cn(f,a.memoizedState)||(Xe=!0),a.memoizedState=f,a.baseState=x,a.baseQueue=I,u.lastRenderedState=f}if(r=u.interleaved,r!==null){m=r;do p=m.lane,qt.lanes|=p,Sr|=p,m=m.next;while(m!==r)}else m===null&&(u.lanes=0);return[a.memoizedState,u.dispatch]}function _c(r){var a=mn(),u=a.queue;if(u===null)throw Error(e(311));u.lastRenderedReducer=r;var f=u.dispatch,m=u.pending,p=a.memoizedState;if(m!==null){u.pending=null;var x=m=m.next;do p=r(p,x.action),x=x.next;while(x!==m);Cn(p,a.memoizedState)||(Xe=!0),a.memoizedState=p,a.baseQueue===null&&(a.baseState=p),u.lastRenderedState=p}return[p,f]}function h0(){}function u0(r,a){var u=qt,f=mn(),m=a(),p=!Cn(f.memoizedState,m);if(p&&(f.memoizedState=m,Xe=!0),f=f.queue,pc(d0.bind(null,u,f,r),[r]),f.getSnapshot!==a||p||he!==null&&he.memoizedState.tag&1){if(u.flags|=2048,Ga(9,f0.bind(null,u,f,m,a),void 0,null),ue===null)throw Error(e(349));Cr&30||c0(u,a,m)}return m}function c0(r,a,u){r.flags|=16384,r={getSnapshot:a,value:u},a=qt.updateQueue,a===null?(a={lastEffect:null,stores:null},qt.updateQueue=a,a.stores=[r]):(u=a.stores,u===null?a.stores=[r]:u.push(r))}function f0(r,a,u,f){a.value=u,a.getSnapshot=f,g0(a)&&m0(r)}function d0(r,a,u){return u(function(){g0(a)&&m0(r)})}function g0(r){var a=r.getSnapshot;r=r.value;try{var u=a();return!Cn(r,u)}catch{return!0}}function m0(r){var a=oi(r,1);a!==null&&Pn(a,r,1,-1)}function _0(r){var a=jn();return typeof r=="function"&&(r=r()),a.memoizedState=a.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:za,lastRenderedState:r},a.queue=r,r=r.dispatch=av.bind(null,qt,r),[a.memoizedState,r]}function Ga(r,a,u,f){return r={tag:r,create:a,destroy:u,deps:f,next:null},a=qt.updateQueue,a===null?(a={lastEffect:null,stores:null},qt.updateQueue=a,a.lastEffect=r.next=r):(u=a.lastEffect,u===null?a.lastEffect=r.next=r:(f=u.next,u.next=r,r.next=f,a.lastEffect=r)),r}function p0(){return mn().memoizedState}function Dl(r,a,u,f){var m=jn();qt.flags|=r,m.memoizedState=Ga(1|a,u,void 0,f===void 0?null:f)}function Fl(r,a,u,f){var m=mn();f=f===void 0?null:f;var p=void 0;if(se!==null){var x=se.memoizedState;if(p=x.destroy,f!==null&&fc(f,x.deps)){m.memoizedState=Ga(a,u,p,f);return}}qt.flags|=r,m.memoizedState=Ga(1|a,u,p,f)}function y0(r,a){return Dl(8390656,8,r,a)}function pc(r,a){return Fl(2048,8,r,a)}function v0(r,a){return Fl(4,2,r,a)}function x0(r,a){return Fl(4,4,r,a)}function E0(r,a){if(typeof a=="function")return r=r(),a(r),function(){a(null)};if(a!=null)return r=r(),a.current=r,function(){a.current=null}}function M0(r,a,u){return u=u!=null?u.concat([r]):null,Fl(4,4,E0.bind(null,a,r),u)}function yc(){}function w0(r,a){var u=mn();a=a===void 0?null:a;var f=u.memoizedState;return f!==null&&a!==null&&fc(a,f[1])?f[0]:(u.memoizedState=[r,a],r)}function C0(r,a){var u=mn();a=a===void 0?null:a;var f=u.memoizedState;return f!==null&&a!==null&&fc(a,f[1])?f[0]:(r=r(),u.memoizedState=[r,a],r)}function S0(r,a,u){return Cr&21?(Cn(u,a)||(u=eg(),qt.lanes|=u,Sr|=u,r.baseState=!0),a):(r.baseState&&(r.baseState=!1,Xe=!0),r.memoizedState=u)}function rv(r,a){var u=zt;zt=u!==0&&4>u?u:4,r(!0);var f=cc.transition;cc.transition={};try{r(!1),a()}finally{zt=u,cc.transition=f}}function R0(){return mn().memoizedState}function sv(r,a,u){var f=Ui(r);if(u={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null},I0(r))T0(a,u);else if(u=r0(r,a,u,f),u!==null){var m=Fe();Pn(u,r,f,m),P0(u,a,f)}}function av(r,a,u){var f=Ui(r),m={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null};if(I0(r))T0(a,m);else{var p=r.alternate;if(r.lanes===0&&(p===null||p.lanes===0)&&(p=a.lastRenderedReducer,p!==null))try{var x=a.lastRenderedState,C=p(x,u);if(m.hasEagerState=!0,m.eagerState=C,Cn(C,x)){var I=a.interleaved;I===null?(m.next=m,sc(a)):(m.next=I.next,I.next=m),a.interleaved=m;return}}catch{}finally{}u=r0(r,a,m,f),u!==null&&(m=Fe(),Pn(u,r,f,m),P0(u,a,f))}}function I0(r){var a=r.alternate;return r===qt||a!==null&&a===qt}function T0(r,a){Fa=Nl=!0;var u=r.pending;u===null?a.next=a:(a.next=u.next,u.next=a),r.pending=a}function P0(r,a,u){if(u&4194240){var f=a.lanes;f&=r.pendingLanes,u|=f,a.lanes=u,xu(r,u)}}var bl={readContext:gn,useCallback:Ce,useContext:Ce,useEffect:Ce,useImperativeHandle:Ce,useInsertionEffect:Ce,useLayoutEffect:Ce,useMemo:Ce,useReducer:Ce,useRef:Ce,useState:Ce,useDebugValue:Ce,useDeferredValue:Ce,useTransition:Ce,useMutableSource:Ce,useSyncExternalStore:Ce,useId:Ce,unstable_isNewReconciler:!1},ov={readContext:gn,useCallback:function(r,a){return jn().memoizedState=[r,a===void 0?null:a],r},useContext:gn,useEffect:y0,useImperativeHandle:function(r,a,u){return u=u!=null?u.concat([r]):null,Dl(4194308,4,E0.bind(null,a,r),u)},useLayoutEffect:function(r,a){return Dl(4194308,4,r,a)},useInsertionEffect:function(r,a){return Dl(4,2,r,a)},useMemo:function(r,a){var u=jn();return a=a===void 0?null:a,r=r(),u.memoizedState=[r,a],r},useReducer:function(r,a,u){var f=jn();return a=u!==void 0?u(a):a,f.memoizedState=f.baseState=a,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:a},f.queue=r,r=r.dispatch=sv.bind(null,qt,r),[f.memoizedState,r]},useRef:function(r){var a=jn();return r={current:r},a.memoizedState=r},useState:_0,useDebugValue:yc,useDeferredValue:function(r){return jn().memoizedState=r},useTransition:function(){var r=_0(!1),a=r[0];return r=rv.bind(null,r[1]),jn().memoizedState=r,[a,r]},useMutableSource:function(){},useSyncExternalStore:function(r,a,u){var f=qt,m=jn();if(Vt){if(u===void 0)throw Error(e(407));u=u()}else{if(u=a(),ue===null)throw Error(e(349));Cr&30||c0(f,a,u)}m.memoizedState=u;var p={value:u,getSnapshot:a};return m.queue=p,y0(d0.bind(null,f,p,r),[r]),f.flags|=2048,Ga(9,f0.bind(null,f,p,u,a),void 0,null),u},useId:function(){var r=jn(),a=ue.identifierPrefix;if(Vt){var u=ai,f=si;u=(f&~(1<<32-wn(f)-1)).toString(32)+u,a=":"+a+"R"+u,u=ba++,0<u&&(a+="H"+u.toString(32)),a+=":"}else u=iv++,a=":"+a+"r"+u.toString(32)+":";return r.memoizedState=a},unstable_isNewReconciler:!1},lv={readContext:gn,useCallback:w0,useContext:gn,useEffect:pc,useImperativeHandle:M0,useInsertionEffect:v0,useLayoutEffect:x0,useMemo:C0,useReducer:mc,useRef:p0,useState:function(){return mc(za)},useDebugValue:yc,useDeferredValue:function(r){var a=mn();return S0(a,se.memoizedState,r)},useTransition:function(){var r=mc(za)[0],a=mn().memoizedState;return[r,a]},useMutableSource:h0,useSyncExternalStore:u0,useId:R0,unstable_isNewReconciler:!1},hv={readContext:gn,useCallback:w0,useContext:gn,useEffect:pc,useImperativeHandle:M0,useInsertionEffect:v0,useLayoutEffect:x0,useMemo:C0,useReducer:_c,useRef:p0,useState:function(){return _c(za)},useDebugValue:yc,useDeferredValue:function(r){var a=mn();return se===null?a.memoizedState=r:S0(a,se.memoizedState,r)},useTransition:function(){var r=_c(za)[0],a=mn().memoizedState;return[r,a]},useMutableSource:h0,useSyncExternalStore:u0,useId:R0,unstable_isNewReconciler:!1};function Rn(r,a){if(r&&r.defaultProps){a=V({},a),r=r.defaultProps;for(var u in r)a[u]===void 0&&(a[u]=r[u]);return a}return a}function vc(r,a,u,f){a=r.memoizedState,u=u(f,a),u=u==null?a:V({},a,u),r.memoizedState=u,r.lanes===0&&(r.updateQueue.baseState=u)}var zl={isMounted:function(r){return(r=r._reactInternals)?pr(r)===r:!1},enqueueSetState:function(r,a,u){r=r._reactInternals;var f=Fe(),m=Ui(r),p=li(f,m);p.payload=a,u!=null&&(p.callback=u),a=Gi(r,p,m),a!==null&&(Pn(a,r,m,f),Ll(a,r,m))},enqueueReplaceState:function(r,a,u){r=r._reactInternals;var f=Fe(),m=Ui(r),p=li(f,m);p.tag=1,p.payload=a,u!=null&&(p.callback=u),a=Gi(r,p,m),a!==null&&(Pn(a,r,m,f),Ll(a,r,m))},enqueueForceUpdate:function(r,a){r=r._reactInternals;var u=Fe(),f=Ui(r),m=li(u,f);m.tag=2,a!=null&&(m.callback=a),a=Gi(r,m,f),a!==null&&(Pn(a,r,f,u),Ll(a,r,f))}};function L0(r,a,u,f,m,p,x){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(f,p,x):a.prototype&&a.prototype.isPureReactComponent?!Sa(u,f)||!Sa(m,p):!0}function A0(r,a,u){var f=!1,m=Fi,p=a.contextType;return typeof p=="object"&&p!==null?p=gn(p):(m=Ue(a)?vr:we.current,f=a.contextTypes,p=(f=f!=null)?fs(r,m):Fi),a=new a(u,p),r.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=zl,r.stateNode=a,a._reactInternals=r,f&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=m,r.__reactInternalMemoizedMaskedChildContext=p),a}function k0(r,a,u,f){r=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,f),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,f),a.state!==r&&zl.enqueueReplaceState(a,a.state,null)}function xc(r,a,u,f){var m=r.stateNode;m.props=u,m.state=r.memoizedState,m.refs={},ac(r);var p=a.contextType;typeof p=="object"&&p!==null?m.context=gn(p):(p=Ue(a)?vr:we.current,m.context=fs(r,p)),m.state=r.memoizedState,p=a.getDerivedStateFromProps,typeof p=="function"&&(vc(r,a,p,u),m.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(a=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),a!==m.state&&zl.enqueueReplaceState(m,m.state,null),Al(r,u,m,f),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308)}function xs(r,a){try{var u="",f=a;do u+=pt(f),f=f.return;while(f);var m=u}catch(p){m=`
Error generating stack: `+p.message+`
`+p.stack}return{value:r,source:a,stack:m,digest:null}}function Ec(r,a,u){return{value:r,source:null,stack:u??null,digest:a??null}}function Mc(r,a){try{console.error(a.value)}catch(u){setTimeout(function(){throw u})}}var uv=typeof WeakMap=="function"?WeakMap:Map;function O0(r,a,u){u=li(-1,u),u.tag=3,u.payload={element:null};var f=a.value;return u.callback=function(){Vl||(Vl=!0,bc=f),Mc(r,a)},u}function N0(r,a,u){u=li(-1,u),u.tag=3;var f=r.type.getDerivedStateFromError;if(typeof f=="function"){var m=a.value;u.payload=function(){return f(m)},u.callback=function(){Mc(r,a)}}var p=r.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(u.callback=function(){Mc(r,a),typeof f!="function"&&(Wi===null?Wi=new Set([this]):Wi.add(this));var x=a.stack;this.componentDidCatch(a.value,{componentStack:x!==null?x:""})}),u}function D0(r,a,u){var f=r.pingCache;if(f===null){f=r.pingCache=new uv;var m=new Set;f.set(a,m)}else m=f.get(a),m===void 0&&(m=new Set,f.set(a,m));m.has(u)||(m.add(u),r=Cv.bind(null,r,a,u),a.then(r,r))}function F0(r){do{var a;if((a=r.tag===13)&&(a=r.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return r;r=r.return}while(r!==null);return null}function b0(r,a,u,f,m){return r.mode&1?(r.flags|=65536,r.lanes=m,r):(r===a?r.flags|=65536:(r.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(a=li(-1,1),a.tag=2,Gi(u,a,1))),u.lanes|=1),r)}var cv=P.ReactCurrentOwner,Xe=!1;function De(r,a,u,f){a.child=r===null?i0(a,null,u,f):_s(a,r.child,u,f)}function z0(r,a,u,f,m){u=u.render;var p=a.ref;return ys(a,m),f=dc(r,a,u,f,p,m),u=gc(),r!==null&&!Xe?(a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~m,hi(r,a,m)):(Vt&&u&&Ku(a),a.flags|=1,De(r,a,f,m),a.child)}function G0(r,a,u,f,m){if(r===null){var p=u.type;return typeof p=="function"&&!Xc(p)&&p.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(a.tag=15,a.type=p,j0(r,a,p,f,m)):(r=Zl(u.type,null,f,a,a.mode,m),r.ref=a.ref,r.return=a,a.child=r)}if(p=r.child,!(r.lanes&m)){var x=p.memoizedProps;if(u=u.compare,u=u!==null?u:Sa,u(x,f)&&r.ref===a.ref)return hi(r,a,m)}return a.flags|=1,r=Vi(p,f),r.ref=a.ref,r.return=a,a.child=r}function j0(r,a,u,f,m){if(r!==null){var p=r.memoizedProps;if(Sa(p,f)&&r.ref===a.ref)if(Xe=!1,a.pendingProps=f=p,(r.lanes&m)!==0)r.flags&131072&&(Xe=!0);else return a.lanes=r.lanes,hi(r,a,m)}return wc(r,a,u,f,m)}function W0(r,a,u){var f=a.pendingProps,m=f.children,p=r!==null?r.memoizedState:null;if(f.mode==="hidden")if(!(a.mode&1))a.memoizedState={baseLanes:0,cachePool:null,transitions:null},Bt(Ms,on),on|=u;else{if(!(u&1073741824))return r=p!==null?p.baseLanes|u:u,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:r,cachePool:null,transitions:null},a.updateQueue=null,Bt(Ms,on),on|=r,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=p!==null?p.baseLanes:u,Bt(Ms,on),on|=f}else p!==null?(f=p.baseLanes|u,a.memoizedState=null):f=u,Bt(Ms,on),on|=f;return De(r,a,m,u),a.child}function B0(r,a){var u=a.ref;(r===null&&u!==null||r!==null&&r.ref!==u)&&(a.flags|=512,a.flags|=2097152)}function wc(r,a,u,f,m){var p=Ue(u)?vr:we.current;return p=fs(a,p),ys(a,m),u=dc(r,a,u,f,p,m),f=gc(),r!==null&&!Xe?(a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~m,hi(r,a,m)):(Vt&&f&&Ku(a),a.flags|=1,De(r,a,u,m),a.child)}function U0(r,a,u,f,m){if(Ue(u)){var p=!0;Ml(a)}else p=!1;if(ys(a,m),a.stateNode===null)jl(r,a),A0(a,u,f),xc(a,u,f,m),f=!0;else if(r===null){var x=a.stateNode,C=a.memoizedProps;x.props=C;var I=x.context,F=u.contextType;typeof F=="object"&&F!==null?F=gn(F):(F=Ue(u)?vr:we.current,F=fs(a,F));var X=u.getDerivedStateFromProps,Y=typeof X=="function"||typeof x.getSnapshotBeforeUpdate=="function";Y||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(C!==f||I!==F)&&k0(a,x,f,F),zi=!1;var U=a.memoizedState;x.state=U,Al(a,f,x,m),I=a.memoizedState,C!==f||U!==I||Be.current||zi?(typeof X=="function"&&(vc(a,u,X,f),I=a.memoizedState),(C=zi||L0(a,u,C,f,U,I,F))?(Y||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(a.flags|=4194308)):(typeof x.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=f,a.memoizedState=I),x.props=f,x.state=I,x.context=F,f=C):(typeof x.componentDidMount=="function"&&(a.flags|=4194308),f=!1)}else{x=a.stateNode,s0(r,a),C=a.memoizedProps,F=a.type===a.elementType?C:Rn(a.type,C),x.props=F,Y=a.pendingProps,U=x.context,I=u.contextType,typeof I=="object"&&I!==null?I=gn(I):(I=Ue(u)?vr:we.current,I=fs(a,I));var J=u.getDerivedStateFromProps;(X=typeof J=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(C!==Y||U!==I)&&k0(a,x,f,I),zi=!1,U=a.memoizedState,x.state=U,Al(a,f,x,m);var it=a.memoizedState;C!==Y||U!==it||Be.current||zi?(typeof J=="function"&&(vc(a,u,J,f),it=a.memoizedState),(F=zi||L0(a,u,F,f,U,it,I)||!1)?(X||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(f,it,I),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(f,it,I)),typeof x.componentDidUpdate=="function"&&(a.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof x.componentDidUpdate!="function"||C===r.memoizedProps&&U===r.memoizedState||(a.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||C===r.memoizedProps&&U===r.memoizedState||(a.flags|=1024),a.memoizedProps=f,a.memoizedState=it),x.props=f,x.state=it,x.context=I,f=F):(typeof x.componentDidUpdate!="function"||C===r.memoizedProps&&U===r.memoizedState||(a.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||C===r.memoizedProps&&U===r.memoizedState||(a.flags|=1024),f=!1)}return Cc(r,a,u,f,p,m)}function Cc(r,a,u,f,m,p){B0(r,a);var x=(a.flags&128)!==0;if(!f&&!x)return m&&qg(a,u,!1),hi(r,a,p);f=a.stateNode,cv.current=a;var C=x&&typeof u.getDerivedStateFromError!="function"?null:f.render();return a.flags|=1,r!==null&&x?(a.child=_s(a,r.child,null,p),a.child=_s(a,null,C,p)):De(r,a,C,p),a.memoizedState=f.state,m&&qg(a,u,!0),a.child}function X0(r){var a=r.stateNode;a.pendingContext?$g(r,a.pendingContext,a.pendingContext!==a.context):a.context&&$g(r,a.context,!1),oc(r,a.containerInfo)}function V0(r,a,u,f,m){return ms(),tc(m),a.flags|=256,De(r,a,u,f),a.child}var Sc={dehydrated:null,treeContext:null,retryLane:0};function Rc(r){return{baseLanes:r,cachePool:null,transitions:null}}function $0(r,a,u){var f=a.pendingProps,m=Yt.current,p=!1,x=(a.flags&128)!==0,C;if((C=x)||(C=r!==null&&r.memoizedState===null?!1:(m&2)!==0),C?(p=!0,a.flags&=-129):(r===null||r.memoizedState!==null)&&(m|=1),Bt(Yt,m&1),r===null)return Ju(a),r=a.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?(a.mode&1?r.data==="$!"?a.lanes=8:a.lanes=1073741824:a.lanes=1,null):(x=f.children,r=f.fallback,p?(f=a.mode,p=a.child,x={mode:"hidden",children:x},!(f&1)&&p!==null?(p.childLanes=0,p.pendingProps=x):p=Ql(x,f,0,null),r=Pr(r,f,u,null),p.return=a,r.return=a,p.sibling=r,a.child=p,a.child.memoizedState=Rc(u),a.memoizedState=Sc,r):Ic(a,x));if(m=r.memoizedState,m!==null&&(C=m.dehydrated,C!==null))return fv(r,a,x,f,C,m,u);if(p){p=f.fallback,x=a.mode,m=r.child,C=m.sibling;var I={mode:"hidden",children:f.children};return!(x&1)&&a.child!==m?(f=a.child,f.childLanes=0,f.pendingProps=I,a.deletions=null):(f=Vi(m,I),f.subtreeFlags=m.subtreeFlags&14680064),C!==null?p=Vi(C,p):(p=Pr(p,x,u,null),p.flags|=2),p.return=a,f.return=a,f.sibling=p,a.child=f,f=p,p=a.child,x=r.child.memoizedState,x=x===null?Rc(u):{baseLanes:x.baseLanes|u,cachePool:null,transitions:x.transitions},p.memoizedState=x,p.childLanes=r.childLanes&~u,a.memoizedState=Sc,f}return p=r.child,r=p.sibling,f=Vi(p,{mode:"visible",children:f.children}),!(a.mode&1)&&(f.lanes=u),f.return=a,f.sibling=null,r!==null&&(u=a.deletions,u===null?(a.deletions=[r],a.flags|=16):u.push(r)),a.child=f,a.memoizedState=null,f}function Ic(r,a){return a=Ql({mode:"visible",children:a},r.mode,0,null),a.return=r,r.child=a}function Gl(r,a,u,f){return f!==null&&tc(f),_s(a,r.child,null,u),r=Ic(a,a.pendingProps.children),r.flags|=2,a.memoizedState=null,r}function fv(r,a,u,f,m,p,x){if(u)return a.flags&256?(a.flags&=-257,f=Ec(Error(e(422))),Gl(r,a,x,f)):a.memoizedState!==null?(a.child=r.child,a.flags|=128,null):(p=f.fallback,m=a.mode,f=Ql({mode:"visible",children:f.children},m,0,null),p=Pr(p,m,x,null),p.flags|=2,f.return=a,p.return=a,f.sibling=p,a.child=f,a.mode&1&&_s(a,r.child,null,x),a.child.memoizedState=Rc(x),a.memoizedState=Sc,p);if(!(a.mode&1))return Gl(r,a,x,null);if(m.data==="$!"){if(f=m.nextSibling&&m.nextSibling.dataset,f)var C=f.dgst;return f=C,p=Error(e(419)),f=Ec(p,f,void 0),Gl(r,a,x,f)}if(C=(x&r.childLanes)!==0,Xe||C){if(f=ue,f!==null){switch(x&-x){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=m&(f.suspendedLanes|x)?0:m,m!==0&&m!==p.retryLane&&(p.retryLane=m,oi(r,m),Pn(f,r,m,-1))}return Uc(),f=Ec(Error(e(421))),Gl(r,a,x,f)}return m.data==="$?"?(a.flags|=128,a.child=r.child,a=Sv.bind(null,r),m._reactRetry=a,null):(r=p.treeContext,an=Ni(m.nextSibling),sn=a,Vt=!0,Sn=null,r!==null&&(fn[dn++]=si,fn[dn++]=ai,fn[dn++]=xr,si=r.id,ai=r.overflow,xr=a),a=Ic(a,f.children),a.flags|=4096,a)}function Y0(r,a,u){r.lanes|=a;var f=r.alternate;f!==null&&(f.lanes|=a),rc(r.return,a,u)}function Tc(r,a,u,f,m){var p=r.memoizedState;p===null?r.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:m}:(p.isBackwards=a,p.rendering=null,p.renderingStartTime=0,p.last=f,p.tail=u,p.tailMode=m)}function q0(r,a,u){var f=a.pendingProps,m=f.revealOrder,p=f.tail;if(De(r,a,f.children,u),f=Yt.current,f&2)f=f&1|2,a.flags|=128;else{if(r!==null&&r.flags&128)t:for(r=a.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Y0(r,u,a);else if(r.tag===19)Y0(r,u,a);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break t;for(;r.sibling===null;){if(r.return===null||r.return===a)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}f&=1}if(Bt(Yt,f),!(a.mode&1))a.memoizedState=null;else switch(m){case"forwards":for(u=a.child,m=null;u!==null;)r=u.alternate,r!==null&&kl(r)===null&&(m=u),u=u.sibling;u=m,u===null?(m=a.child,a.child=null):(m=u.sibling,u.sibling=null),Tc(a,!1,m,u,p);break;case"backwards":for(u=null,m=a.child,a.child=null;m!==null;){if(r=m.alternate,r!==null&&kl(r)===null){a.child=m;break}r=m.sibling,m.sibling=u,u=m,m=r}Tc(a,!0,u,null,p);break;case"together":Tc(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function jl(r,a){!(a.mode&1)&&r!==null&&(r.alternate=null,a.alternate=null,a.flags|=2)}function hi(r,a,u){if(r!==null&&(a.dependencies=r.dependencies),Sr|=a.lanes,!(u&a.childLanes))return null;if(r!==null&&a.child!==r.child)throw Error(e(153));if(a.child!==null){for(r=a.child,u=Vi(r,r.pendingProps),a.child=u,u.return=a;r.sibling!==null;)r=r.sibling,u=u.sibling=Vi(r,r.pendingProps),u.return=a;u.sibling=null}return a.child}function dv(r,a,u){switch(a.tag){case 3:X0(a),ms();break;case 5:l0(a);break;case 1:Ue(a.type)&&Ml(a);break;case 4:oc(a,a.stateNode.containerInfo);break;case 10:var f=a.type._context,m=a.memoizedProps.value;Bt(Tl,f._currentValue),f._currentValue=m;break;case 13:if(f=a.memoizedState,f!==null)return f.dehydrated!==null?(Bt(Yt,Yt.current&1),a.flags|=128,null):u&a.child.childLanes?$0(r,a,u):(Bt(Yt,Yt.current&1),r=hi(r,a,u),r!==null?r.sibling:null);Bt(Yt,Yt.current&1);break;case 19:if(f=(u&a.childLanes)!==0,r.flags&128){if(f)return q0(r,a,u);a.flags|=128}if(m=a.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Bt(Yt,Yt.current),f)break;return null;case 22:case 23:return a.lanes=0,W0(r,a,u)}return hi(r,a,u)}var H0,Pc,K0,Z0;H0=function(r,a){for(var u=a.child;u!==null;){if(u.tag===5||u.tag===6)r.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},Pc=function(){},K0=function(r,a,u,f){var m=r.memoizedProps;if(m!==f){r=a.stateNode,wr(Gn.current);var p=null;switch(u){case"input":m=Jn(r,m),f=Jn(r,f),p=[];break;case"select":m=V({},m,{value:void 0}),f=V({},f,{value:void 0}),p=[];break;case"textarea":m=Ci(r,m),f=Ci(r,f),p=[];break;default:typeof m.onClick!="function"&&typeof f.onClick=="function"&&(r.onclick=vl)}mr(u,f);var x;u=null;for(F in m)if(!f.hasOwnProperty(F)&&m.hasOwnProperty(F)&&m[F]!=null)if(F==="style"){var C=m[F];for(x in C)C.hasOwnProperty(x)&&(u||(u={}),u[x]="")}else F!=="dangerouslySetInnerHTML"&&F!=="children"&&F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&F!=="autoFocus"&&(s.hasOwnProperty(F)?p||(p=[]):(p=p||[]).push(F,null));for(F in f){var I=f[F];if(C=m!=null?m[F]:void 0,f.hasOwnProperty(F)&&I!==C&&(I!=null||C!=null))if(F==="style")if(C){for(x in C)!C.hasOwnProperty(x)||I&&I.hasOwnProperty(x)||(u||(u={}),u[x]="");for(x in I)I.hasOwnProperty(x)&&C[x]!==I[x]&&(u||(u={}),u[x]=I[x])}else u||(p||(p=[]),p.push(F,u)),u=I;else F==="dangerouslySetInnerHTML"?(I=I?I.__html:void 0,C=C?C.__html:void 0,I!=null&&C!==I&&(p=p||[]).push(F,I)):F==="children"?typeof I!="string"&&typeof I!="number"||(p=p||[]).push(F,""+I):F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&(s.hasOwnProperty(F)?(I!=null&&F==="onScroll"&&Ut("scroll",r),p||C===I||(p=[])):(p=p||[]).push(F,I))}u&&(p=p||[]).push("style",u);var F=p;(a.updateQueue=F)&&(a.flags|=4)}},Z0=function(r,a,u,f){u!==f&&(a.flags|=4)};function ja(r,a){if(!Vt)switch(r.tailMode){case"hidden":a=r.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?r.tail=null:u.sibling=null;break;case"collapsed":u=r.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?a||r.tail===null?r.tail=null:r.tail.sibling=null:f.sibling=null}}function Se(r){var a=r.alternate!==null&&r.alternate.child===r.child,u=0,f=0;if(a)for(var m=r.child;m!==null;)u|=m.lanes|m.childLanes,f|=m.subtreeFlags&14680064,f|=m.flags&14680064,m.return=r,m=m.sibling;else for(m=r.child;m!==null;)u|=m.lanes|m.childLanes,f|=m.subtreeFlags,f|=m.flags,m.return=r,m=m.sibling;return r.subtreeFlags|=f,r.childLanes=u,a}function gv(r,a,u){var f=a.pendingProps;switch(Zu(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Se(a),null;case 1:return Ue(a.type)&&El(),Se(a),null;case 3:return f=a.stateNode,vs(),Xt(Be),Xt(we),uc(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(r===null||r.child===null)&&(Rl(a)?a.flags|=4:r===null||r.memoizedState.isDehydrated&&!(a.flags&256)||(a.flags|=1024,Sn!==null&&(jc(Sn),Sn=null))),Pc(r,a),Se(a),null;case 5:lc(a);var m=wr(Da.current);if(u=a.type,r!==null&&a.stateNode!=null)K0(r,a,u,f,m),r.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!f){if(a.stateNode===null)throw Error(e(166));return Se(a),null}if(r=wr(Gn.current),Rl(a)){f=a.stateNode,u=a.type;var p=a.memoizedProps;switch(f[zn]=a,f[La]=p,r=(a.mode&1)!==0,u){case"dialog":Ut("cancel",f),Ut("close",f);break;case"iframe":case"object":case"embed":Ut("load",f);break;case"video":case"audio":for(m=0;m<Ia.length;m++)Ut(Ia[m],f);break;case"source":Ut("error",f);break;case"img":case"image":case"link":Ut("error",f),Ut("load",f);break;case"details":Ut("toggle",f);break;case"input":Kr(f,p),Ut("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!p.multiple},Ut("invalid",f);break;case"textarea":Si(f,p),Ut("invalid",f)}mr(u,p),m=null;for(var x in p)if(p.hasOwnProperty(x)){var C=p[x];x==="children"?typeof C=="string"?f.textContent!==C&&(p.suppressHydrationWarning!==!0&&yl(f.textContent,C,r),m=["children",C]):typeof C=="number"&&f.textContent!==""+C&&(p.suppressHydrationWarning!==!0&&yl(f.textContent,C,r),m=["children",""+C]):s.hasOwnProperty(x)&&C!=null&&x==="onScroll"&&Ut("scroll",f)}switch(u){case"input":Qn(f),Ko(f,p,!0);break;case"textarea":Qn(f),Jr(f);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(f.onclick=vl)}f=m,a.updateQueue=f,f!==null&&(a.flags|=4)}else{x=m.nodeType===9?m:m.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=gr(u)),r==="http://www.w3.org/1999/xhtml"?u==="script"?(r=x.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof f.is=="string"?r=x.createElement(u,{is:f.is}):(r=x.createElement(u),u==="select"&&(x=r,f.multiple?x.multiple=!0:f.size&&(x.size=f.size))):r=x.createElementNS(r,u),r[zn]=a,r[La]=f,H0(r,a,!1,!1),a.stateNode=r;t:{switch(x=es(u,f),u){case"dialog":Ut("cancel",r),Ut("close",r),m=f;break;case"iframe":case"object":case"embed":Ut("load",r),m=f;break;case"video":case"audio":for(m=0;m<Ia.length;m++)Ut(Ia[m],r);m=f;break;case"source":Ut("error",r),m=f;break;case"img":case"image":case"link":Ut("error",r),Ut("load",r),m=f;break;case"details":Ut("toggle",r),m=f;break;case"input":Kr(r,f),m=Jn(r,f),Ut("invalid",r);break;case"option":m=f;break;case"select":r._wrapperState={wasMultiple:!!f.multiple},m=V({},f,{value:void 0}),Ut("invalid",r);break;case"textarea":Si(r,f),m=Ci(r,f),Ut("invalid",r);break;default:m=f}mr(u,m),C=m;for(p in C)if(C.hasOwnProperty(p)){var I=C[p];p==="style"?ha(r,I):p==="dangerouslySetInnerHTML"?(I=I?I.__html:void 0,I!=null&&la(r,I)):p==="children"?typeof I=="string"?(u!=="textarea"||I!=="")&&Ii(r,I):typeof I=="number"&&Ii(r,""+I):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(s.hasOwnProperty(p)?I!=null&&p==="onScroll"&&Ut("scroll",r):I!=null&&O(r,p,I,x))}switch(u){case"input":Qn(r),Ko(r,f,!1);break;case"textarea":Qn(r),Jr(r);break;case"option":f.value!=null&&r.setAttribute("value",""+Rt(f.value));break;case"select":r.multiple=!!f.multiple,p=f.value,p!=null?wi(r,!!f.multiple,p,!1):f.defaultValue!=null&&wi(r,!!f.multiple,f.defaultValue,!0);break;default:typeof m.onClick=="function"&&(r.onclick=vl)}switch(u){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break t;case"img":f=!0;break t;default:f=!1}}f&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return Se(a),null;case 6:if(r&&a.stateNode!=null)Z0(r,a,r.memoizedProps,f);else{if(typeof f!="string"&&a.stateNode===null)throw Error(e(166));if(u=wr(Da.current),wr(Gn.current),Rl(a)){if(f=a.stateNode,u=a.memoizedProps,f[zn]=a,(p=f.nodeValue!==u)&&(r=sn,r!==null))switch(r.tag){case 3:yl(f.nodeValue,u,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&yl(f.nodeValue,u,(r.mode&1)!==0)}p&&(a.flags|=4)}else f=(u.nodeType===9?u:u.ownerDocument).createTextNode(f),f[zn]=a,a.stateNode=f}return Se(a),null;case 13:if(Xt(Yt),f=a.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Vt&&an!==null&&a.mode&1&&!(a.flags&128))t0(),ms(),a.flags|=98560,p=!1;else if(p=Rl(a),f!==null&&f.dehydrated!==null){if(r===null){if(!p)throw Error(e(318));if(p=a.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(e(317));p[zn]=a}else ms(),!(a.flags&128)&&(a.memoizedState=null),a.flags|=4;Se(a),p=!1}else Sn!==null&&(jc(Sn),Sn=null),p=!0;if(!p)return a.flags&65536?a:null}return a.flags&128?(a.lanes=u,a):(f=f!==null,f!==(r!==null&&r.memoizedState!==null)&&f&&(a.child.flags|=8192,a.mode&1&&(r===null||Yt.current&1?ae===0&&(ae=3):Uc())),a.updateQueue!==null&&(a.flags|=4),Se(a),null);case 4:return vs(),Pc(r,a),r===null&&Ta(a.stateNode.containerInfo),Se(a),null;case 10:return ic(a.type._context),Se(a),null;case 17:return Ue(a.type)&&El(),Se(a),null;case 19:if(Xt(Yt),p=a.memoizedState,p===null)return Se(a),null;if(f=(a.flags&128)!==0,x=p.rendering,x===null)if(f)ja(p,!1);else{if(ae!==0||r!==null&&r.flags&128)for(r=a.child;r!==null;){if(x=kl(r),x!==null){for(a.flags|=128,ja(p,!1),f=x.updateQueue,f!==null&&(a.updateQueue=f,a.flags|=4),a.subtreeFlags=0,f=u,u=a.child;u!==null;)p=u,r=f,p.flags&=14680066,x=p.alternate,x===null?(p.childLanes=0,p.lanes=r,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=x.childLanes,p.lanes=x.lanes,p.child=x.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=x.memoizedProps,p.memoizedState=x.memoizedState,p.updateQueue=x.updateQueue,p.type=x.type,r=x.dependencies,p.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),u=u.sibling;return Bt(Yt,Yt.current&1|2),a.child}r=r.sibling}p.tail!==null&&te()>ws&&(a.flags|=128,f=!0,ja(p,!1),a.lanes=4194304)}else{if(!f)if(r=kl(x),r!==null){if(a.flags|=128,f=!0,u=r.updateQueue,u!==null&&(a.updateQueue=u,a.flags|=4),ja(p,!0),p.tail===null&&p.tailMode==="hidden"&&!x.alternate&&!Vt)return Se(a),null}else 2*te()-p.renderingStartTime>ws&&u!==1073741824&&(a.flags|=128,f=!0,ja(p,!1),a.lanes=4194304);p.isBackwards?(x.sibling=a.child,a.child=x):(u=p.last,u!==null?u.sibling=x:a.child=x,p.last=x)}return p.tail!==null?(a=p.tail,p.rendering=a,p.tail=a.sibling,p.renderingStartTime=te(),a.sibling=null,u=Yt.current,Bt(Yt,f?u&1|2:u&1),a):(Se(a),null);case 22:case 23:return Bc(),f=a.memoizedState!==null,r!==null&&r.memoizedState!==null!==f&&(a.flags|=8192),f&&a.mode&1?on&1073741824&&(Se(a),a.subtreeFlags&6&&(a.flags|=8192)):Se(a),null;case 24:return null;case 25:return null}throw Error(e(156,a.tag))}function mv(r,a){switch(Zu(a),a.tag){case 1:return Ue(a.type)&&El(),r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 3:return vs(),Xt(Be),Xt(we),uc(),r=a.flags,r&65536&&!(r&128)?(a.flags=r&-65537|128,a):null;case 5:return lc(a),null;case 13:if(Xt(Yt),r=a.memoizedState,r!==null&&r.dehydrated!==null){if(a.alternate===null)throw Error(e(340));ms()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 19:return Xt(Yt),null;case 4:return vs(),null;case 10:return ic(a.type._context),null;case 22:case 23:return Bc(),null;case 24:return null;default:return null}}var Wl=!1,Re=!1,_v=typeof WeakSet=="function"?WeakSet:Set,tt=null;function Es(r,a){var u=r.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(f){Zt(r,a,f)}else u.current=null}function Lc(r,a,u){try{u()}catch(f){Zt(r,a,f)}}var Q0=!1;function pv(r,a){if(Bu=ol,r=Lg(),Nu(r)){if("selectionStart"in r)var u={start:r.selectionStart,end:r.selectionEnd};else t:{u=(u=r.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var m=f.anchorOffset,p=f.focusNode;f=f.focusOffset;try{u.nodeType,p.nodeType}catch{u=null;break t}var x=0,C=-1,I=-1,F=0,X=0,Y=r,U=null;e:for(;;){for(var J;Y!==u||m!==0&&Y.nodeType!==3||(C=x+m),Y!==p||f!==0&&Y.nodeType!==3||(I=x+f),Y.nodeType===3&&(x+=Y.nodeValue.length),(J=Y.firstChild)!==null;)U=Y,Y=J;for(;;){if(Y===r)break e;if(U===u&&++F===m&&(C=x),U===p&&++X===f&&(I=x),(J=Y.nextSibling)!==null)break;Y=U,U=Y.parentNode}Y=J}u=C===-1||I===-1?null:{start:C,end:I}}else u=null}u=u||{start:0,end:0}}else u=null;for(Uu={focusedElem:r,selectionRange:u},ol=!1,tt=a;tt!==null;)if(a=tt,r=a.child,(a.subtreeFlags&1028)!==0&&r!==null)r.return=a,tt=r;else for(;tt!==null;){a=tt;try{var it=a.alternate;if(a.flags&1024)switch(a.tag){case 0:case 11:case 15:break;case 1:if(it!==null){var at=it.memoizedProps,ee=it.memoizedState,N=a.stateNode,L=N.getSnapshotBeforeUpdate(a.elementType===a.type?at:Rn(a.type,at),ee);N.__reactInternalSnapshotBeforeUpdate=L}break;case 3:var D=a.stateNode.containerInfo;D.nodeType===1?D.textContent="":D.nodeType===9&&D.documentElement&&D.removeChild(D.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(e(163))}}catch(q){Zt(a,a.return,q)}if(r=a.sibling,r!==null){r.return=a.return,tt=r;break}tt=a.return}return it=Q0,Q0=!1,it}function Wa(r,a,u){var f=a.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var m=f=f.next;do{if((m.tag&r)===r){var p=m.destroy;m.destroy=void 0,p!==void 0&&Lc(a,u,p)}m=m.next}while(m!==f)}}function Bl(r,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var u=a=a.next;do{if((u.tag&r)===r){var f=u.create;u.destroy=f()}u=u.next}while(u!==a)}}function Ac(r){var a=r.ref;if(a!==null){var u=r.stateNode;switch(r.tag){case 5:r=u;break;default:r=u}typeof a=="function"?a(r):a.current=r}}function J0(r){var a=r.alternate;a!==null&&(r.alternate=null,J0(a)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(a=r.stateNode,a!==null&&(delete a[zn],delete a[La],delete a[Yu],delete a[J1],delete a[tv])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function tm(r){return r.tag===5||r.tag===3||r.tag===4}function em(r){t:for(;;){for(;r.sibling===null;){if(r.return===null||tm(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function kc(r,a,u){var f=r.tag;if(f===5||f===6)r=r.stateNode,a?u.nodeType===8?u.parentNode.insertBefore(r,a):u.insertBefore(r,a):(u.nodeType===8?(a=u.parentNode,a.insertBefore(r,u)):(a=u,a.appendChild(r)),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=vl));else if(f!==4&&(r=r.child,r!==null))for(kc(r,a,u),r=r.sibling;r!==null;)kc(r,a,u),r=r.sibling}function Oc(r,a,u){var f=r.tag;if(f===5||f===6)r=r.stateNode,a?u.insertBefore(r,a):u.appendChild(r);else if(f!==4&&(r=r.child,r!==null))for(Oc(r,a,u),r=r.sibling;r!==null;)Oc(r,a,u),r=r.sibling}var _e=null,In=!1;function ji(r,a,u){for(u=u.child;u!==null;)nm(r,a,u),u=u.sibling}function nm(r,a,u){if(bn&&typeof bn.onCommitFiberUnmount=="function")try{bn.onCommitFiberUnmount(el,u)}catch{}switch(u.tag){case 5:Re||Es(u,a);case 6:var f=_e,m=In;_e=null,ji(r,a,u),_e=f,In=m,_e!==null&&(In?(r=_e,u=u.stateNode,r.nodeType===8?r.parentNode.removeChild(u):r.removeChild(u)):_e.removeChild(u.stateNode));break;case 18:_e!==null&&(In?(r=_e,u=u.stateNode,r.nodeType===8?$u(r.parentNode,u):r.nodeType===1&&$u(r,u),va(r)):$u(_e,u.stateNode));break;case 4:f=_e,m=In,_e=u.stateNode.containerInfo,In=!0,ji(r,a,u),_e=f,In=m;break;case 0:case 11:case 14:case 15:if(!Re&&(f=u.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){m=f=f.next;do{var p=m,x=p.destroy;p=p.tag,x!==void 0&&(p&2||p&4)&&Lc(u,a,x),m=m.next}while(m!==f)}ji(r,a,u);break;case 1:if(!Re&&(Es(u,a),f=u.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=u.memoizedProps,f.state=u.memoizedState,f.componentWillUnmount()}catch(C){Zt(u,a,C)}ji(r,a,u);break;case 21:ji(r,a,u);break;case 22:u.mode&1?(Re=(f=Re)||u.memoizedState!==null,ji(r,a,u),Re=f):ji(r,a,u);break;default:ji(r,a,u)}}function im(r){var a=r.updateQueue;if(a!==null){r.updateQueue=null;var u=r.stateNode;u===null&&(u=r.stateNode=new _v),a.forEach(function(f){var m=Rv.bind(null,r,f);u.has(f)||(u.add(f),f.then(m,m))})}}function Tn(r,a){var u=a.deletions;if(u!==null)for(var f=0;f<u.length;f++){var m=u[f];try{var p=r,x=a,C=x;t:for(;C!==null;){switch(C.tag){case 5:_e=C.stateNode,In=!1;break t;case 3:_e=C.stateNode.containerInfo,In=!0;break t;case 4:_e=C.stateNode.containerInfo,In=!0;break t}C=C.return}if(_e===null)throw Error(e(160));nm(p,x,m),_e=null,In=!1;var I=m.alternate;I!==null&&(I.return=null),m.return=null}catch(F){Zt(m,a,F)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)rm(a,r),a=a.sibling}function rm(r,a){var u=r.alternate,f=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Tn(a,r),Wn(r),f&4){try{Wa(3,r,r.return),Bl(3,r)}catch(at){Zt(r,r.return,at)}try{Wa(5,r,r.return)}catch(at){Zt(r,r.return,at)}}break;case 1:Tn(a,r),Wn(r),f&512&&u!==null&&Es(u,u.return);break;case 5:if(Tn(a,r),Wn(r),f&512&&u!==null&&Es(u,u.return),r.flags&32){var m=r.stateNode;try{Ii(m,"")}catch(at){Zt(r,r.return,at)}}if(f&4&&(m=r.stateNode,m!=null)){var p=r.memoizedProps,x=u!==null?u.memoizedProps:p,C=r.type,I=r.updateQueue;if(r.updateQueue=null,I!==null)try{C==="input"&&p.type==="radio"&&p.name!=null&&Ho(m,p),es(C,x);var F=es(C,p);for(x=0;x<I.length;x+=2){var X=I[x],Y=I[x+1];X==="style"?ha(m,Y):X==="dangerouslySetInnerHTML"?la(m,Y):X==="children"?Ii(m,Y):O(m,X,Y,F)}switch(C){case"input":oa(m,p);break;case"textarea":Qr(m,p);break;case"select":var U=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!p.multiple;var J=p.value;J!=null?wi(m,!!p.multiple,J,!1):U!==!!p.multiple&&(p.defaultValue!=null?wi(m,!!p.multiple,p.defaultValue,!0):wi(m,!!p.multiple,p.multiple?[]:"",!1))}m[La]=p}catch(at){Zt(r,r.return,at)}}break;case 6:if(Tn(a,r),Wn(r),f&4){if(r.stateNode===null)throw Error(e(162));m=r.stateNode,p=r.memoizedProps;try{m.nodeValue=p}catch(at){Zt(r,r.return,at)}}break;case 3:if(Tn(a,r),Wn(r),f&4&&u!==null&&u.memoizedState.isDehydrated)try{va(a.containerInfo)}catch(at){Zt(r,r.return,at)}break;case 4:Tn(a,r),Wn(r);break;case 13:Tn(a,r),Wn(r),m=r.child,m.flags&8192&&(p=m.memoizedState!==null,m.stateNode.isHidden=p,!p||m.alternate!==null&&m.alternate.memoizedState!==null||(Fc=te())),f&4&&im(r);break;case 22:if(X=u!==null&&u.memoizedState!==null,r.mode&1?(Re=(F=Re)||X,Tn(a,r),Re=F):Tn(a,r),Wn(r),f&8192){if(F=r.memoizedState!==null,(r.stateNode.isHidden=F)&&!X&&r.mode&1)for(tt=r,X=r.child;X!==null;){for(Y=tt=X;tt!==null;){switch(U=tt,J=U.child,U.tag){case 0:case 11:case 14:case 15:Wa(4,U,U.return);break;case 1:Es(U,U.return);var it=U.stateNode;if(typeof it.componentWillUnmount=="function"){f=U,u=U.return;try{a=f,it.props=a.memoizedProps,it.state=a.memoizedState,it.componentWillUnmount()}catch(at){Zt(f,u,at)}}break;case 5:Es(U,U.return);break;case 22:if(U.memoizedState!==null){om(Y);continue}}J!==null?(J.return=U,tt=J):om(Y)}X=X.sibling}t:for(X=null,Y=r;;){if(Y.tag===5){if(X===null){X=Y;try{m=Y.stateNode,F?(p=m.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(C=Y.stateNode,I=Y.memoizedProps.style,x=I!=null&&I.hasOwnProperty("display")?I.display:null,C.style.display=Zo("display",x))}catch(at){Zt(r,r.return,at)}}}else if(Y.tag===6){if(X===null)try{Y.stateNode.nodeValue=F?"":Y.memoizedProps}catch(at){Zt(r,r.return,at)}}else if((Y.tag!==22&&Y.tag!==23||Y.memoizedState===null||Y===r)&&Y.child!==null){Y.child.return=Y,Y=Y.child;continue}if(Y===r)break t;for(;Y.sibling===null;){if(Y.return===null||Y.return===r)break t;X===Y&&(X=null),Y=Y.return}X===Y&&(X=null),Y.sibling.return=Y.return,Y=Y.sibling}}break;case 19:Tn(a,r),Wn(r),f&4&&im(r);break;case 21:break;default:Tn(a,r),Wn(r)}}function Wn(r){var a=r.flags;if(a&2){try{t:{for(var u=r.return;u!==null;){if(tm(u)){var f=u;break t}u=u.return}throw Error(e(160))}switch(f.tag){case 5:var m=f.stateNode;f.flags&32&&(Ii(m,""),f.flags&=-33);var p=em(r);Oc(r,p,m);break;case 3:case 4:var x=f.stateNode.containerInfo,C=em(r);kc(r,C,x);break;default:throw Error(e(161))}}catch(I){Zt(r,r.return,I)}r.flags&=-3}a&4096&&(r.flags&=-4097)}function yv(r,a,u){tt=r,sm(r)}function sm(r,a,u){for(var f=(r.mode&1)!==0;tt!==null;){var m=tt,p=m.child;if(m.tag===22&&f){var x=m.memoizedState!==null||Wl;if(!x){var C=m.alternate,I=C!==null&&C.memoizedState!==null||Re;C=Wl;var F=Re;if(Wl=x,(Re=I)&&!F)for(tt=m;tt!==null;)x=tt,I=x.child,x.tag===22&&x.memoizedState!==null?lm(m):I!==null?(I.return=x,tt=I):lm(m);for(;p!==null;)tt=p,sm(p),p=p.sibling;tt=m,Wl=C,Re=F}am(r)}else m.subtreeFlags&8772&&p!==null?(p.return=m,tt=p):am(r)}}function am(r){for(;tt!==null;){var a=tt;if(a.flags&8772){var u=a.alternate;try{if(a.flags&8772)switch(a.tag){case 0:case 11:case 15:Re||Bl(5,a);break;case 1:var f=a.stateNode;if(a.flags&4&&!Re)if(u===null)f.componentDidMount();else{var m=a.elementType===a.type?u.memoizedProps:Rn(a.type,u.memoizedProps);f.componentDidUpdate(m,u.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var p=a.updateQueue;p!==null&&o0(a,p,f);break;case 3:var x=a.updateQueue;if(x!==null){if(u=null,a.child!==null)switch(a.child.tag){case 5:u=a.child.stateNode;break;case 1:u=a.child.stateNode}o0(a,x,u)}break;case 5:var C=a.stateNode;if(u===null&&a.flags&4){u=C;var I=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":I.autoFocus&&u.focus();break;case"img":I.src&&(u.src=I.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var F=a.alternate;if(F!==null){var X=F.memoizedState;if(X!==null){var Y=X.dehydrated;Y!==null&&va(Y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(e(163))}Re||a.flags&512&&Ac(a)}catch(U){Zt(a,a.return,U)}}if(a===r){tt=null;break}if(u=a.sibling,u!==null){u.return=a.return,tt=u;break}tt=a.return}}function om(r){for(;tt!==null;){var a=tt;if(a===r){tt=null;break}var u=a.sibling;if(u!==null){u.return=a.return,tt=u;break}tt=a.return}}function lm(r){for(;tt!==null;){var a=tt;try{switch(a.tag){case 0:case 11:case 15:var u=a.return;try{Bl(4,a)}catch(I){Zt(a,u,I)}break;case 1:var f=a.stateNode;if(typeof f.componentDidMount=="function"){var m=a.return;try{f.componentDidMount()}catch(I){Zt(a,m,I)}}var p=a.return;try{Ac(a)}catch(I){Zt(a,p,I)}break;case 5:var x=a.return;try{Ac(a)}catch(I){Zt(a,x,I)}}}catch(I){Zt(a,a.return,I)}if(a===r){tt=null;break}var C=a.sibling;if(C!==null){C.return=a.return,tt=C;break}tt=a.return}}var vv=Math.ceil,Ul=P.ReactCurrentDispatcher,Nc=P.ReactCurrentOwner,_n=P.ReactCurrentBatchConfig,Lt=0,ue=null,re=null,pe=0,on=0,Ms=Di(0),ae=0,Ba=null,Sr=0,Xl=0,Dc=0,Ua=null,Ve=null,Fc=0,ws=1/0,ui=null,Vl=!1,bc=null,Wi=null,$l=!1,Bi=null,Yl=0,Xa=0,zc=null,ql=-1,Hl=0;function Fe(){return Lt&6?te():ql!==-1?ql:ql=te()}function Ui(r){return r.mode&1?Lt&2&&pe!==0?pe&-pe:nv.transition!==null?(Hl===0&&(Hl=eg()),Hl):(r=zt,r!==0||(r=window.event,r=r===void 0?16:ug(r.type)),r):1}function Pn(r,a,u,f){if(50<Xa)throw Xa=0,zc=null,Error(e(185));ga(r,u,f),(!(Lt&2)||r!==ue)&&(r===ue&&(!(Lt&2)&&(Xl|=u),ae===4&&Xi(r,pe)),$e(r,f),u===1&&Lt===0&&!(a.mode&1)&&(ws=te()+500,wl&&bi()))}function $e(r,a){var u=r.callbackNode;n1(r,a);var f=rl(r,r===ue?pe:0);if(f===0)u!==null&&Qd(u),r.callbackNode=null,r.callbackPriority=0;else if(a=f&-f,r.callbackPriority!==a){if(u!=null&&Qd(u),a===1)r.tag===0?ev(um.bind(null,r)):Hg(um.bind(null,r)),Z1(function(){!(Lt&6)&&bi()}),u=null;else{switch(ng(f)){case 1:u=pu;break;case 4:u=Jd;break;case 16:u=tl;break;case 536870912:u=tg;break;default:u=tl}u=ym(u,hm.bind(null,r))}r.callbackPriority=a,r.callbackNode=u}}function hm(r,a){if(ql=-1,Hl=0,Lt&6)throw Error(e(327));var u=r.callbackNode;if(Cs()&&r.callbackNode!==u)return null;var f=rl(r,r===ue?pe:0);if(f===0)return null;if(f&30||f&r.expiredLanes||a)a=Kl(r,f);else{a=f;var m=Lt;Lt|=2;var p=fm();(ue!==r||pe!==a)&&(ui=null,ws=te()+500,Ir(r,a));do try{Mv();break}catch(C){cm(r,C)}while(!0);nc(),Ul.current=p,Lt=m,re!==null?a=0:(ue=null,pe=0,a=ae)}if(a!==0){if(a===2&&(m=yu(r),m!==0&&(f=m,a=Gc(r,m))),a===1)throw u=Ba,Ir(r,0),Xi(r,f),$e(r,te()),u;if(a===6)Xi(r,f);else{if(m=r.current.alternate,!(f&30)&&!xv(m)&&(a=Kl(r,f),a===2&&(p=yu(r),p!==0&&(f=p,a=Gc(r,p))),a===1))throw u=Ba,Ir(r,0),Xi(r,f),$e(r,te()),u;switch(r.finishedWork=m,r.finishedLanes=f,a){case 0:case 1:throw Error(e(345));case 2:Tr(r,Ve,ui);break;case 3:if(Xi(r,f),(f&130023424)===f&&(a=Fc+500-te(),10<a)){if(rl(r,0)!==0)break;if(m=r.suspendedLanes,(m&f)!==f){Fe(),r.pingedLanes|=r.suspendedLanes&m;break}r.timeoutHandle=Vu(Tr.bind(null,r,Ve,ui),a);break}Tr(r,Ve,ui);break;case 4:if(Xi(r,f),(f&4194240)===f)break;for(a=r.eventTimes,m=-1;0<f;){var x=31-wn(f);p=1<<x,x=a[x],x>m&&(m=x),f&=~p}if(f=m,f=te()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*vv(f/1960))-f,10<f){r.timeoutHandle=Vu(Tr.bind(null,r,Ve,ui),f);break}Tr(r,Ve,ui);break;case 5:Tr(r,Ve,ui);break;default:throw Error(e(329))}}}return $e(r,te()),r.callbackNode===u?hm.bind(null,r):null}function Gc(r,a){var u=Ua;return r.current.memoizedState.isDehydrated&&(Ir(r,a).flags|=256),r=Kl(r,a),r!==2&&(a=Ve,Ve=u,a!==null&&jc(a)),r}function jc(r){Ve===null?Ve=r:Ve.push.apply(Ve,r)}function xv(r){for(var a=r;;){if(a.flags&16384){var u=a.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var f=0;f<u.length;f++){var m=u[f],p=m.getSnapshot;m=m.value;try{if(!Cn(p(),m))return!1}catch{return!1}}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Xi(r,a){for(a&=~Dc,a&=~Xl,r.suspendedLanes|=a,r.pingedLanes&=~a,r=r.expirationTimes;0<a;){var u=31-wn(a),f=1<<u;r[u]=-1,a&=~f}}function um(r){if(Lt&6)throw Error(e(327));Cs();var a=rl(r,0);if(!(a&1))return $e(r,te()),null;var u=Kl(r,a);if(r.tag!==0&&u===2){var f=yu(r);f!==0&&(a=f,u=Gc(r,f))}if(u===1)throw u=Ba,Ir(r,0),Xi(r,a),$e(r,te()),u;if(u===6)throw Error(e(345));return r.finishedWork=r.current.alternate,r.finishedLanes=a,Tr(r,Ve,ui),$e(r,te()),null}function Wc(r,a){var u=Lt;Lt|=1;try{return r(a)}finally{Lt=u,Lt===0&&(ws=te()+500,wl&&bi())}}function Rr(r){Bi!==null&&Bi.tag===0&&!(Lt&6)&&Cs();var a=Lt;Lt|=1;var u=_n.transition,f=zt;try{if(_n.transition=null,zt=1,r)return r()}finally{zt=f,_n.transition=u,Lt=a,!(Lt&6)&&bi()}}function Bc(){on=Ms.current,Xt(Ms)}function Ir(r,a){r.finishedWork=null,r.finishedLanes=0;var u=r.timeoutHandle;if(u!==-1&&(r.timeoutHandle=-1,K1(u)),re!==null)for(u=re.return;u!==null;){var f=u;switch(Zu(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&El();break;case 3:vs(),Xt(Be),Xt(we),uc();break;case 5:lc(f);break;case 4:vs();break;case 13:Xt(Yt);break;case 19:Xt(Yt);break;case 10:ic(f.type._context);break;case 22:case 23:Bc()}u=u.return}if(ue=r,re=r=Vi(r.current,null),pe=on=a,ae=0,Ba=null,Dc=Xl=Sr=0,Ve=Ua=null,Mr!==null){for(a=0;a<Mr.length;a++)if(u=Mr[a],f=u.interleaved,f!==null){u.interleaved=null;var m=f.next,p=u.pending;if(p!==null){var x=p.next;p.next=m,f.next=x}u.pending=f}Mr=null}return r}function cm(r,a){do{var u=re;try{if(nc(),Ol.current=bl,Nl){for(var f=qt.memoizedState;f!==null;){var m=f.queue;m!==null&&(m.pending=null),f=f.next}Nl=!1}if(Cr=0,he=se=qt=null,Fa=!1,ba=0,Nc.current=null,u===null||u.return===null){ae=1,Ba=a,re=null;break}t:{var p=r,x=u.return,C=u,I=a;if(a=pe,C.flags|=32768,I!==null&&typeof I=="object"&&typeof I.then=="function"){var F=I,X=C,Y=X.tag;if(!(X.mode&1)&&(Y===0||Y===11||Y===15)){var U=X.alternate;U?(X.updateQueue=U.updateQueue,X.memoizedState=U.memoizedState,X.lanes=U.lanes):(X.updateQueue=null,X.memoizedState=null)}var J=F0(x);if(J!==null){J.flags&=-257,b0(J,x,C,p,a),J.mode&1&&D0(p,F,a),a=J,I=F;var it=a.updateQueue;if(it===null){var at=new Set;at.add(I),a.updateQueue=at}else it.add(I);break t}else{if(!(a&1)){D0(p,F,a),Uc();break t}I=Error(e(426))}}else if(Vt&&C.mode&1){var ee=F0(x);if(ee!==null){!(ee.flags&65536)&&(ee.flags|=256),b0(ee,x,C,p,a),tc(xs(I,C));break t}}p=I=xs(I,C),ae!==4&&(ae=2),Ua===null?Ua=[p]:Ua.push(p),p=x;do{switch(p.tag){case 3:p.flags|=65536,a&=-a,p.lanes|=a;var N=O0(p,I,a);a0(p,N);break t;case 1:C=I;var L=p.type,D=p.stateNode;if(!(p.flags&128)&&(typeof L.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(Wi===null||!Wi.has(D)))){p.flags|=65536,a&=-a,p.lanes|=a;var q=N0(p,C,a);a0(p,q);break t}}p=p.return}while(p!==null)}gm(u)}catch(ht){a=ht,re===u&&u!==null&&(re=u=u.return);continue}break}while(!0)}function fm(){var r=Ul.current;return Ul.current=bl,r===null?bl:r}function Uc(){(ae===0||ae===3||ae===2)&&(ae=4),ue===null||!(Sr&268435455)&&!(Xl&268435455)||Xi(ue,pe)}function Kl(r,a){var u=Lt;Lt|=2;var f=fm();(ue!==r||pe!==a)&&(ui=null,Ir(r,a));do try{Ev();break}catch(m){cm(r,m)}while(!0);if(nc(),Lt=u,Ul.current=f,re!==null)throw Error(e(261));return ue=null,pe=0,ae}function Ev(){for(;re!==null;)dm(re)}function Mv(){for(;re!==null&&!Yy();)dm(re)}function dm(r){var a=pm(r.alternate,r,on);r.memoizedProps=r.pendingProps,a===null?gm(r):re=a,Nc.current=null}function gm(r){var a=r;do{var u=a.alternate;if(r=a.return,a.flags&32768){if(u=mv(u,a),u!==null){u.flags&=32767,re=u;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{ae=6,re=null;return}}else if(u=gv(u,a,on),u!==null){re=u;return}if(a=a.sibling,a!==null){re=a;return}re=a=r}while(a!==null);ae===0&&(ae=5)}function Tr(r,a,u){var f=zt,m=_n.transition;try{_n.transition=null,zt=1,wv(r,a,u,f)}finally{_n.transition=m,zt=f}return null}function wv(r,a,u,f){do Cs();while(Bi!==null);if(Lt&6)throw Error(e(327));u=r.finishedWork;var m=r.finishedLanes;if(u===null)return null;if(r.finishedWork=null,r.finishedLanes=0,u===r.current)throw Error(e(177));r.callbackNode=null,r.callbackPriority=0;var p=u.lanes|u.childLanes;if(i1(r,p),r===ue&&(re=ue=null,pe=0),!(u.subtreeFlags&2064)&&!(u.flags&2064)||$l||($l=!0,ym(tl,function(){return Cs(),null})),p=(u.flags&15990)!==0,u.subtreeFlags&15990||p){p=_n.transition,_n.transition=null;var x=zt;zt=1;var C=Lt;Lt|=4,Nc.current=null,pv(r,u),rm(u,r),U1(Uu),ol=!!Bu,Uu=Bu=null,r.current=u,yv(u),qy(),Lt=C,zt=x,_n.transition=p}else r.current=u;if($l&&($l=!1,Bi=r,Yl=m),p=r.pendingLanes,p===0&&(Wi=null),Zy(u.stateNode),$e(r,te()),a!==null)for(f=r.onRecoverableError,u=0;u<a.length;u++)m=a[u],f(m.value,{componentStack:m.stack,digest:m.digest});if(Vl)throw Vl=!1,r=bc,bc=null,r;return Yl&1&&r.tag!==0&&Cs(),p=r.pendingLanes,p&1?r===zc?Xa++:(Xa=0,zc=r):Xa=0,bi(),null}function Cs(){if(Bi!==null){var r=ng(Yl),a=_n.transition,u=zt;try{if(_n.transition=null,zt=16>r?16:r,Bi===null)var f=!1;else{if(r=Bi,Bi=null,Yl=0,Lt&6)throw Error(e(331));var m=Lt;for(Lt|=4,tt=r.current;tt!==null;){var p=tt,x=p.child;if(tt.flags&16){var C=p.deletions;if(C!==null){for(var I=0;I<C.length;I++){var F=C[I];for(tt=F;tt!==null;){var X=tt;switch(X.tag){case 0:case 11:case 15:Wa(8,X,p)}var Y=X.child;if(Y!==null)Y.return=X,tt=Y;else for(;tt!==null;){X=tt;var U=X.sibling,J=X.return;if(J0(X),X===F){tt=null;break}if(U!==null){U.return=J,tt=U;break}tt=J}}}var it=p.alternate;if(it!==null){var at=it.child;if(at!==null){it.child=null;do{var ee=at.sibling;at.sibling=null,at=ee}while(at!==null)}}tt=p}}if(p.subtreeFlags&2064&&x!==null)x.return=p,tt=x;else t:for(;tt!==null;){if(p=tt,p.flags&2048)switch(p.tag){case 0:case 11:case 15:Wa(9,p,p.return)}var N=p.sibling;if(N!==null){N.return=p.return,tt=N;break t}tt=p.return}}var L=r.current;for(tt=L;tt!==null;){x=tt;var D=x.child;if(x.subtreeFlags&2064&&D!==null)D.return=x,tt=D;else t:for(x=L;tt!==null;){if(C=tt,C.flags&2048)try{switch(C.tag){case 0:case 11:case 15:Bl(9,C)}}catch(ht){Zt(C,C.return,ht)}if(C===x){tt=null;break t}var q=C.sibling;if(q!==null){q.return=C.return,tt=q;break t}tt=C.return}}if(Lt=m,bi(),bn&&typeof bn.onPostCommitFiberRoot=="function")try{bn.onPostCommitFiberRoot(el,r)}catch{}f=!0}return f}finally{zt=u,_n.transition=a}}return!1}function mm(r,a,u){a=xs(u,a),a=O0(r,a,1),r=Gi(r,a,1),a=Fe(),r!==null&&(ga(r,1,a),$e(r,a))}function Zt(r,a,u){if(r.tag===3)mm(r,r,u);else for(;a!==null;){if(a.tag===3){mm(a,r,u);break}else if(a.tag===1){var f=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Wi===null||!Wi.has(f))){r=xs(u,r),r=N0(a,r,1),a=Gi(a,r,1),r=Fe(),a!==null&&(ga(a,1,r),$e(a,r));break}}a=a.return}}function Cv(r,a,u){var f=r.pingCache;f!==null&&f.delete(a),a=Fe(),r.pingedLanes|=r.suspendedLanes&u,ue===r&&(pe&u)===u&&(ae===4||ae===3&&(pe&130023424)===pe&&500>te()-Fc?Ir(r,0):Dc|=u),$e(r,a)}function _m(r,a){a===0&&(r.mode&1?(a=il,il<<=1,!(il&130023424)&&(il=4194304)):a=1);var u=Fe();r=oi(r,a),r!==null&&(ga(r,a,u),$e(r,u))}function Sv(r){var a=r.memoizedState,u=0;a!==null&&(u=a.retryLane),_m(r,u)}function Rv(r,a){var u=0;switch(r.tag){case 13:var f=r.stateNode,m=r.memoizedState;m!==null&&(u=m.retryLane);break;case 19:f=r.stateNode;break;default:throw Error(e(314))}f!==null&&f.delete(a),_m(r,u)}var pm;pm=function(r,a,u){if(r!==null)if(r.memoizedProps!==a.pendingProps||Be.current)Xe=!0;else{if(!(r.lanes&u)&&!(a.flags&128))return Xe=!1,dv(r,a,u);Xe=!!(r.flags&131072)}else Xe=!1,Vt&&a.flags&1048576&&Kg(a,Sl,a.index);switch(a.lanes=0,a.tag){case 2:var f=a.type;jl(r,a),r=a.pendingProps;var m=fs(a,we.current);ys(a,u),m=dc(null,a,f,r,m,u);var p=gc();return a.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Ue(f)?(p=!0,Ml(a)):p=!1,a.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,ac(a),m.updater=zl,a.stateNode=m,m._reactInternals=a,xc(a,f,r,u),a=Cc(null,a,f,!0,p,u)):(a.tag=0,Vt&&p&&Ku(a),De(null,a,m,u),a=a.child),a;case 16:f=a.elementType;t:{switch(jl(r,a),r=a.pendingProps,m=f._init,f=m(f._payload),a.type=f,m=a.tag=Tv(f),r=Rn(f,r),m){case 0:a=wc(null,a,f,r,u);break t;case 1:a=U0(null,a,f,r,u);break t;case 11:a=z0(null,a,f,r,u);break t;case 14:a=G0(null,a,f,Rn(f.type,r),u);break t}throw Error(e(306,f,""))}return a;case 0:return f=a.type,m=a.pendingProps,m=a.elementType===f?m:Rn(f,m),wc(r,a,f,m,u);case 1:return f=a.type,m=a.pendingProps,m=a.elementType===f?m:Rn(f,m),U0(r,a,f,m,u);case 3:t:{if(X0(a),r===null)throw Error(e(387));f=a.pendingProps,p=a.memoizedState,m=p.element,s0(r,a),Al(a,f,null,u);var x=a.memoizedState;if(f=x.element,p.isDehydrated)if(p={element:f,isDehydrated:!1,cache:x.cache,pendingSuspenseBoundaries:x.pendingSuspenseBoundaries,transitions:x.transitions},a.updateQueue.baseState=p,a.memoizedState=p,a.flags&256){m=xs(Error(e(423)),a),a=V0(r,a,f,u,m);break t}else if(f!==m){m=xs(Error(e(424)),a),a=V0(r,a,f,u,m);break t}else for(an=Ni(a.stateNode.containerInfo.firstChild),sn=a,Vt=!0,Sn=null,u=i0(a,null,f,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(ms(),f===m){a=hi(r,a,u);break t}De(r,a,f,u)}a=a.child}return a;case 5:return l0(a),r===null&&Ju(a),f=a.type,m=a.pendingProps,p=r!==null?r.memoizedProps:null,x=m.children,Xu(f,m)?x=null:p!==null&&Xu(f,p)&&(a.flags|=32),B0(r,a),De(r,a,x,u),a.child;case 6:return r===null&&Ju(a),null;case 13:return $0(r,a,u);case 4:return oc(a,a.stateNode.containerInfo),f=a.pendingProps,r===null?a.child=_s(a,null,f,u):De(r,a,f,u),a.child;case 11:return f=a.type,m=a.pendingProps,m=a.elementType===f?m:Rn(f,m),z0(r,a,f,m,u);case 7:return De(r,a,a.pendingProps,u),a.child;case 8:return De(r,a,a.pendingProps.children,u),a.child;case 12:return De(r,a,a.pendingProps.children,u),a.child;case 10:t:{if(f=a.type._context,m=a.pendingProps,p=a.memoizedProps,x=m.value,Bt(Tl,f._currentValue),f._currentValue=x,p!==null)if(Cn(p.value,x)){if(p.children===m.children&&!Be.current){a=hi(r,a,u);break t}}else for(p=a.child,p!==null&&(p.return=a);p!==null;){var C=p.dependencies;if(C!==null){x=p.child;for(var I=C.firstContext;I!==null;){if(I.context===f){if(p.tag===1){I=li(-1,u&-u),I.tag=2;var F=p.updateQueue;if(F!==null){F=F.shared;var X=F.pending;X===null?I.next=I:(I.next=X.next,X.next=I),F.pending=I}}p.lanes|=u,I=p.alternate,I!==null&&(I.lanes|=u),rc(p.return,u,a),C.lanes|=u;break}I=I.next}}else if(p.tag===10)x=p.type===a.type?null:p.child;else if(p.tag===18){if(x=p.return,x===null)throw Error(e(341));x.lanes|=u,C=x.alternate,C!==null&&(C.lanes|=u),rc(x,u,a),x=p.sibling}else x=p.child;if(x!==null)x.return=p;else for(x=p;x!==null;){if(x===a){x=null;break}if(p=x.sibling,p!==null){p.return=x.return,x=p;break}x=x.return}p=x}De(r,a,m.children,u),a=a.child}return a;case 9:return m=a.type,f=a.pendingProps.children,ys(a,u),m=gn(m),f=f(m),a.flags|=1,De(r,a,f,u),a.child;case 14:return f=a.type,m=Rn(f,a.pendingProps),m=Rn(f.type,m),G0(r,a,f,m,u);case 15:return j0(r,a,a.type,a.pendingProps,u);case 17:return f=a.type,m=a.pendingProps,m=a.elementType===f?m:Rn(f,m),jl(r,a),a.tag=1,Ue(f)?(r=!0,Ml(a)):r=!1,ys(a,u),A0(a,f,m),xc(a,f,m,u),Cc(null,a,f,!0,r,u);case 19:return q0(r,a,u);case 22:return W0(r,a,u)}throw Error(e(156,a.tag))};function ym(r,a){return Zd(r,a)}function Iv(r,a,u,f){this.tag=r,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pn(r,a,u,f){return new Iv(r,a,u,f)}function Xc(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Tv(r){if(typeof r=="function")return Xc(r)?1:0;if(r!=null){if(r=r.$$typeof,r===lt)return 11;if(r===wt)return 14}return 2}function Vi(r,a){var u=r.alternate;return u===null?(u=pn(r.tag,a,r.key,r.mode),u.elementType=r.elementType,u.type=r.type,u.stateNode=r.stateNode,u.alternate=r,r.alternate=u):(u.pendingProps=a,u.type=r.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=r.flags&14680064,u.childLanes=r.childLanes,u.lanes=r.lanes,u.child=r.child,u.memoizedProps=r.memoizedProps,u.memoizedState=r.memoizedState,u.updateQueue=r.updateQueue,a=r.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=r.sibling,u.index=r.index,u.ref=r.ref,u}function Zl(r,a,u,f,m,p){var x=2;if(f=r,typeof r=="function")Xc(r)&&(x=1);else if(typeof r=="string")x=5;else t:switch(r){case B:return Pr(u.children,m,p,a);case G:x=8,m|=8;break;case W:return r=pn(12,u,a,m|2),r.elementType=W,r.lanes=p,r;case ct:return r=pn(13,u,a,m),r.elementType=ct,r.lanes=p,r;case et:return r=pn(19,u,a,m),r.elementType=et,r.lanes=p,r;case nt:return Ql(u,m,p,a);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case K:x=10;break t;case rt:x=9;break t;case lt:x=11;break t;case wt:x=14;break t;case st:x=16,f=null;break t}throw Error(e(130,r==null?r:typeof r,""))}return a=pn(x,u,a,m),a.elementType=r,a.type=f,a.lanes=p,a}function Pr(r,a,u,f){return r=pn(7,r,f,a),r.lanes=u,r}function Ql(r,a,u,f){return r=pn(22,r,f,a),r.elementType=nt,r.lanes=u,r.stateNode={isHidden:!1},r}function Vc(r,a,u){return r=pn(6,r,null,a),r.lanes=u,r}function $c(r,a,u){return a=pn(4,r.children!==null?r.children:[],r.key,a),a.lanes=u,a.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},a}function Pv(r,a,u,f,m){this.tag=a,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vu(0),this.expirationTimes=vu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vu(0),this.identifierPrefix=f,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function Yc(r,a,u,f,m,p,x,C,I){return r=new Pv(r,a,u,C,I),a===1?(a=1,p===!0&&(a|=8)):a=0,p=pn(3,null,null,a),r.current=p,p.stateNode=r,p.memoizedState={element:f,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},ac(p),r}function Lv(r,a,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:b,key:f==null?null:""+f,children:r,containerInfo:a,implementation:u}}function vm(r){if(!r)return Fi;r=r._reactInternals;t:{if(pr(r)!==r||r.tag!==1)throw Error(e(170));var a=r;do{switch(a.tag){case 3:a=a.stateNode.context;break t;case 1:if(Ue(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break t}}a=a.return}while(a!==null);throw Error(e(171))}if(r.tag===1){var u=r.type;if(Ue(u))return Yg(r,u,a)}return a}function xm(r,a,u,f,m,p,x,C,I){return r=Yc(u,f,!0,r,m,p,x,C,I),r.context=vm(null),u=r.current,f=Fe(),m=Ui(u),p=li(f,m),p.callback=a??null,Gi(u,p,m),r.current.lanes=m,ga(r,m,f),$e(r,f),r}function Jl(r,a,u,f){var m=a.current,p=Fe(),x=Ui(m);return u=vm(u),a.context===null?a.context=u:a.pendingContext=u,a=li(p,x),a.payload={element:r},f=f===void 0?null:f,f!==null&&(a.callback=f),r=Gi(m,a,x),r!==null&&(Pn(r,m,x,p),Ll(r,m,x)),x}function th(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function Em(r,a){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var u=r.retryLane;r.retryLane=u!==0&&u<a?u:a}}function qc(r,a){Em(r,a),(r=r.alternate)&&Em(r,a)}var Mm=typeof reportError=="function"?reportError:function(r){console.error(r)};function Hc(r){this._internalRoot=r}eh.prototype.render=Hc.prototype.render=function(r){var a=this._internalRoot;if(a===null)throw Error(e(409));Jl(r,a,null,null)},eh.prototype.unmount=Hc.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var a=r.containerInfo;Rr(function(){Jl(null,r,null,null)}),a[ii]=null}};function eh(r){this._internalRoot=r}eh.prototype.unstable_scheduleHydration=function(r){if(r){var a=sg();r={blockedOn:null,target:r,priority:a};for(var u=0;u<Ai.length&&a!==0&&a<Ai[u].priority;u++);Ai.splice(u,0,r),u===0&&lg(r)}};function Kc(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function nh(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function wm(){}function Av(r,a,u,f,m){if(m){if(typeof f=="function"){var p=f;f=function(){var F=th(x);p.call(F)}}var x=xm(a,f,r,0,null,!1,!1,"",wm);return r._reactRootContainer=x,r[ii]=x.current,Ta(r.nodeType===8?r.parentNode:r),Rr(),x}for(;m=r.lastChild;)r.removeChild(m);if(typeof f=="function"){var C=f;f=function(){var F=th(I);C.call(F)}}var I=Yc(r,0,!1,null,null,!1,!1,"",wm);return r._reactRootContainer=I,r[ii]=I.current,Ta(r.nodeType===8?r.parentNode:r),Rr(function(){Jl(a,I,u,f)}),I}function ih(r,a,u,f,m){var p=u._reactRootContainer;if(p){var x=p;if(typeof m=="function"){var C=m;m=function(){var I=th(x);C.call(I)}}Jl(a,x,r,m)}else x=Av(u,a,r,m,f);return th(x)}ig=function(r){switch(r.tag){case 3:var a=r.stateNode;if(a.current.memoizedState.isDehydrated){var u=da(a.pendingLanes);u!==0&&(xu(a,u|1),$e(a,te()),!(Lt&6)&&(ws=te()+500,bi()))}break;case 13:Rr(function(){var f=oi(r,1);if(f!==null){var m=Fe();Pn(f,r,1,m)}}),qc(r,1)}},Eu=function(r){if(r.tag===13){var a=oi(r,134217728);if(a!==null){var u=Fe();Pn(a,r,134217728,u)}qc(r,134217728)}},rg=function(r){if(r.tag===13){var a=Ui(r),u=oi(r,a);if(u!==null){var f=Fe();Pn(u,r,a,f)}qc(r,a)}},sg=function(){return zt},ag=function(r,a){var u=zt;try{return zt=r,a()}finally{zt=u}},ni=function(r,a,u){switch(a){case"input":if(oa(r,u),a=u.name,u.type==="radio"&&a!=null){for(u=r;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<u.length;a++){var f=u[a];if(f!==r&&f.form===r.form){var m=xl(f);if(!m)throw Error(e(90));Hr(f),oa(f,m)}}}break;case"textarea":Qr(r,u);break;case"select":a=u.value,a!=null&&wi(r,!!u.multiple,a,!1)}},Fn=Wc,Ae=Rr;var kv={usingClientEntryPoint:!1,Events:[Aa,us,xl,fa,Le,Wc]},Va={findFiberByHostInstance:yr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ov={bundleType:Va.bundleType,version:Va.version,rendererPackageName:Va.rendererPackageName,rendererConfig:Va.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:P.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=Hd(r),r===null?null:r.stateNode},findFiberByHostInstance:Va.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rh.isDisabled&&rh.supportsFiber)try{el=rh.inject(Ov),bn=rh}catch{}}return Ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kv,Ye.createPortal=function(r,a){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Kc(a))throw Error(e(200));return Lv(r,a,null,u)},Ye.createRoot=function(r,a){if(!Kc(r))throw Error(e(299));var u=!1,f="",m=Mm;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onRecoverableError!==void 0&&(m=a.onRecoverableError)),a=Yc(r,1,!1,null,null,u,!1,f,m),r[ii]=a.current,Ta(r.nodeType===8?r.parentNode:r),new Hc(a)},Ye.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var a=r._reactInternals;if(a===void 0)throw typeof r.render=="function"?Error(e(188)):(r=Object.keys(r).join(","),Error(e(268,r)));return r=Hd(a),r=r===null?null:r.stateNode,r},Ye.flushSync=function(r){return Rr(r)},Ye.hydrate=function(r,a,u){if(!nh(a))throw Error(e(200));return ih(null,r,a,!0,u)},Ye.hydrateRoot=function(r,a,u){if(!Kc(r))throw Error(e(405));var f=u!=null&&u.hydratedSources||null,m=!1,p="",x=Mm;if(u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(p=u.identifierPrefix),u.onRecoverableError!==void 0&&(x=u.onRecoverableError)),a=xm(a,null,r,1,u??null,m,!1,p,x),r[ii]=a.current,Ta(r),f)for(r=0;r<f.length;r++)u=f[r],m=u._getVersion,m=m(u._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[u,m]:a.mutableSourceEagerHydrationData.push(u,m);return new eh(a)},Ye.render=function(r,a,u){if(!nh(a))throw Error(e(200));return ih(null,r,a,!1,u)},Ye.unmountComponentAtNode=function(r){if(!nh(r))throw Error(e(40));return r._reactRootContainer?(Rr(function(){ih(null,null,r,!1,function(){r._reactRootContainer=null,r[ii]=null})}),!0):!1},Ye.unstable_batchedUpdates=Wc,Ye.unstable_renderSubtreeIntoContainer=function(r,a,u,f){if(!nh(u))throw Error(e(200));if(r==null||r._reactInternals===void 0)throw Error(e(38));return ih(r,a,u,!1,f)},Ye.version="18.3.1-next-f1338f8080-20240426",Ye}var km;function Xv(){if(km)return Jc.exports;km=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Jc.exports=Uv(),Jc.exports}var Om;function Vv(){if(Om)return sh;Om=1;var n=Xv();return sh.createRoot=n.createRoot,sh.hydrateRoot=n.hydrateRoot,sh}var $v=Vv();const He={ADD:"add",REMOVE:"remove"},Vs={PROPERTYCHANGE:"propertychange"},Ct={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class Hf{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function Yv(n,t,e){let i,s;e=e||zr;let o=0,l=n.length,h=!1;for(;o<l;)i=o+(l-o>>1),s=+e(n[i],t),s<0?o=i+1:(l=i,h=!s);return h?o:~o}function zr(n,t){return n>t?1:n<t?-1:0}function qv(n,t){return n<t?1:n>t?-1:0}function Kf(n,t,e){if(n[0]<=t)return 0;const i=n.length;if(t<=n[i-1])return i-1;if(typeof e=="function"){for(let s=1;s<i;++s){const o=n[s];if(o===t)return s;if(o<t)return e(t,n[s-1],o)>0?s-1:s}return i-1}if(e>0){for(let s=1;s<i;++s)if(n[s]<t)return s-1;return i-1}if(e<0){for(let s=1;s<i;++s)if(n[s]<=t)return s;return i-1}for(let s=1;s<i;++s){if(n[s]==t)return s;if(n[s]<t)return n[s-1]-t<t-n[s]?s-1:s}return i-1}function Hv(n,t,e){for(;t<e;){const i=n[t];n[t]=n[e],n[e]=i,++t,--e}}function qn(n,t){const e=Array.isArray(t)?t:[t],i=e.length;for(let s=0;s<i;s++)n[n.length]=e[s]}function cr(n,t){const e=n.length;if(e!==t.length)return!1;for(let i=0;i<e;i++)if(n[i]!==t[i])return!1;return!0}function po(){return!0}function Hh(){return!1}function $s(){}function tp(n){let t,e,i;return function(){const s=Array.prototype.slice.call(arguments);return(!e||this!==i||!cr(s,e))&&(i=this,e=s,t=n.apply(this,arguments)),t}}function ep(n){function t(){let e;try{e=n()}catch(i){return Promise.reject(i)}return e instanceof Promise?e:Promise.resolve(e)}return t()}function No(n){for(const t in n)delete n[t]}function jr(n){let t;for(t in n)return!1;return!t}class xi{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}class Kh extends Hf{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return;const i=this.listeners_||(this.listeners_={}),s=i[t]||(i[t]=[]);s.includes(e)||s.push(e)}dispatchEvent(t){const e=typeof t=="string",i=e?t:t.type,s=this.listeners_&&this.listeners_[i];if(!s)return;const o=e?new xi(t):t;o.target||(o.target=this.eventTarget_||this);const l=this.dispatching_||(this.dispatching_={}),h=this.pendingRemovals_||(this.pendingRemovals_={});i in l||(l[i]=0,h[i]=0),++l[i];let c;for(let d=0,g=s.length;d<g;++d)if("handleEvent"in s[d]?c=s[d].handleEvent(o):c=s[d].call(this,o),c===!1||o.propagationStopped){c=!1;break}if(--l[i]===0){let d=h[i];for(delete h[i];d--;)this.removeEventListener(i,$s);delete l[i]}return c}disposeInternal(){this.listeners_&&No(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(t,e){if(!this.listeners_)return;const i=this.listeners_[t];if(!i)return;const s=i.indexOf(e);s!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(i[s]=$s,++this.pendingRemovals_[t]):(i.splice(s,1),i.length===0&&delete this.listeners_[t]))}}function At(n,t,e,i,s){if(s){const l=e;e=function(h){return n.removeEventListener(t,e),l.call(i??this,h)}}else i&&i!==n&&(e=e.bind(i));const o={target:n,type:t,listener:e};return n.addEventListener(t,e),o}function Nm(n,t,e,i){return At(n,t,e,i,!0)}function Kt(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),No(n))}class Do extends Kh{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(Ct.CHANGE)}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){const i=t.length,s=new Array(i);for(let o=0;o<i;++o)s[o]=At(this,t[o],e);return s}return At(this,t,e)}onceInternal(t,e){let i;if(Array.isArray(t)){const s=t.length;i=new Array(s);for(let o=0;o<s;++o)i[o]=Nm(this,t[o],e)}else i=Nm(this,t,e);return e.ol_key=i,i}unInternal(t,e){const i=e.ol_key;if(i)Kv(i);else if(Array.isArray(t))for(let s=0,o=t.length;s<o;++s)this.removeEventListener(t[s],e);else this.removeEventListener(t,e)}}Do.prototype.on;Do.prototype.once;Do.prototype.un;function Kv(n){if(Array.isArray(n))for(let t=0,e=n.length;t<e;++t)Kt(n[t]);else Kt(n)}function Mt(){throw new Error("Unimplemented abstract method.")}let Zv=0;function ie(n){return n.ol_uid||(n.ol_uid=String(++Zv))}class Dm extends xi{constructor(t,e,i){super(t),this.key=e,this.oldValue=i}}class Zn extends Do{constructor(t){super(),this.on,this.once,this.un,ie(this),this.values_=null,t!==void 0&&this.setProperties(t)}get(t){let e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(t,e){let i;i=`change:${t}`,this.hasListener(i)&&this.dispatchEvent(new Dm(i,t,e)),i=Vs.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new Dm(i,t,e))}addChangeListener(t,e){this.addEventListener(`change:${t}`,e)}removeChangeListener(t,e){this.removeEventListener(`change:${t}`,e)}set(t,e,i){const s=this.values_||(this.values_={});if(i)s[t]=e;else{const o=s[t];s[t]=e,o!==e&&this.notify(t,o)}}setProperties(t,e){for(const i in t)this.set(i,t[i],e)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){const i=this.values_[t];delete this.values_[t],jr(this.values_)&&(this.values_=null),e||this.notify(t,i)}}}const Fm={LENGTH:"length"};class ah extends xi{constructor(t,e,i){super(t),this.element=e,this.index=i}}class Vn extends Zn{constructor(t,e){if(super(),this.on,this.once,this.un,e=e||{},this.unique_=!!e.unique,this.array_=t||[],this.unique_)for(let i=0,s=this.array_.length;i<s;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let e=0,i=t.length;e<i;++e)this.push(t[e]);return this}forEach(t){const e=this.array_;for(let i=0,s=e.length;i<s;++i)t(e[i],i,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(Fm.LENGTH)}insertAt(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new ah(He.ADD,e,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const e=this.getLength();return this.insertAt(e,t),this.getLength()}remove(t){const e=this.array_;for(let i=0,s=e.length;i<s;++i)if(e[i]===t)return this.removeAt(i)}removeAt(t){if(t<0||t>=this.getLength())return;const e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new ah(He.REMOVE,e,t)),e}setAt(t,e){const i=this.getLength();if(t>=i){this.insertAt(t,e);return}if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);const s=this.array_[t];this.array_[t]=e,this.dispatchEvent(new ah(He.REMOVE,s,t)),this.dispatchEvent(new ah(He.ADD,e,t))}updateLength_(){this.set(Fm.LENGTH,this.array_.length)}assertUnique_(t,e){for(let i=0,s=this.array_.length;i<s;++i)if(this.array_[i]===t&&i!==e)throw new Error("Duplicate item added to a unique collection")}}class Ls extends xi{constructor(t,e,i){super(t),this.map=e,this.frameState=i!==void 0?i:null}}class Zi extends Ls{constructor(t,e,i,s,o,l){super(t,e,o),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=s!==void 0?s:!1,this.activePointers=l}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const Qt={SINGLECLICK:"singleclick",CLICK:Ct.CLICK,DBLCLICK:Ct.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},or=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",Qv=or.includes("firefox"),Jv=or.includes("safari")&&!or.includes("chrom");Jv&&(or.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(or));const t2=or.includes("webkit")&&!or.includes("edge"),np=or.includes("macintosh"),ip=typeof devicePixelRatio<"u"?devicePixelRatio:1,rp=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,sp=typeof Image<"u"&&Image.prototype.decode,ap=typeof createImageBitmap=="function",op=function(){let n=!1;try{const t=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch{}return n}(),Sf={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class e2 extends Kh{constructor(t,e){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=e===void 0?1:e,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=At(i,Sf.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=At(i,Sf.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(Ct.TOUCHMOVE,this.boundHandleTouchMove_,op?{passive:!1}:!1)}emulateClick_(t){let e=new Zi(Qt.CLICK,this.map_,t);this.dispatchEvent(e),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new Zi(Qt.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const i=new Zi(Qt.SINGLECLICK,this.map_,t);this.dispatchEvent(i)},250)}updateActivePointers_(t){const e=t,i=e.pointerId;if(e.type==Qt.POINTERUP||e.type==Qt.POINTERCANCEL){delete this.trackedTouches_[i];for(const s in this.trackedTouches_)if(this.trackedTouches_[s].target!==e.target){delete this.trackedTouches_[s];break}}else(e.type==Qt.POINTERDOWN||e.type==Qt.POINTERMOVE)&&(this.trackedTouches_[i]=e);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const e=new Zi(Qt.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Kt),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return t.button===0}handlePointerDown_(t){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(t);const e=new Zi(Qt.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);if(this.dispatchEvent(e),this.down_=new PointerEvent(t.type,t),Object.defineProperty(this.down_,"target",{writable:!1,value:t.target}),this.dragListenerKeys_.length===0){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(At(i,Qt.POINTERMOVE,this.handlePointerMove_,this),At(i,Qt.POINTERUP,this.handlePointerUp_,this),At(this.element_,Qt.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(At(this.element_.getRootNode(),Qt.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const e=new Zi(Qt.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(e)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const e=!!(this.down_&&this.isMoving_(t));this.dispatchEvent(new Zi(Qt.POINTERMOVE,this.map_,t,e))}handleTouchMove_(t){const e=this.originalPointerMoveEvent_;(!e||e.defaultPrevented)&&(typeof t.cancelable!="boolean"||t.cancelable===!0)&&t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Kt(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Ct.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Kt(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Kt),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const Qi={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},Ie={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},Ya={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function $t(n,t){if(!n)throw new Error(t)}const Sh=1/0;class n2{constructor(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,No(this.queuedElements_)}dequeue(){const t=this.elements_,e=this.priorities_,i=t[0];t.length==1?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));const s=this.keyFunction_(i);return delete this.queuedElements_[s],i}enqueue(t){$t(!(this.keyFunction_(t)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const e=this.priorityFunction_(t);return e!=Sh?(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(t){return t*2+1}getRightChildIndex_(t){return t*2+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return this.elements_.length===0}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const e=this.elements_,i=this.priorities_,s=e.length,o=e[t],l=i[t],h=t;for(;t<s>>1;){const c=this.getLeftChildIndex_(t),d=this.getRightChildIndex_(t),g=d<s&&i[d]<i[c]?d:c;e[t]=e[g],i[t]=i[g],t=g}e[t]=o,i[t]=l,this.siftDown_(h,t)}siftDown_(t,e){const i=this.elements_,s=this.priorities_,o=i[e],l=s[e];for(;e>t;){const h=this.getParentIndex_(e);if(s[h]>l)i[e]=i[h],s[e]=s[h],e=h;else break}i[e]=o,s[e]=l}reprioritize(){const t=this.priorityFunction_,e=this.elements_,i=this.priorities_;let s=0;const o=e.length;let l,h,c;for(h=0;h<o;++h)l=e[h],c=t(l),c==Sh?delete this.queuedElements_[this.keyFunction_(l)]:(i[s]=c,e[s++]=l);e.length=s,i.length=s,this.heapify_()}}class i2 extends n2{constructor(t,e){super(i=>t.apply(null,i),i=>i[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const e=super.enqueue(t);return e&&t[0].addEventListener(Ct.CHANGE,this.boundHandleTileChange_),e}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const e=t.target,i=e.getState();if(i===Ya.LOADED||i===Ya.ERROR||i===Ya.EMPTY){i!==Ya.ERROR&&e.removeEventListener(Ct.CHANGE,this.boundHandleTileChange_);const s=e.getKey();s in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[s],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,e){let i=0;for(;this.tilesLoading_<t&&i<e&&this.getCount()>0;){const s=this.dequeue()[0],o=s.getKey();s.getState()===Ya.IDLE&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++i,s.load())}}}function r2(n,t,e,i,s){if(!n||!(e in n.wantedTiles)||!n.wantedTiles[e][t.getKey()])return Sh;const o=n.viewState.center,l=i[0]-o[0],h=i[1]-o[1];return 65536*Math.log(s)+Math.sqrt(l*l+h*h)/s}const de={ANIMATING:0,INTERACTING:1},Ln={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function le(n,t,e){return Math.min(Math.max(n,t),e)}function s2(n,t,e,i,s,o){const l=s-e,h=o-i;if(l!==0||h!==0){const c=((n-e)*l+(t-i)*h)/(l*l+h*h);c>1?(e=s,i=o):c>0&&(e+=l*c,i+=h*c)}return Gr(n,t,e,i)}function Gr(n,t,e,i){const s=e-n,o=i-t;return s*s+o*o}function a2(n){const t=n.length;for(let i=0;i<t;i++){let s=i,o=Math.abs(n[i][i]);for(let h=i+1;h<t;h++){const c=Math.abs(n[h][i]);c>o&&(o=c,s=h)}if(o===0)return null;const l=n[s];n[s]=n[i],n[i]=l;for(let h=i+1;h<t;h++){const c=-n[h][i]/n[i][i];for(let d=i;d<t+1;d++)i==d?n[h][d]=0:n[h][d]+=c*n[i][d]}}const e=new Array(t);for(let i=t-1;i>=0;i--){e[i]=n[i][t]/n[i][i];for(let s=i-1;s>=0;s--)n[s][t]-=n[s][i]*e[i]}return e}function bm(n){return n*180/Math.PI}function ir(n){return n*Math.PI/180}function lo(n,t){const e=n%t;return e*t<0?e+t:e}function ln(n,t,e){return n+e*(t-n)}function lp(n,t){const e=Math.pow(10,t);return Math.round(n*e)/e}function oh(n,t){return Math.ceil(lp(n,t))}function Rf(n,t,e){if(n>=t&&n<e)return n;const i=e-t;return((n-t)%i+i)%i+t}function zm(n,t,e){return function(i,s,o,l,h){if(!i)return;if(!s&&!t)return i;const c=t?0:o[0]*s,d=t?0:o[1]*s,g=h?h[0]:0,_=h?h[1]:0;let y=n[0]+c/2+g,v=n[2]-c/2+g,E=n[1]+d/2+_,M=n[3]-d/2+_;y>v&&(y=(v+y)/2,v=y),E>M&&(E=(M+E)/2,M=E);let w=le(i[0],y,v),S=le(i[1],E,M);if(l&&e&&s){const R=30*s;w+=-R*Math.log(1+Math.max(0,y-i[0])/R)+R*Math.log(1+Math.max(0,i[0]-v)/R),S+=-R*Math.log(1+Math.max(0,E-i[1])/R)+R*Math.log(1+Math.max(0,i[1]-M)/R)}return[w,S]}}function o2(n){return n}const fe={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Gm(n){const t=Nn();for(let e=0,i=n.length;e<i;++e)ho(t,n[e]);return t}function Zf(n,t,e){return e?(e[0]=n[0]-t,e[1]=n[1]-t,e[2]=n[2]+t,e[3]=n[3]+t,e):[n[0]-t,n[1]-t,n[2]+t,n[3]+t]}function hp(n,t){return t?(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t):n.slice()}function Vr(n,t,e){let i,s;return t<n[0]?i=n[0]-t:n[2]<t?i=t-n[2]:i=0,e<n[1]?s=n[1]-e:n[3]<e?s=e-n[3]:s=0,i*i+s*s}function yo(n,t){return Qf(n,t[0],t[1])}function tr(n,t){return n[0]<=t[0]&&t[2]<=n[2]&&n[1]<=t[1]&&t[3]<=n[3]}function Qf(n,t,e){return n[0]<=t&&t<=n[2]&&n[1]<=e&&e<=n[3]}function If(n,t){const e=n[0],i=n[1],s=n[2],o=n[3],l=t[0],h=t[1];let c=fe.UNKNOWN;return l<e?c=c|fe.LEFT:l>s&&(c=c|fe.RIGHT),h<i?c=c|fe.BELOW:h>o&&(c=c|fe.ABOVE),c===fe.UNKNOWN&&(c=fe.INTERSECTING),c}function Nn(){return[1/0,1/0,-1/0,-1/0]}function Ys(n,t,e,i,s){return s?(s[0]=n,s[1]=t,s[2]=e,s[3]=i,s):[n,t,e,i]}function Fo(n){return Ys(1/0,1/0,-1/0,-1/0,n)}function up(n,t){const e=n[0],i=n[1];return Ys(e,i,e,i,t)}function Jf(n,t,e,i,s){const o=Fo(s);return fp(o,n,t,e,i)}function vo(n,t){return n[0]==t[0]&&n[2]==t[2]&&n[1]==t[1]&&n[3]==t[3]}function cp(n,t){return t[0]<n[0]&&(n[0]=t[0]),t[2]>n[2]&&(n[2]=t[2]),t[1]<n[1]&&(n[1]=t[1]),t[3]>n[3]&&(n[3]=t[3]),n}function ho(n,t){t[0]<n[0]&&(n[0]=t[0]),t[0]>n[2]&&(n[2]=t[0]),t[1]<n[1]&&(n[1]=t[1]),t[1]>n[3]&&(n[3]=t[1])}function fp(n,t,e,i,s){for(;e<i;e+=s)l2(n,t[e],t[e+1]);return n}function l2(n,t,e){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}function h2(n,t){let e;return e=t(td(n)),e||(e=t(ed(n)),e)||(e=t(id(n)),e)||(e=t(Zh(n)),e)?e:!1}function u2(n){let t=0;return na(n)||(t=Nt(n)*ge(n)),t}function td(n){return[n[0],n[1]]}function ed(n){return[n[2],n[1]]}function yi(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function Rh(n,t,e,i,s){const[o,l,h,c,d,g,_,y]=c2(n,t,e,i);return Ys(Math.min(o,h,d,_),Math.min(l,c,g,y),Math.max(o,h,d,_),Math.max(l,c,g,y),s)}function c2(n,t,e,i){const s=t*i[0]/2,o=t*i[1]/2,l=Math.cos(e),h=Math.sin(e),c=s*l,d=s*h,g=o*l,_=o*h,y=n[0],v=n[1];return[y-c+_,v-d-g,y-c-_,v-d+g,y+c-_,v+d+g,y+c+_,v+d-g,y-c+_,v-d-g]}function ge(n){return n[3]-n[1]}function nd(n,t,e){const i=e||Nn();return Ge(n,t)?(n[0]>t[0]?i[0]=n[0]:i[0]=t[0],n[1]>t[1]?i[1]=n[1]:i[1]=t[1],n[2]<t[2]?i[2]=n[2]:i[2]=t[2],n[3]<t[3]?i[3]=n[3]:i[3]=t[3]):Fo(i),i}function Zh(n){return[n[0],n[3]]}function id(n){return[n[2],n[3]]}function Nt(n){return n[2]-n[0]}function Ge(n,t){return n[0]<=t[2]&&n[2]>=t[0]&&n[1]<=t[3]&&n[3]>=t[1]}function na(n){return n[2]<n[0]||n[3]<n[1]}function f2(n,t){return t?(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t):n}function d2(n,t,e){let i=!1;const s=If(n,t),o=If(n,e);if(s===fe.INTERSECTING||o===fe.INTERSECTING)i=!0;else{const l=n[0],h=n[1],c=n[2],d=n[3],g=t[0],_=t[1],y=e[0],v=e[1],E=(v-_)/(y-g);let M,w;o&fe.ABOVE&&!(s&fe.ABOVE)&&(M=y-(v-d)/E,i=M>=l&&M<=c),!i&&o&fe.RIGHT&&!(s&fe.RIGHT)&&(w=v-(y-c)*E,i=w>=h&&w<=d),!i&&o&fe.BELOW&&!(s&fe.BELOW)&&(M=y-(v-h)/E,i=M>=l&&M<=c),!i&&o&fe.LEFT&&!(s&fe.LEFT)&&(w=v-(y-l)*E,i=w>=h&&w<=d)}return i}function dp(n,t){const e=t.getExtent(),i=yi(n);if(t.canWrapX()&&(i[0]<e[0]||i[0]>=e[2])){const s=Nt(e),l=Math.floor((i[0]-e[0])/s)*s;n[0]-=l,n[2]-=l}return n}function g2(n,t,e){if(t.canWrapX()){const i=t.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[i[0],n[1],i[2],n[3]]];dp(n,t);const s=Nt(i);if(Nt(n)>s)return[[i[0],n[1],i[2],n[3]]];if(n[0]<i[0])return[[n[0]+s,n[1],i[2],n[3]],[i[0],n[1],n[2],n[3]]];if(n[2]>i[2])return[[n[0],n[1],i[2],n[3]],[i[0],n[1],n[2]-s,n[3]]]}return[n]}function m2(n,t){return n[0]+=+t[0],n[1]+=+t[1],n}function Ih(n,t){let e=!0;for(let i=n.length-1;i>=0;--i)if(n[i]!=t[i]){e=!1;break}return e}function rd(n,t){const e=Math.cos(t),i=Math.sin(t),s=n[0]*e-n[1]*i,o=n[1]*e+n[0]*i;return n[0]=s,n[1]=o,n}function _2(n,t){return n[0]*=t,n[1]*=t,n}function gp(n,t){if(t.canWrapX()){const e=Nt(t.getExtent()),i=mp(n,t,e);i&&(n[0]-=i*e)}return n}function mp(n,t,e){const i=t.getExtent();let s=0;return t.canWrapX()&&(n[0]<i[0]||n[0]>i[2])&&(e=e||Nt(i),s=Math.floor((n[0]-i[0])/e)),s}function p2(n){return Math.pow(n,3)}function ia(n){return 1-p2(1-n)}function y2(n){return 3*n*n-2*n*n*n}function v2(n){return n}const x2=63710088e-1;function jm(n,t,e){e=e||x2;const i=ir(n[1]),s=ir(t[1]),o=(s-i)/2,l=ir(t[0]-n[0])/2,h=Math.sin(o)*Math.sin(o)+Math.sin(l)*Math.sin(l)*Math.cos(i)*Math.cos(s);return 2*e*Math.atan2(Math.sqrt(h),Math.sqrt(1-h))}function _p(...n){console.warn(...n)}const pp={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};let Qh=class{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=t.extent!==void 0?t.extent:null,this.worldExtent_=t.worldExtent!==void 0?t.worldExtent:null,this.axisOrientation_=t.axisOrientation!==void 0?t.axisOrientation:"enu",this.global_=t.global!==void 0?t.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||pp[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}};const bo=6378137,Ds=Math.PI*bo,E2=[-Ds,-Ds,Ds,Ds],M2=[-180,-85,180,85],lh=bo*Math.log(Math.tan(Math.PI/2));class Ss extends Qh{constructor(t){super({code:t,units:"m",extent:E2,global:!0,worldExtent:M2,getPointResolution:function(e,i){return e/Math.cosh(i[1]/bo)}})}}const Wm=[new Ss("EPSG:3857"),new Ss("EPSG:102100"),new Ss("EPSG:102113"),new Ss("EPSG:900913"),new Ss("http://www.opengis.net/def/crs/EPSG/0/3857"),new Ss("http://www.opengis.net/gml/srs/epsg.xml#3857")];function w2(n,t,e,i){const s=n.length;e=e>1?e:2,i=i??e,t===void 0&&(e>2?t=n.slice():t=new Array(s));for(let o=0;o<s;o+=i){t[o]=Ds*n[o]/180;let l=bo*Math.log(Math.tan(Math.PI*(+n[o+1]+90)/360));l>lh?l=lh:l<-lh&&(l=-lh),t[o+1]=l}return t}function C2(n,t,e,i){const s=n.length;e=e>1?e:2,i=i??e,t===void 0&&(e>2?t=n.slice():t=new Array(s));for(let o=0;o<s;o+=i)t[o]=180*n[o]/Ds,t[o+1]=360*Math.atan(Math.exp(n[o+1]/bo))/Math.PI-90;return t}const S2=6378137,Bm=[-180,-90,180,90],R2=Math.PI*S2/180;class Lr extends Qh{constructor(t,e){super({code:t,units:"degrees",extent:Bm,axisOrientation:e,global:!0,metersPerUnit:R2,worldExtent:Bm})}}const Um=[new Lr("CRS:84"),new Lr("EPSG:4326","neu"),new Lr("urn:ogc:def:crs:OGC:1.3:CRS84"),new Lr("urn:ogc:def:crs:OGC:2:84"),new Lr("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Lr("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Lr("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let Tf={};function vh(n){return Tf[n]||Tf[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function I2(n,t){Tf[n]=t}let Ws={};function Wr(n,t,e){const i=n.getCode(),s=t.getCode();i in Ws||(Ws[i]={}),Ws[i][s]=e}function xh(n,t){return n in Ws&&t in Ws[n]?Ws[n][t]:null}const Th=.9996,Mn=.00669438,Jh=Mn*Mn,tu=Jh*Mn,Or=Mn/(1-Mn),Xm=Math.sqrt(1-Mn),qs=(1-Xm)/(1+Xm),yp=qs*qs,sd=yp*qs,ad=sd*qs,vp=ad*qs,xp=1-Mn/4-3*Jh/64-5*tu/256,T2=3*Mn/8+3*Jh/32+45*tu/1024,P2=15*Jh/256+45*tu/1024,L2=35*tu/3072,A2=3/2*qs-27/32*sd+269/512*vp,k2=21/16*yp-55/32*ad,O2=151/96*sd-417/128*vp,N2=1097/512*ad,Ph=6378137;function D2(n,t,e){const i=n-5e5,l=(e.north?t:t-1e7)/Th/(Ph*xp),h=l+A2*Math.sin(2*l)+k2*Math.sin(4*l)+O2*Math.sin(6*l)+N2*Math.sin(8*l),c=Math.sin(h),d=c*c,g=Math.cos(h),_=c/g,y=_*_,v=y*y,E=1-Mn*d,M=Math.sqrt(1-Mn*d),w=Ph/M,S=(1-Mn)/E,R=Or*g**2,O=R*R,P=i/(w*Th),k=P*P,b=k*P,B=b*P,G=B*P,W=G*P,K=h-_/S*(k/2-B/24*(5+3*y+10*R-4*O-9*Or))+W/720*(61+90*y+298*R+45*v-252*Or-3*O);let rt=(P-b/6*(1+2*y+R)+G/120*(5-2*R+28*y-3*O+8*Or+24*v))/g;return rt=Rf(rt+ir(Ep(e.number)),-Math.PI,Math.PI),[bm(rt),bm(K)]}const Vm=-80,$m=84,F2=-180,b2=180;function z2(n,t,e){n=Rf(n,F2,b2),t<Vm?t=Vm:t>$m&&(t=$m);const i=ir(t),s=Math.sin(i),o=Math.cos(i),l=s/o,h=l*l,c=h*h,d=ir(n),g=Ep(e.number),_=ir(g),y=Ph/Math.sqrt(1-Mn*s**2),v=Or*o**2,E=o*Rf(d-_,-Math.PI,Math.PI),M=E*E,w=M*E,S=w*E,R=S*E,O=R*E,P=Ph*(xp*i-T2*Math.sin(2*i)+P2*Math.sin(4*i)-L2*Math.sin(6*i)),k=Th*y*(E+w/6*(1-h+v)+R/120*(5-18*h+c+72*v-58*Or))+5e5;let b=Th*(P+y*l*(M/2+S/24*(5-h+9*v+4*v**2)+O/720*(61-58*h+c+600*v-330*Or)));return e.north||(b+=1e7),[k,b]}function Ep(n){return(n-1)*6-180+3}const G2=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function Mp(n){let t=0;for(const s of G2){const o=n.match(s);if(o){t=parseInt(o[1]);break}}if(!t)return null;let e=0,i=!1;return t>32700&&t<32761?e=t-32700:t>32600&&t<32661&&(i=!0,e=t-32600),e?{number:e,north:i}:null}function Ym(n,t){return function(e,i,s,o){const l=e.length;s=s>1?s:2,o=o??s,i||(s>2?i=e.slice():i=new Array(l));for(let h=0;h<l;h+=o){const c=e[h],d=e[h+1],g=n(c,d,t);i[h]=g[0],i[h+1]=g[1]}return i}}function j2(n){return Mp(n)?new Qh({code:n,units:"m"}):null}function W2(n){const t=Mp(n.getCode());return t?{forward:Ym(z2,t),inverse:Ym(D2,t)}:null}const B2=[W2],U2=[j2];let Pf=!0;function X2(n){Pf=!1}function od(n,t){if(t!==void 0){for(let e=0,i=n.length;e<i;++e)t[e]=n[e];t=t}else t=n.slice();return t}function Lh(n){I2(n.getCode(),n),Wr(n,n,od)}function V2(n){n.forEach(Lh)}function Jt(n){if(typeof n!="string")return n;const t=vh(n);if(t)return t;for(const e of U2){const i=e(n);if(i)return i}return null}function qm(n,t,e,i){n=Jt(n);let s;const o=n.getPointResolutionFunc();if(o)s=o(t,e);else{const l=n.getUnits();if(l=="degrees"||i=="degrees")s=t;else{const h=hd(n,Jt("EPSG:4326"));if(!h&&l!=="degrees")s=t*n.getMetersPerUnit();else{let d=[e[0]-t/2,e[1],e[0]+t/2,e[1],e[0],e[1]-t/2,e[0],e[1]+t/2];d=h(d,d,2);const g=jm(d.slice(0,2),d.slice(2,4)),_=jm(d.slice(4,6),d.slice(6,8));s=(g+_)/2}const c=n.getMetersPerUnit();c!==void 0&&(s/=c)}}return s}function Lf(n){V2(n),n.forEach(function(t){n.forEach(function(e){t!==e&&Wr(t,e,od)})})}function $2(n,t,e,i){n.forEach(function(s){t.forEach(function(o){Wr(s,o,e),Wr(o,s,i)})})}function ld(n,t){return n?typeof n=="string"?Jt(n):n:Jt(t)}function Af(n){return function(t,e,i,s){const o=t.length;i=i!==void 0?i:2,s=s??i,e=e!==void 0?e:new Array(o);for(let l=0;l<o;l+=s){const h=n(t.slice(l,l+i)),c=h.length;for(let d=0,g=s;d<g;++d)e[l+d]=d>=c?t[l+d]:h[d]}return e}}function Y2(n,t,e,i){const s=Jt(n),o=Jt(t);Wr(s,o,Af(e)),Wr(o,s,Af(i))}function kf(n,t){if(n===t)return!0;const e=n.getUnits()===t.getUnits();return(n.getCode()===t.getCode()||hd(n,t)===od)&&e}function hd(n,t){const e=n.getCode(),i=t.getCode();let s=xh(e,i);if(s)return s;let o=null,l=null;for(const c of B2)o||(o=c(n)),l||(l=c(t));if(!o&&!l)return null;const h="EPSG:4326";if(l)if(o)s=nf(o.inverse,l.forward);else{const c=xh(e,h);c&&(s=nf(c,l.forward))}else{const c=xh(h,i);c&&(s=nf(o.inverse,c))}return s&&(Lh(n),Lh(t),Wr(n,t,s)),s}function nf(n,t){return function(e,i,s,o){return i=n(e,i,s,o),t(i,i,s,o)}}function xo(n,t){const e=Jt(n),i=Jt(t);return hd(e,i)}function wp(n,t,e){const i=xo(t,e);if(!i){const s=Jt(t).getCode(),o=Jt(e).getCode();throw new Error(`No transform available between ${s} and ${o}`)}return i(n,void 0,n.length)}function Of(n,t){return n}function di(n,t){return Pf&&!Ih(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(Pf=!1,_p("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function Cp(n,t){return n}function Nr(n,t){return n}function Hm(n,t,e){return function(i){let s,o;if(n.canWrapX()){const l=n.getExtent(),h=Nt(l);i=i.slice(0),o=mp(i,n,h),o&&(i[0]=i[0]-o*h),i[0]=le(i[0],l[0],l[2]),i[1]=le(i[1],l[1],l[3]),s=e(i)}else s=e(i);return o&&t.canWrapX()&&(s[0]+=o*Nt(t.getExtent())),s}}function q2(){Lf(Wm),Lf(Um),$2(Um,Wm,w2,C2)}q2();new Array(6);function kn(){return[1,0,0,1,0,0]}function H2(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n}function ve(n,t){const e=t[0],i=t[1];return t[0]=n[0]*e+n[2]*i+n[4],t[1]=n[1]*e+n[3]*i+n[5],t}function vi(n,t,e,i,s,o,l,h){const c=Math.sin(o),d=Math.cos(o);return n[0]=i*d,n[1]=s*c,n[2]=-i*c,n[3]=s*d,n[4]=l*i*d-h*i*c+t,n[5]=l*s*c+h*s*d+e,n}function Sp(n,t){const e=K2(t);$t(e!==0,"Transformation matrix cannot be inverted");const i=t[0],s=t[1],o=t[2],l=t[3],h=t[4],c=t[5];return n[0]=l/e,n[1]=-s/e,n[2]=-o/e,n[3]=i/e,n[4]=(o*c-l*h)/e,n[5]=-(i*c-s*h)/e,n}function K2(n){return n[0]*n[3]-n[1]*n[2]}const Km=[1e6,1e6,1e6,1e6,2,2];function Z2(n){return"matrix("+n.map((e,i)=>Math.round(e*Km[i])/Km[i]).join(", ")+")"}function rr(n,t,e,i,s,o,l){o=o||[],l=l||2;let h=0;for(let c=t;c<e;c+=i){const d=n[c],g=n[c+1];o[h++]=s[0]*d+s[2]*g+s[4],o[h++]=s[1]*d+s[3]*g+s[5];for(let _=2;_<l;_++)o[h++]=n[c+_]}return o&&o.length!=h&&(o.length=h),o}function Rp(n,t,e,i,s,o,l){l=l||[];const h=Math.cos(s),c=Math.sin(s),d=o[0],g=o[1];let _=0;for(let y=t;y<e;y+=i){const v=n[y]-d,E=n[y+1]-g;l[_++]=d+v*h-E*c,l[_++]=g+v*c+E*h;for(let M=y+2;M<y+i;++M)l[_++]=n[M]}return l&&l.length!=_&&(l.length=_),l}function Q2(n,t,e,i,s,o,l,h){h=h||[];const c=l[0],d=l[1];let g=0;for(let _=t;_<e;_+=i){const y=n[_]-c,v=n[_+1]-d;h[g++]=c+s*y,h[g++]=d+o*v;for(let E=_+2;E<_+i;++E)h[g++]=n[E]}return h&&h.length!=g&&(h.length=g),h}function J2(n,t,e,i,s,o,l){l=l||[];let h=0;for(let c=t;c<e;c+=i){l[h++]=n[c]+s,l[h++]=n[c+1]+o;for(let d=c+2;d<c+i;++d)l[h++]=n[d]}return l&&l.length!=h&&(l.length=h),l}const Zm=kn(),tx=[NaN,NaN];class Ip extends Zn{constructor(){super(),this.extent_=Nn(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=tp((t,e,i)=>{if(!i)return this.getSimplifiedGeometry(e);const s=this.clone();return s.applyTransform(i),s.getSimplifiedGeometry(e)})}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return Mt()}closestPointXY(t,e,i,s){return Mt()}containsXY(t,e){return this.closestPointXY(t,e,tx,Number.MIN_VALUE)===0}getClosestPoint(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return Mt()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&Fo(e),this.extentRevision_=this.getRevision()}return f2(this.extent_,t)}rotate(t,e){Mt()}scale(t,e,i){Mt()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return Mt()}getType(){return Mt()}applyTransform(t){Mt()}intersectsExtent(t){return Mt()}translate(t,e){Mt()}transform(t,e){const i=Jt(t),s=i.getUnits()=="tile-pixels"?function(o,l,h){const c=i.getExtent(),d=i.getWorldExtent(),g=ge(d)/ge(c);vi(Zm,d[0],d[3],g,-g,0,0,0);const _=rr(o,0,o.length,h,Zm,l),y=xo(i,e);return y?y(_,_,h):_}:xo(i,e);return this.applyTransform(s),this}}class $r extends Ip{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(t){return Jf(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return Mt()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=Qm(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){Mt()}setLayout(t,e,i){let s;if(t)s=Qm(t);else{for(let o=0;o<i;++o){if(e.length===0){this.layout="XY",this.stride=2;return}e=e[0]}s=e.length,t=Yr(s)}this.layout=t,this.stride=s}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(t,e){const i=this.getFlatCoordinates();if(i){const s=this.getStride();Rp(i,0,i.length,s,t,e,i),this.changed()}}scale(t,e,i){e===void 0&&(e=t),i||(i=yi(this.getExtent()));const s=this.getFlatCoordinates();if(s){const o=this.getStride();Q2(s,0,s.length,o,t,e,i,s),this.changed()}}translate(t,e){const i=this.getFlatCoordinates();if(i){const s=this.getStride();J2(i,0,i.length,s,t,e,i),this.changed()}}}function Yr(n){let t;return n==2?t="XY":n==3?t="XYZ":n==4&&(t="XYZM"),t}function Qm(n){let t;return n=="XY"?t=2:n=="XYZ"||n=="XYM"?t=3:n=="XYZM"&&(t=4),t}function ex(n,t,e){const i=n.getFlatCoordinates();if(!i)return null;const s=n.getStride();return rr(i,0,i.length,s,t,e)}function Tp(n,t,e,i){let s=0;const o=n[e-i],l=n[e-i+1];let h=0,c=0;for(;t<e;t+=i){const d=n[t]-o,g=n[t+1]-l;s+=c*d-h*g,h=d,c=g}return s/2}function Pp(n,t,e,i){let s=0;for(let o=0,l=e.length;o<l;++o){const h=e[o];s+=Tp(n,t,h,i),t=h}return s}function nx(n,t,e,i){let s=0;for(let o=0,l=e.length;o<l;++o){const h=e[o];s+=Pp(n,t,h,i),t=h[h.length-1]}return s}function Jm(n,t,e,i,s,o,l){const h=n[t],c=n[t+1],d=n[e]-h,g=n[e+1]-c;let _;if(d===0&&g===0)_=t;else{const y=((s-h)*d+(o-c)*g)/(d*d+g*g);if(y>1)_=e;else if(y>0){for(let v=0;v<i;++v)l[v]=ln(n[t+v],n[e+v],y);l.length=i;return}else _=t}for(let y=0;y<i;++y)l[y]=n[_+y];l.length=i}function ud(n,t,e,i,s){let o=n[t],l=n[t+1];for(t+=i;t<e;t+=i){const h=n[t],c=n[t+1],d=Gr(o,l,h,c);d>s&&(s=d),o=h,l=c}return s}function cd(n,t,e,i,s){for(let o=0,l=e.length;o<l;++o){const h=e[o];s=ud(n,t,h,i,s),t=h}return s}function ix(n,t,e,i,s){for(let o=0,l=e.length;o<l;++o){const h=e[o];s=cd(n,t,h,i,s),t=h[h.length-1]}return s}function fd(n,t,e,i,s,o,l,h,c,d,g){if(t==e)return d;let _,y;if(s===0){if(y=Gr(l,h,n[t],n[t+1]),y<d){for(_=0;_<i;++_)c[_]=n[t+_];return c.length=i,y}return d}g=g||[NaN,NaN];let v=t+i;for(;v<e;)if(Jm(n,v-i,v,i,l,h,g),y=Gr(l,h,g[0],g[1]),y<d){for(d=y,_=0;_<i;++_)c[_]=g[_];c.length=i,v+=i}else v+=i*Math.max((Math.sqrt(y)-Math.sqrt(d))/s|0,1);if(o&&(Jm(n,e-i,t,i,l,h,g),y=Gr(l,h,g[0],g[1]),y<d)){for(d=y,_=0;_<i;++_)c[_]=g[_];c.length=i}return d}function dd(n,t,e,i,s,o,l,h,c,d,g){g=g||[NaN,NaN];for(let _=0,y=e.length;_<y;++_){const v=e[_];d=fd(n,t,v,i,s,o,l,h,c,d,g),t=v}return d}function rx(n,t,e,i,s,o,l,h,c,d,g){g=g||[NaN,NaN];for(let _=0,y=e.length;_<y;++_){const v=e[_];d=dd(n,t,v,i,s,o,l,h,c,d,g),t=v[v.length-1]}return d}function sx(n,t,e,i){for(let s=0,o=e.length;s<o;++s)n[t++]=e[s];return t}function eu(n,t,e,i){for(let s=0,o=e.length;s<o;++s){const l=e[s];for(let h=0;h<i;++h)n[t++]=l[h]}return t}function zo(n,t,e,i,s){s=s||[];let o=0;for(let l=0,h=e.length;l<h;++l){const c=eu(n,t,e[l],i);s[o++]=c,t=c}return s.length=o,s}function Lp(n,t,e,i,s){s=s||[];let o=0;for(let l=0,h=e.length;l<h;++l){const c=zo(n,t,e[l],i,s[o]);c.length===0&&(c[0]=t),s[o++]=c,t=c[c.length-1]}return s.length=o,s}function er(n,t,e,i,s){s=s!==void 0?s:[];let o=0;for(let l=t;l<e;l+=i)s[o++]=n.slice(l,l+i);return s.length=o,s}function Eo(n,t,e,i,s){s=s!==void 0?s:[];let o=0;for(let l=0,h=e.length;l<h;++l){const c=e[l];s[o++]=er(n,t,c,i,s[o]),t=c}return s.length=o,s}function Nf(n,t,e,i,s){s=s!==void 0?s:[];let o=0;for(let l=0,h=e.length;l<h;++l){const c=e[l];s[o++]=c.length===1&&c[0]===t?[]:Eo(n,t,c,i,s[o]),t=c[c.length-1]}return s.length=o,s}function nu(n,t,e,i,s,o,l){const h=(e-t)/i;if(h<3){for(;t<e;t+=i)o[l++]=n[t],o[l++]=n[t+1];return l}const c=new Array(h);c[0]=1,c[h-1]=1;const d=[t,e-i];let g=0;for(;d.length>0;){const _=d.pop(),y=d.pop();let v=0;const E=n[y],M=n[y+1],w=n[_],S=n[_+1];for(let R=y+i;R<_;R+=i){const O=n[R],P=n[R+1],k=s2(O,P,E,M,w,S);k>v&&(g=R,v=k)}v>s&&(c[(g-t)/i]=1,y+i<g&&d.push(y,g),g+i<_&&d.push(g,_))}for(let _=0;_<h;++_)c[_]&&(o[l++]=n[t+_*i],o[l++]=n[t+_*i+1]);return l}function Ap(n,t,e,i,s,o,l,h){for(let c=0,d=e.length;c<d;++c){const g=e[c];l=nu(n,t,g,i,s,o,l),h.push(l),t=g}return l}function kr(n,t){return t*Math.round(n/t)}function ax(n,t,e,i,s,o,l){if(t==e)return l;let h=kr(n[t],s),c=kr(n[t+1],s);t+=i,o[l++]=h,o[l++]=c;let d,g;do if(d=kr(n[t],s),g=kr(n[t+1],s),t+=i,t==e)return o[l++]=d,o[l++]=g,l;while(d==h&&g==c);for(;t<e;){const _=kr(n[t],s),y=kr(n[t+1],s);if(t+=i,_==d&&y==g)continue;const v=d-h,E=g-c,M=_-h,w=y-c;if(v*w==E*M&&(v<0&&M<v||v==M||v>0&&M>v)&&(E<0&&w<E||E==w||E>0&&w>E)){d=_,g=y;continue}o[l++]=d,o[l++]=g,h=d,c=g,d=_,g=y}return o[l++]=d,o[l++]=g,l}function gd(n,t,e,i,s,o,l,h){for(let c=0,d=e.length;c<d;++c){const g=e[c];l=ax(n,t,g,i,s,o,l),h.push(l),t=g}return l}function ox(n,t,e,i,s,o,l,h){for(let c=0,d=e.length;c<d;++c){const g=e[c],_=[];l=gd(n,t,g,i,s,o,l,_),h.push(_),t=g[g.length-1]}return l}class Mo extends $r{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,e!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}clone(){return new Mo(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,i,s){return s<Vr(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ud(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),fd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,i,s))}getArea(){return Tp(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return er(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const e=[];return e.length=nu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new Mo(e,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=eu(this.flatCoordinates,0,t,this.stride),this.changed()}}let Ah=class kp extends $r{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){const t=new kp(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,s){const o=this.flatCoordinates,l=Gr(t,e,o[0],o[1]);if(l<s){const h=this.stride;for(let c=0;c<h;++c)i[c]=o[c];return i.length=h,l}return s}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(t){return up(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return Qf(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=sx(this.flatCoordinates,0,t,this.stride),this.changed()}};function lx(n,t,e,i,s){return!h2(s,function(l){return!Dr(n,t,e,i,l[0],l[1])})}function Dr(n,t,e,i,s,o){let l=0,h=n[e-i],c=n[e-i+1];for(;t<e;t+=i){const d=n[t],g=n[t+1];c<=o?g>o&&(d-h)*(o-c)-(s-h)*(g-c)>0&&l++:g<=o&&(d-h)*(o-c)-(s-h)*(g-c)<0&&l--,h=d,c=g}return l!==0}function md(n,t,e,i,s,o){if(e.length===0||!Dr(n,t,e[0],i,s,o))return!1;for(let l=1,h=e.length;l<h;++l)if(Dr(n,e[l-1],e[l],i,s,o))return!1;return!0}function hx(n,t,e,i,s,o){if(e.length===0)return!1;for(let l=0,h=e.length;l<h;++l){const c=e[l];if(md(n,t,c,i,s,o))return!0;t=c[c.length-1]}return!1}function _d(n,t,e,i,s,o,l){let h,c,d,g,_,y,v;const E=s[o+1],M=[];for(let R=0,O=e.length;R<O;++R){const P=e[R];for(g=n[P-i],y=n[P-i+1],h=t;h<P;h+=i)_=n[h],v=n[h+1],(E<=y&&v<=E||y<=E&&E<=v)&&(d=(E-y)/(v-y)*(_-g)+g,M.push(d)),g=_,y=v}let w=NaN,S=-1/0;for(M.sort(zr),g=M[0],h=1,c=M.length;h<c;++h){_=M[h];const R=Math.abs(_-g);R>S&&(d=(g+_)/2,md(n,t,e,i,d,E)&&(w=d,S=R)),g=_}return isNaN(w)&&(w=s[o]),l?(l.push(w,E,S),l):[w,E,S]}function Op(n,t,e,i,s){let o=[];for(let l=0,h=e.length;l<h;++l){const c=e[l];o=_d(n,t,c,i,s,2*l,o),t=c[c.length-1]}return o}function Np(n,t,e,i,s){let o;for(t+=i;t<e;t+=i)if(o=s(n.slice(t-i,t),n.slice(t,t+i)),o)return o;return!1}function iu(n,t,e,i,s,o){return o=o??fp(Nn(),n,t,e,i),Ge(s,o)?o[0]>=s[0]&&o[2]<=s[2]||o[1]>=s[1]&&o[3]<=s[3]?!0:Np(n,t,e,i,function(l,h){return d2(s,l,h)}):!1}function ux(n,t,e,i,s){for(let o=0,l=e.length;o<l;++o){if(iu(n,t,e[o],i,s))return!0;t=e[o]}return!1}function cx(n,t,e,i,s){return!!(iu(n,t,e,i,s)||Dr(n,t,e,i,s[0],s[1])||Dr(n,t,e,i,s[0],s[3])||Dr(n,t,e,i,s[2],s[1])||Dr(n,t,e,i,s[2],s[3]))}function Dp(n,t,e,i,s){if(!cx(n,t,e[0],i,s))return!1;if(e.length===1)return!0;for(let o=1,l=e.length;o<l;++o)if(lx(n,e[o-1],e[o],i,s)&&!iu(n,e[o-1],e[o],i,s))return!1;return!0}function fx(n,t,e,i,s){for(let o=0,l=e.length;o<l;++o){const h=e[o];if(Dp(n,t,h,i,s))return!0;t=h[h.length-1]}return!1}function dx(n,t,e,i){for(;t<e-i;){for(let s=0;s<i;++s){const o=n[t+s];n[t+s]=n[e-i+s],n[e-i+s]=o}t+=i,e-=i}}function pd(n,t,e,i){let s=0,o=n[e-i],l=n[e-i+1];for(;t<e;t+=i){const h=n[t],c=n[t+1];s+=(h-o)*(c+l),o=h,l=c}return s===0?void 0:s>0}function yd(n,t,e,i,s){s=s!==void 0?s:!1;for(let o=0,l=e.length;o<l;++o){const h=e[o],c=pd(n,t,h,i);if(o===0){if(s&&c||!s&&!c)return!1}else if(s&&!c||!s&&c)return!1;t=h}return!0}function Fp(n,t,e,i,s){for(let o=0,l=e.length;o<l;++o){const h=e[o];if(!yd(n,t,h,i,s))return!1;h.length&&(t=h[h.length-1])}return!0}function kh(n,t,e,i,s){s=s!==void 0?s:!1;for(let o=0,l=e.length;o<l;++o){const h=e[o],c=pd(n,t,h,i);(o===0?s&&c||!s&&!c:s&&!c||!s&&c)&&dx(n,t,h,i),t=h}return t}function Df(n,t,e,i,s){for(let o=0,l=e.length;o<l;++o)t=kh(n,t,e[o],i,s);return t}function gx(n,t){const e=[];let i=0,s=0,o;for(let l=0,h=t.length;l<h;++l){const c=t[l],d=pd(n,i,c,2);if(o===void 0&&(o=d),d===o)e.push(t.slice(s,l+1));else{if(e.length===0)continue;e[e.length-1].push(t[s])}s=l+1,i=c}return e}class lr extends $r{constructor(t,e,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,e!==void 0&&i?(this.setFlatCoordinates(e,t),this.ends_=i):this.setCoordinates(t,e)}appendLinearRing(t){this.flatCoordinates?qn(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new lr(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,i,s){return s<Vr(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(cd(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),dd(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,i,s))}containsXY(t,e){return md(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return Pp(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e;return t!==void 0?(e=this.getOrientedFlatCoordinates().slice(),kh(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,Eo(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=yi(this.getExtent());this.flatInteriorPoint_=_d(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Ah(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new Mo(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,e=this.flatCoordinates,i=this.ends_,s=[];let o=0;for(let l=0,h=i.length;l<h;++l){const c=i[l],d=new Mo(e.slice(o,c),t);s.push(d),o=c}return s}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;yd(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=kh(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=gd(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,i),new lr(e,"XY",i)}getType(){return"Polygon"}intersectsExtent(t){return Dp(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=zo(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}function t_(n){if(na(n))throw new Error("Cannot create polygon from empty extent");const t=n[0],e=n[1],i=n[2],s=n[3],o=[t,e,t,s,i,s,i,e,t,e];return new lr(o,"XY",[o.length])}function vd(n,t,e,i){const s=Nt(t)/e[0],o=ge(t)/e[1];return i?Math.min(n,Math.max(s,o)):Math.min(n,Math.min(s,o))}function xd(n,t,e){let i=Math.min(n,t);const s=50;return i*=Math.log(1+s*Math.max(0,n/t-1))/s+1,e&&(i=Math.max(i,e),i/=Math.log(1+s*Math.max(0,e/n-1))/s+1),le(i,e/2,t*2)}function mx(n,t,e,i){return t=t!==void 0?t:!0,function(s,o,l,h){if(s!==void 0){const c=n[0],d=n[n.length-1],g=e?vd(c,e,l,i):c;if(h)return t?xd(s,g,d):le(s,d,g);const _=Math.min(g,s),y=Math.floor(Kf(n,_,o));return n[y]>g&&y<n.length-1?n[y+1]:n[y]}}}function _x(n,t,e,i,s,o){return i=i!==void 0?i:!0,e=e!==void 0?e:0,function(l,h,c,d){if(l!==void 0){const g=s?vd(t,s,c,o):t;if(d)return i?xd(l,g,e):le(l,e,g);const _=1e-9,y=Math.ceil(Math.log(t/g)/Math.log(n)-_),v=-h*(.5-_)+.5,E=Math.min(g,l),M=Math.floor(Math.log(t/E)/Math.log(n)+v),w=Math.max(y,M),S=t/Math.pow(n,w);return le(S,e,g)}}}function e_(n,t,e,i,s){return e=e!==void 0?e:!0,function(o,l,h,c){if(o!==void 0){const d=i?vd(n,i,h,s):n;return!e||!c?le(o,t,d):xd(o,d,t)}}}function Ed(n){if(n!==void 0)return 0}function n_(n){if(n!==void 0)return n}function px(n){const t=2*Math.PI/n;return function(e,i){if(i)return e;if(e!==void 0)return e=Math.floor(e/t+.5)*t,e}}function yx(n){const t=ir(5);return function(e,i){return i||e===void 0?e:Math.abs(e)<=t?0:e}}const vx=256,rf=0;class Un extends Zn{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=ld(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&X2(),t.center&&(t.center=di(t.center,this.projection_)),t.extent&&(t.extent=Nr(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const e=Object.assign({},t);for(const h in Ln)delete e[h];this.setProperties(e,!0);const i=Ex(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=i.minZoom;const s=xx(t),o=i.constraint,l=Mx(t);this.constraints_={center:s,resolution:o,rotation:l},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_;this.padding_=t;const i=this.getCenterInternal();if(i){const s=t||[0,0,0,0];e=e||[0,0,0,0];const o=this.getResolution(),l=o/2*(s[3]-e[3]+e[1]-s[1]),h=o/2*(s[0]-e[0]+e[2]-s[2]);this.setCenterInternal([i[0]+l,i[1]-h])}}getUpdatedOptions_(t){const e=this.getProperties();return e.resolution!==void 0?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const e=new Array(arguments.length);for(let i=0;i<e.length;++i){let s=arguments[i];s.center&&(s=Object.assign({},s),s.center=di(s.center,this.getProjection())),s.anchor&&(s=Object.assign({},s),s.anchor=di(s.anchor,this.getProjection())),e[i]=s}this.animateInternal.apply(this,e)}animateInternal(t){let e=arguments.length,i;e>1&&typeof arguments[e-1]=="function"&&(i=arguments[e-1],--e);let s=0;for(;s<e&&!this.isDef();++s){const g=arguments[s];g.center&&this.setCenterInternal(g.center),g.zoom!==void 0?this.setZoom(g.zoom):g.resolution&&this.setResolution(g.resolution),g.rotation!==void 0&&this.setRotation(g.rotation)}if(s===e){i&&hh(i,!0);return}let o=Date.now(),l=this.targetCenter_.slice(),h=this.targetResolution_,c=this.targetRotation_;const d=[];for(;s<e;++s){const g=arguments[s],_={start:o,complete:!1,anchor:g.anchor,duration:g.duration!==void 0?g.duration:1e3,easing:g.easing||y2,callback:i};if(g.center&&(_.sourceCenter=l,_.targetCenter=g.center.slice(),l=_.targetCenter),g.zoom!==void 0?(_.sourceResolution=h,_.targetResolution=this.getResolutionForZoom(g.zoom),h=_.targetResolution):g.resolution&&(_.sourceResolution=h,_.targetResolution=g.resolution,h=_.targetResolution),g.rotation!==void 0){_.sourceRotation=c;const y=lo(g.rotation-c+Math.PI,2*Math.PI)-Math.PI;_.targetRotation=c+y,c=_.targetRotation}wx(_)?_.complete=!0:o+=_.duration,d.push(_)}this.animations_.push(d),this.setHint(de.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[de.ANIMATING]>0}getInteracting(){return this.hints_[de.INTERACTING]>0}cancelAnimations(){this.setHint(de.ANIMATING,-this.hints_[de.ANIMATING]);let t;for(let e=0,i=this.animations_.length;e<i;++e){const s=this.animations_[e];if(s[0].callback&&hh(s[0].callback,!1),!t)for(let o=0,l=s.length;o<l;++o){const h=s[o];if(!h.complete){t=h.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let e=!1;for(let i=this.animations_.length-1;i>=0;--i){const s=this.animations_[i];let o=!0;for(let l=0,h=s.length;l<h;++l){const c=s[l];if(c.complete)continue;const d=t-c.start;let g=c.duration>0?d/c.duration:1;g>=1?(c.complete=!0,g=1):o=!1;const _=c.easing(g);if(c.sourceCenter){const y=c.sourceCenter[0],v=c.sourceCenter[1],E=c.targetCenter[0],M=c.targetCenter[1];this.nextCenter_=c.targetCenter;const w=y+_*(E-y),S=v+_*(M-v);this.targetCenter_=[w,S]}if(c.sourceResolution&&c.targetResolution){const y=_===1?c.targetResolution:c.sourceResolution+_*(c.targetResolution-c.sourceResolution);if(c.anchor){const v=this.getViewportSize_(this.getRotation()),E=this.constraints_.resolution(y,0,v,!0);this.targetCenter_=this.calculateCenterZoom(E,c.anchor)}this.nextResolution_=c.targetResolution,this.targetResolution_=y,this.applyTargetState_(!0)}if(c.sourceRotation!==void 0&&c.targetRotation!==void 0){const y=_===1?lo(c.targetRotation+Math.PI,2*Math.PI)-Math.PI:c.sourceRotation+_*(c.targetRotation-c.sourceRotation);if(c.anchor){const v=this.constraints_.rotation(y,!0);this.targetCenter_=this.calculateCenterRotate(v,c.anchor)}this.nextRotation_=c.targetRotation,this.targetRotation_=y}if(this.applyTargetState_(!0),e=!0,!c.complete)break}if(o){this.animations_[i]=null,this.setHint(de.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const l=s[0].callback;l&&hh(l,!0)}}this.animations_=this.animations_.filter(Boolean),e&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let i;const s=this.getCenterInternal();return s!==void 0&&(i=[s[0]-e[0],s[1]-e[1]],rd(i,t-this.getRotation()),m2(i,e)),i}calculateCenterZoom(t,e){let i;const s=this.getCenterInternal(),o=this.getResolution();if(s!==void 0&&o!==void 0){const l=e[0]-t*(e[0]-s[0])/o,h=e[1]-t*(e[1]-s[1])/o;i=[l,h]}return i}getViewportSize_(t){const e=this.viewportSize_;if(t){const i=e[0],s=e[1];return[Math.abs(i*Math.cos(t))+Math.abs(s*Math.sin(t)),Math.abs(i*Math.sin(t))+Math.abs(s*Math.cos(t))]}return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t&&Of(t,this.getProjection())}getCenterInternal(){return this.get(Ln.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){const e=this.calculateExtentInternal(t);return Cp(e,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const e=this.getCenterInternal();$t(e,"The view center is not defined");const i=this.getResolution();$t(i!==void 0,"The view resolution is not defined");const s=this.getRotation();return $t(s!==void 0,"The view rotation is not defined"),Rh(e,i,s,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(Ln.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal(Nr(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_();const i=Nt(t)/e[0],s=ge(t)/e[1];return Math.max(i,s)}getResolutionForValueFunction(t){t=t||2;const e=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,s=Math.log(e/i)/Math.log(t);return function(o){return e/Math.pow(t,o*s)}}getRotation(){return this.get(Ln.ROTATION)}getValueForResolutionFunction(t){const e=Math.log(t||2),i=this.getConstrainedResolution(this.maxResolution_),s=this.minResolution_,o=Math.log(i/s)/e;return function(l){return Math.log(i/l)/e/o}}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t);const i=this.padding_;return i&&(e=[e[0]-i[1]-i[3],e[1]-i[0]-i[2]]),e}getState(){const t=this.getProjection(),e=this.getResolution(),i=this.getRotation();let s=this.getCenterInternal();const o=this.padding_;if(o){const l=this.getViewportSizeMinusPadding_();s=sf(s,this.getViewportSize_(),[l[0]/2+o[3],l[1]/2+o[0]],e,i)}return{center:s.slice(0),projection:t!==void 0?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t;const e=this.getResolution();return e!==void 0&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e=this.minZoom_||0,i,s;if(this.resolutions_){const o=Kf(this.resolutions_,t,1);e=o,i=this.resolutions_[o],o==this.resolutions_.length-1?s=2:s=i/this.resolutions_[o+1]}else i=this.maxResolution_,s=this.zoomFactor_;return e+Math.log(i/t)/Math.log(s)}getResolutionForZoom(t){var e;if((e=this.resolutions_)!=null&&e.length){if(this.resolutions_.length===1)return this.resolutions_[0];const i=le(Math.floor(t),0,this.resolutions_.length-2),s=this.resolutions_[i]/this.resolutions_[i+1];return this.resolutions_[i]/Math.pow(s,le(t-i,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let i;if($t(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(t)){$t(!na(t),"Cannot fit empty extent provided as `geometry`");const s=Nr(t,this.getProjection());i=t_(s)}else if(t.getType()==="Circle"){const s=Nr(t.getExtent(),this.getProjection());i=t_(s),i.rotate(this.getRotation(),yi(s))}else i=t;this.fitInternal(i,e)}rotatedExtentForGeometry(t){const e=this.getRotation(),i=Math.cos(e),s=Math.sin(-e),o=t.getFlatCoordinates(),l=t.getStride();let h=1/0,c=1/0,d=-1/0,g=-1/0;for(let _=0,y=o.length;_<y;_+=l){const v=o[_]*i-o[_+1]*s,E=o[_]*s+o[_+1]*i;h=Math.min(h,v),c=Math.min(c,E),d=Math.max(d,v),g=Math.max(g,E)}return[h,c,d,g]}fitInternal(t,e){e=e||{};let i=e.size;i||(i=this.getViewportSizeMinusPadding_());const s=e.padding!==void 0?e.padding:[0,0,0,0],o=e.nearest!==void 0?e.nearest:!1;let l;e.minResolution!==void 0?l=e.minResolution:e.maxZoom!==void 0?l=this.getResolutionForZoom(e.maxZoom):l=0;const h=this.rotatedExtentForGeometry(t);let c=this.getResolutionForExtentInternal(h,[i[0]-s[1]-s[3],i[1]-s[0]-s[2]]);c=isNaN(c)?l:Math.max(c,l),c=this.getConstrainedResolution(c,o?0:1);const d=this.getRotation(),g=Math.sin(d),_=Math.cos(d),y=yi(h);y[0]+=(s[1]-s[3])/2*c,y[1]+=(s[0]-s[2])/2*c;const v=y[0]*_-y[1]*g,E=y[1]*_+y[0]*g,M=this.getConstrainedCenter([v,E],c),w=e.callback?e.callback:$s;e.duration!==void 0?this.animateInternal({resolution:c,center:M,duration:e.duration,easing:e.easing},w):(this.targetResolution_=c,this.targetCenter_=M,this.applyTargetState_(!1,!0),hh(w,!0))}centerOn(t,e,i){this.centerOnInternal(di(t,this.getProjection()),e,i)}centerOnInternal(t,e,i){this.setCenterInternal(sf(t,e,i,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,i,s){let o;const l=this.padding_;if(l&&t){const h=this.getViewportSizeMinusPadding_(-i),c=sf(t,s,[h[0]/2+l[3],h[1]/2+l[0]],e,i);o=[t[0]-c[0],t[1]-c[1]]}return o}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(t){const e=Of(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){const e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&&di(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){const i=this.getAnimating()||this.getInteracting(),s=this.getViewportSize_(this.getRotation()),o=this.constraints_.resolution(this.targetResolution_*t,0,s,i);e&&(this.targetCenter_=this.calculateCenterZoom(o,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=di(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){const i=this.getAnimating()||this.getInteracting(),s=this.constraints_.rotation(this.targetRotation_+t,i);e&&(this.targetCenter_=this.calculateCenterRotate(s,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t&&di(t,this.getProjection()))}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){const i=this.getAnimating()||this.getInteracting()||e,s=this.constraints_.rotation(this.targetRotation_,i),o=this.getViewportSize_(s),l=this.constraints_.resolution(this.targetResolution_,0,o,i),h=this.constraints_.center(this.targetCenter_,l,o,i,this.calculateCenterShift(this.targetCenter_,l,s,o));this.get(Ln.ROTATION)!==s&&this.set(Ln.ROTATION,s),this.get(Ln.RESOLUTION)!==l&&(this.set(Ln.RESOLUTION,l),this.set("zoom",this.getZoom(),!0)),(!h||!this.get(Ln.CENTER)||!Ih(this.get(Ln.CENTER),h))&&this.set(Ln.CENTER,h),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,i){t=t!==void 0?t:200;const s=e||0,o=this.constraints_.rotation(this.targetRotation_),l=this.getViewportSize_(o),h=this.constraints_.resolution(this.targetResolution_,s,l),c=this.constraints_.center(this.targetCenter_,h,l,!1,this.calculateCenterShift(this.targetCenter_,h,o,l));if(t===0&&!this.cancelAnchor_){this.targetResolution_=h,this.targetRotation_=o,this.targetCenter_=c,this.applyTargetState_();return}i=i||(t===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==h||this.getRotation()!==o||!this.getCenterInternal()||!Ih(this.getCenterInternal(),c))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:o,center:c,resolution:h,duration:t,easing:ia,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(de.INTERACTING,1)}endInteraction(t,e,i){i=i&&di(i,this.getProjection()),this.endInteractionInternal(t,e,i)}endInteractionInternal(t,e,i){this.getInteracting()&&(this.setHint(de.INTERACTING,-1),this.resolveConstraints(t,e,i))}getConstrainedCenter(t,e){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),i)}getConstrainedZoom(t,e){const i=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(i,e))}getConstrainedResolution(t,e){e=e||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,i)}}function hh(n,t){setTimeout(function(){n(t)},0)}function xx(n){if(n.extent!==void 0){const e=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return zm(n.extent,n.constrainOnlyCenter,e)}const t=ld(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&t.isGlobal()){const e=t.getExtent().slice();return e[0]=-1/0,e[2]=1/0,zm(e,!1,!1)}return o2}function Ex(n){let t,e,i,l=n.minZoom!==void 0?n.minZoom:rf,h=n.maxZoom!==void 0?n.maxZoom:28;const c=n.zoomFactor!==void 0?n.zoomFactor:2,d=n.multiWorld!==void 0?n.multiWorld:!1,g=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,_=n.showFullExtent!==void 0?n.showFullExtent:!1,y=ld(n.projection,"EPSG:3857"),v=y.getExtent();let E=n.constrainOnlyCenter,M=n.extent;if(!d&&!M&&y.isGlobal()&&(E=!1,M=v),n.resolutions!==void 0){const w=n.resolutions;e=w[l],i=w[h]!==void 0?w[h]:w[w.length-1],n.constrainResolution?t=mx(w,g,!E&&M,_):t=e_(e,i,g,!E&&M,_)}else{const S=(v?Math.max(Nt(v),ge(v)):360*pp.degrees/y.getMetersPerUnit())/vx/Math.pow(2,rf),R=S/Math.pow(2,28-rf);e=n.maxResolution,e!==void 0?l=0:e=S/Math.pow(c,l),i=n.minResolution,i===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?i=e/Math.pow(c,h):i=S/Math.pow(c,h):i=R),h=l+Math.floor(Math.log(e/i)/Math.log(c)),i=e/Math.pow(c,h-l),n.constrainResolution?t=_x(c,e,i,g,!E&&M,_):t=e_(e,i,g,!E&&M,_)}return{constraint:t,maxResolution:e,minResolution:i,minZoom:l,zoomFactor:c}}function Mx(n){if(n.enableRotation!==void 0?n.enableRotation:!0){const e=n.constrainRotation;return e===void 0||e===!0?yx():e===!1?n_:typeof e=="number"?px(e):n_}return Ed}function wx(n){return!(n.sourceCenter&&n.targetCenter&&!Ih(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function sf(n,t,e,i,s){const o=Math.cos(-s);let l=Math.sin(-s),h=n[0]*o-n[1]*l,c=n[1]*o+n[0]*l;h+=(t[0]/2-e[0])*i,c+=(e[1]-t[1]/2)*i,l=-l;const d=h*o-c*l,g=c*o+h*l;return[d,g]}const uh="ol-hidden",ru="ol-unselectable",Md="ol-control",i_="ol-collapsed",Cx=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),r_=["style","variant","weight","size","lineHeight","family"],bp=function(n){const t=n.match(Cx);if(!t)return null;const e={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,s=r_.length;i<s;++i){const o=t[i+1];o!==void 0&&(e[r_[i]]=o)}return e.families=e.family.split(/,\s?/),e};function Me(n,t,e,i){let s;return e&&e.length?s=e.shift():rp?s=new OffscreenCanvas(n||300,t||300):s=document.createElement("canvas"),n&&(s.width=n),t&&(s.height=t),s.getContext("2d",i)}let af;function Oh(){return af||(af=Me(1,1)),af}function wd(n){const t=n.canvas;t.width=1,t.height=1,n.clearRect(0,0,1,1)}function s_(n,t){const e=t.parentNode;e&&e.replaceChild(n,t)}function Sx(n){for(;n.lastChild;)n.lastChild.remove()}function Rx(n,t){const e=n.childNodes;for(let i=0;;++i){const s=e[i],o=t[i];if(!s&&!o)break;if(s!==o){if(!s){n.appendChild(o);continue}if(!o){n.removeChild(s),--i;continue}n.insertBefore(o,s)}}}class Cd extends Zn{constructor(t){super();const e=t.element;e&&!t.target&&!e.style.pointerEvents&&(e.style.pointerEvents="auto"),this.element=e||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){var t;(t=this.element)==null||t.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(t){var e;this.map_&&((e=this.element)==null||e.remove());for(let i=0,s=this.listenerKeys.length;i<s;++i)Kt(this.listenerKeys[i]);if(this.listenerKeys.length=0,this.map_=t,t){const i=this.target_??t.getOverlayContainerStopEvent();this.element&&i.appendChild(this.element),this.render!==$s&&this.listenerKeys.push(At(t,Qi.POSTRENDER,this.render,this)),t.render()}}render(t){}setTarget(t){this.target_=typeof t=="string"?document.getElementById(t):t}}class Ix extends Cd{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=t.collapsed!==void 0?t.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=t.collapsible!==void 0,this.collapsible_=t.collapsible!==void 0?t.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=t.attributions;const e=t.className!==void 0?t.className:"ol-attribution",i=t.tipLabel!==void 0?t.tipLabel:"Attributions",s=t.expandClassName!==void 0?t.expandClassName:e+"-expand",o=t.collapseLabel!==void 0?t.collapseLabel:"›",l=t.collapseClassName!==void 0?t.collapseClassName:e+"-collapse";typeof o=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=o,this.collapseLabel_.className=l):this.collapseLabel_=o;const h=t.label!==void 0?t.label:"i";typeof h=="string"?(this.label_=document.createElement("span"),this.label_.textContent=h,this.label_.className=s):this.label_=h;const c=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(c),this.toggleButton_.addEventListener(Ct.CLICK,this.handleClick_.bind(this),!1);const d=e+" "+ru+" "+Md+(this.collapsed_&&this.collapsible_?" "+i_:"")+(this.collapsible_?"":" ol-uncollapsible"),g=this.element;g.className=d,g.appendChild(this.toggleButton_),g.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const e=this.getMap().getAllLayers(),i=new Set(e.flatMap(s=>s.getAttributions(t)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(s=>i.add(s)):i.add(this.attributions_)),!this.overrideCollapsible_){const s=!e.some(o=>{var l;return((l=o.getSource())==null?void 0:l.getAttributionsCollapsible())===!1});this.setCollapsible(s)}return Array.from(i)}async updateElement_(t){if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const e=await Promise.all(this.collectSourceAttributions_(t).map(s=>ep(()=>s))),i=e.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!cr(e,this.renderedAttributions_)){Sx(this.ulElement_);for(let s=0,o=e.length;s<o;++s){const l=document.createElement("li");l.innerHTML=e[s],this.ulElement_.appendChild(l)}this.renderedAttributions_=e}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(i_),this.collapsed_?s_(this.collapseLabel_,this.label_):s_(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,!(!this.collapsible_||this.collapsed_===t)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}}class Tx extends Cd{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const e=t.className!==void 0?t.className:"ol-rotate",i=t.label!==void 0?t.label:"⇧",s=t.compassClassName!==void 0?t.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=s,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(s));const o=t.tipLabel?t.tipLabel:"Reset rotation",l=document.createElement("button");l.className=e+"-reset",l.setAttribute("type","button"),l.title=o,l.appendChild(this.label_),l.addEventListener(Ct.CLICK,this.handleClick_.bind(this),!1);const h=e+" "+ru+" "+Md,c=this.element;c.className=h,c.appendChild(l),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=t.duration!==void 0?t.duration:250,this.autoHide_=t.autoHide!==void 0?t.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(uh)}handleClick_(t){t.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const e=this.getMap().getView();if(!e)return;const i=e.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?e.animate({rotation:0,duration:this.duration_,easing:ia}):e.setRotation(0))}render(t){const e=t.frameState;if(!e)return;const i=e.viewState.rotation;if(i!=this.rotation_){const s="rotate("+i+"rad)";if(this.autoHide_){const o=this.element.classList.contains(uh);!o&&i===0?this.element.classList.add(uh):o&&i!==0&&this.element.classList.remove(uh)}this.label_.style.transform=s}this.rotation_=i}}class Px extends Cd{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const e=t.className!==void 0?t.className:"ol-zoom",i=t.delta!==void 0?t.delta:1,s=t.zoomInClassName!==void 0?t.zoomInClassName:e+"-in",o=t.zoomOutClassName!==void 0?t.zoomOutClassName:e+"-out",l=t.zoomInLabel!==void 0?t.zoomInLabel:"+",h=t.zoomOutLabel!==void 0?t.zoomOutLabel:"–",c=t.zoomInTipLabel!==void 0?t.zoomInTipLabel:"Zoom in",d=t.zoomOutTipLabel!==void 0?t.zoomOutTipLabel:"Zoom out",g=document.createElement("button");g.className=s,g.setAttribute("type","button"),g.title=c,g.appendChild(typeof l=="string"?document.createTextNode(l):l),g.addEventListener(Ct.CLICK,this.handleClick_.bind(this,i),!1);const _=document.createElement("button");_.className=o,_.setAttribute("type","button"),_.title=d,_.appendChild(typeof h=="string"?document.createTextNode(h):h),_.addEventListener(Ct.CLICK,this.handleClick_.bind(this,-i),!1);const y=e+" "+ru+" "+Md,v=this.element;v.className=y,v.appendChild(g),v.appendChild(_),this.duration_=t.duration!==void 0?t.duration:250}handleClick_(t,e){e.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const i=this.getMap().getView();if(!i)return;const s=i.getZoom();if(s!==void 0){const o=i.getConstrainedZoom(s+t);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:o,duration:this.duration_,easing:ia})):i.setZoom(o)}}}function Lx(n){n=n||{};const t=new Vn;return(n.zoom!==void 0?n.zoom:!0)&&t.push(new Px(n.zoomOptions)),(n.rotate!==void 0?n.rotate:!0)&&t.push(new Tx(n.rotateOptions)),(n.attribution!==void 0?n.attribution:!0)&&t.push(new Ix(n.attributionOptions)),t}class Ax{constructor(t,e,i){this.decay_=t,this.minVelocity_=e,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,e){this.points_.push(t,e,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;let i=e-3;for(;i>0&&this.points_[i+2]>t;)i-=3;const s=this.points_[e+2]-this.points_[i+2];if(s<1e3/60)return!1;const o=this.points_[e]-this.points_[i],l=this.points_[e+1]-this.points_[i+1];return this.angle_=Math.atan2(l,o),this.initialVelocity_=Math.sqrt(o*o+l*l)/s,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const a_={ACTIVE:"active"};class Go extends Zn{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(a_.ACTIVE)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(a_.ACTIVE,t)}setMap(t){this.map_=t}}function kx(n,t,e){const i=n.getCenterInternal();if(i){const s=[i[0]+t[0],i[1]+t[1]];n.animateInternal({duration:e!==void 0?e:250,easing:v2,center:n.getConstrainedCenter(s)})}}function Sd(n,t,e,i){const s=n.getZoom();if(s===void 0)return;const o=n.getConstrainedZoom(s+t),l=n.getResolutionForZoom(o);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:l,anchor:e,duration:i!==void 0?i:250,easing:ia})}class Ox extends Go{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:250}handleEvent(t){let e=!1;if(t.type==Qt.DBLCLICK){const i=t.originalEvent,s=t.map,o=t.coordinate,l=i.shiftKey?-this.delta_:this.delta_,h=s.getView();Sd(h,l,o,this.duration_),i.preventDefault(),e=!0}return!e}}function Ff(n){const t=arguments;return function(e){let i=!0;for(let s=0,o=t.length;s<o&&(i=i&&t[s](e),!!i);++s);return i}}const Nx=function(n){const t=n.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},Dx=function(n){const t=n.map.getTargetElement(),e=t.getRootNode(),i=n.map.getOwnerDocument().activeElement;return e instanceof ShadowRoot?e.host.contains(i):t.contains(i)},zp=function(n){const t=n.map.getTargetElement(),e=t.getRootNode();return(e instanceof ShadowRoot?e.host:t).hasAttribute("tabindex")?Dx(n):!0},Fx=po,Gp=function(n){const t=n.originalEvent;return t.button==0&&!(t2&&np&&t.ctrlKey)},jp=function(n){const t=n.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},bx=function(n){const t=n.originalEvent;return np?t.metaKey:t.ctrlKey},zx=function(n){const t=n.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},Wp=function(n){const t=n.originalEvent,e=t.target.tagName;return e!=="INPUT"&&e!=="SELECT"&&e!=="TEXTAREA"&&!t.target.isContentEditable},of=function(n){const t=n.originalEvent;return $t(t!==void 0,"mapBrowserEvent must originate from a pointer event"),t.pointerType=="mouse"},Gx=function(n){const t=n.originalEvent;return $t(t!==void 0,"mapBrowserEvent must originate from a pointer event"),t.isPrimary&&t.button===0};class jo extends Go{constructor(t){t=t||{},super(t),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==Qt.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==Qt.POINTERUP){const i=this.handleUpEvent(t);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(t.type==Qt.POINTERDOWN){const i=this.handleDownEvent(t);this.handlingDownUpSequence=i,e=this.stopDown(i)}else t.type==Qt.POINTERMOVE&&this.handleMoveEvent(t);return!e}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}}function Rd(n){const t=n.length;let e=0,i=0;for(let s=0;s<t;s++)e+=n[s].clientX,i+=n[s].clientY;return{clientX:e/t,clientY:i/t}}class jx extends jo{constructor(t){super({stopDown:Hh}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const e=t.condition?t.condition:Ff(jp,Gx);this.condition_=t.onFocusOnly?Ff(zp,e):e,this.noKinetic_=!1}handleDragEvent(t){const e=t.map;this.panning_||(this.panning_=!0,e.getView().beginInteraction());const i=this.targetPointers,s=e.getEventPixel(Rd(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(s[0],s[1]),this.lastCentroid){const o=[this.lastCentroid[0]-s[0],s[1]-this.lastCentroid[1]],h=t.map.getView();_2(o,h.getResolution()),rd(o,h.getRotation()),h.adjustCenterInternal(o)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=s,this.lastPointersCount_=i.length,t.originalEvent.preventDefault()}handleUpEvent(t){const e=t.map,i=e.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const s=this.kinetic_.getDistance(),o=this.kinetic_.getAngle(),l=i.getCenterInternal(),h=e.getPixelFromCoordinateInternal(l),c=e.getCoordinateFromPixelInternal([h[0]-s*Math.cos(o),h[1]-s*Math.sin(o)]);i.animateInternal({center:i.getConstrainedCenter(c),duration:500,easing:ia})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const i=t.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class Wx extends jo{constructor(t){t=t||{},super({stopDown:Hh}),this.condition_=t.condition?t.condition:Nx,this.lastAngle_=void 0,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){if(!of(t))return;const e=t.map,i=e.getView();if(i.getConstraints().rotation===Ed)return;const s=e.getSize(),o=t.pixel,l=Math.atan2(s[1]/2-o[1],o[0]-s[0]/2);if(this.lastAngle_!==void 0){const h=l-this.lastAngle_;i.adjustRotationInternal(-h)}this.lastAngle_=l}handleUpEvent(t){return of(t)?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){return of(t)&&Gp(t)&&this.condition_(t)?(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class Bx extends Hf{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,e=this.endPixel_,i="px",s=this.element_.style;s.left=Math.min(t[0],e[0])+i,s.top=Math.min(t[1],e[1])+i,s.width=Math.abs(e[0]-t[0])+i,s.height=Math.abs(e[1]-t[1])+i}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const t=this.startPixel_,e=this.endPixel_,s=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);s[4]=s[0].slice(),this.geometry_?this.geometry_.setCoordinates([s]):this.geometry_=new lr([s])}getGeometry(){return this.geometry_}}const Rs={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class qa extends xi{constructor(t,e,i){super(t),this.coordinate=e,this.mapBrowserEvent=i}}class Ux extends jo{constructor(t){super(),this.on,this.once,this.un,t=t??{},this.box_=new Bx(t.className||"ol-dragbox"),this.minArea_=t.minArea??64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition??Gp,this.boxEndCondition_=t.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(t,e,i){const s=i[0]-e[0],o=i[1]-e[1];return s*s+o*o>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.startPixel_&&(this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new qa(Rs.BOXDRAG,t.coordinate,t)))}handleUpEvent(t){if(!this.startPixel_)return!1;const e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new qa(e?Rs.BOXEND:Rs.BOXCANCEL,t.coordinate,t)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(t){return this.condition_(t)?(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new qa(Rs.BOXSTART,t.coordinate,t)),!0):!1}onBoxEnd(t){}setActive(t){t||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new qa(Rs.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(t)}setMap(t){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new qa(Rs.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(t)}}class Xx extends Ux{constructor(t){t=t||{};const e=t.condition?t.condition:zx;super({condition:e,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=t.duration!==void 0?t.duration:200,this.out_=t.out!==void 0?t.out:!1}onBoxEnd(t){const i=this.getMap().getView();let s=this.getGeometry();if(this.out_){const o=i.rotatedExtentForGeometry(s),l=i.getResolutionForExtentInternal(o),h=i.getResolution()/l;s=s.clone(),s.scale(h*h)}i.fitInternal(s,{duration:this.duration_,easing:ia})}}const Ar={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class Vx extends Go{constructor(t){super(),t=t||{},this.defaultCondition_=function(e){return jp(e)&&Wp(e)},this.condition_=t.condition!==void 0?t.condition:this.defaultCondition_,this.duration_=t.duration!==void 0?t.duration:100,this.pixelDelta_=t.pixelDelta!==void 0?t.pixelDelta:128}handleEvent(t){let e=!1;if(t.type==Ct.KEYDOWN){const i=t.originalEvent,s=i.key;if(this.condition_(t)&&(s==Ar.DOWN||s==Ar.LEFT||s==Ar.RIGHT||s==Ar.UP)){const l=t.map.getView(),h=l.getResolution()*this.pixelDelta_;let c=0,d=0;s==Ar.DOWN?d=-h:s==Ar.LEFT?c=-h:s==Ar.RIGHT?c=h:d=h;const g=[c,d];rd(g,l.getRotation()),kx(l,g,this.duration_),i.preventDefault(),e=!0}}return!e}}class $x extends Go{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:function(e){return!bx(e)&&Wp(e)},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:100}handleEvent(t){let e=!1;if(t.type==Ct.KEYDOWN||t.type==Ct.KEYPRESS){const i=t.originalEvent,s=i.key;if(this.condition_(t)&&(s==="+"||s==="-")){const o=t.map,l=s==="+"?this.delta_:-this.delta_,h=o.getView();Sd(h,l,void 0,this.duration_),i.preventDefault(),e=!0}}return!e}}class Yx extends Go{constructor(t){t=t||{},super(t),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=t.maxDelta!==void 0?t.maxDelta:1,this.duration_=t.duration!==void 0?t.duration:250,this.timeout_=t.timeout!==void 0?t.timeout:80,this.useAnchor_=t.useAnchor!==void 0?t.useAnchor:!0,this.constrainResolution_=t.constrainResolution!==void 0?t.constrainResolution:!1;const e=t.condition?t.condition:Fx;this.condition_=t.onFocusOnly?Ff(zp,e):e,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();if(!t)return;t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?t.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(t){if(!this.condition_(t)||t.type!==Ct.WHEEL)return!0;const i=t.map,s=t.originalEvent;s.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.pixel);let o;if(t.type==Ct.WHEEL&&(o=s.deltaY,Qv&&s.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(o/=ip),s.deltaMode===WheelEvent.DOM_DELTA_LINE&&(o*=40)),o===0)return!1;this.lastDelta_=o;const l=Date.now();this.startTime_===void 0&&(this.startTime_=l),(!this.mode_||l-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(o)<4?"trackpad":"wheel");const h=i.getView();if(this.mode_==="trackpad"&&!(h.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(h.getAnimating()&&h.cancelAnimations(),h.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),h.adjustZoom(-o/this.deltaPerZoom_,this.lastAnchor_?i.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=l,!1;this.totalDelta_+=o;const c=Math.max(this.timeout_-(l-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),c),!1}handleWheelZoom_(t){const e=t.getView();e.getAnimating()&&e.cancelAnimations();let i=-le(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),Sd(e,i,this.lastAnchor_?t.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}}class qx extends jo{constructor(t){t=t||{};const e=t;e.stopDown||(e.stopDown=Hh),super(e),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=t.threshold!==void 0?t.threshold:.3,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){let e=0;const i=this.targetPointers[0],s=this.targetPointers[1],o=Math.atan2(s.clientY-i.clientY,s.clientX-i.clientX);if(this.lastAngle_!==void 0){const c=o-this.lastAngle_;this.rotationDelta_+=c,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=c}this.lastAngle_=o;const l=t.map,h=l.getView();h.getConstraints().rotation!==Ed&&(this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(Rd(this.targetPointers))),this.rotating_&&(l.render(),h.adjustRotationInternal(e,this.anchor_)))}handleUpEvent(t){return this.targetPointers.length<2?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}class Hx extends jo{constructor(t){t=t||{};const e=t;e.stopDown||(e.stopDown=Hh),super(e),this.anchor_=null,this.duration_=t.duration!==void 0?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let e=1;const i=this.targetPointers[0],s=this.targetPointers[1],o=i.clientX-s.clientX,l=i.clientY-s.clientY,h=Math.sqrt(o*o+l*l);this.lastDistance_!==void 0&&(e=this.lastDistance_/h),this.lastDistance_=h;const c=t.map,d=c.getView();e!=1&&(this.lastScaleDelta_=e),this.anchor_=c.getCoordinateFromPixelInternal(c.getEventPixel(Rd(this.targetPointers))),c.render(),d.adjustResolutionInternal(e,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const i=t.map.getView(),s=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,s),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}function Kx(n){n=n||{};const t=new Vn,e=new Ax(-.005,.05,100);return(n.altShiftDragRotate!==void 0?n.altShiftDragRotate:!0)&&t.push(new Wx),(n.doubleClickZoom!==void 0?n.doubleClickZoom:!0)&&t.push(new Ox({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan!==void 0?n.dragPan:!0)&&t.push(new jx({onFocusOnly:n.onFocusOnly,kinetic:e})),(n.pinchRotate!==void 0?n.pinchRotate:!0)&&t.push(new qx),(n.pinchZoom!==void 0?n.pinchZoom:!0)&&t.push(new Hx({duration:n.zoomDuration})),(n.keyboard!==void 0?n.keyboard:!0)&&(t.push(new Vx),t.push(new $x({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom!==void 0?n.mouseWheelZoom:!0)&&t.push(new Yx({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom!==void 0?n.shiftDragZoom:!0)&&t.push(new Xx({duration:n.zoomDuration})),t}const Gt={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class Bp extends Zn{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const e=Object.assign({},t);typeof t.properties=="object"&&(delete e.properties,Object.assign(e,t.properties)),e[Gt.OPACITY]=t.opacity!==void 0?t.opacity:1,$t(typeof e[Gt.OPACITY]=="number","Layer opacity must be a number"),e[Gt.VISIBLE]=t.visible!==void 0?t.visible:!0,e[Gt.Z_INDEX]=t.zIndex,e[Gt.MAX_RESOLUTION]=t.maxResolution!==void 0?t.maxResolution:1/0,e[Gt.MIN_RESOLUTION]=t.minResolution!==void 0?t.minResolution:0,e[Gt.MIN_ZOOM]=t.minZoom!==void 0?t.minZoom:-1/0,e[Gt.MAX_ZOOM]=t.maxZoom!==void 0?t.maxZoom:1/0,this.className_=e.className!==void 0?e.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const e=this.state_||{layer:this,managed:t===void 0?!0:t},i=this.getZIndex();return e.opacity=le(Math.round(this.getOpacity()*100)/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=i===void 0&&!e.managed?1/0:i,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(t){return Mt()}getLayerStatesArray(t){return Mt()}getExtent(){return this.get(Gt.EXTENT)}getMaxResolution(){return this.get(Gt.MAX_RESOLUTION)}getMinResolution(){return this.get(Gt.MIN_RESOLUTION)}getMinZoom(){return this.get(Gt.MIN_ZOOM)}getMaxZoom(){return this.get(Gt.MAX_ZOOM)}getOpacity(){return this.get(Gt.OPACITY)}getSourceState(){return Mt()}getVisible(){return this.get(Gt.VISIBLE)}getZIndex(){return this.get(Gt.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(Gt.EXTENT,t)}setMaxResolution(t){this.set(Gt.MAX_RESOLUTION,t)}setMinResolution(t){this.set(Gt.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(Gt.MAX_ZOOM,t)}setMinZoom(t){this.set(Gt.MIN_ZOOM,t)}setOpacity(t){$t(typeof t=="number","Layer opacity must be a number"),this.set(Gt.OPACITY,t)}setVisible(t){this.set(Gt.VISIBLE,t)}setZIndex(t){this.set(Gt.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}class Ji extends xi{constructor(t,e){super(t),this.layer=e}}const lf={LAYERS:"layers"};class ra extends Bp{constructor(t){t=t||{};const e=Object.assign({},t);delete e.layers;let i=t.layers;super(e),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(lf.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new Vn(i.slice(),{unique:!0}):$t(typeof i.getArray=="function","Expected `layers` to be an array or a `Collection`"):i=new Vn(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Kt),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push(At(t,He.ADD,this.handleLayersAdd_,this),At(t,He.REMOVE,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(Kt);No(this.listenerKeys_);const e=t.getArray();for(let i=0,s=e.length;i<s;i++){const o=e[i];this.registerLayerListeners_(o),this.dispatchEvent(new Ji("addlayer",o))}this.changed()}registerLayerListeners_(t){const e=[At(t,Vs.PROPERTYCHANGE,this.handleLayerChange_,this),At(t,Ct.CHANGE,this.handleLayerChange_,this)];t instanceof ra&&e.push(At(t,"addlayer",this.handleLayerGroupAdd_,this),At(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[ie(t)]=e}handleLayerGroupAdd_(t){this.dispatchEvent(new Ji("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new Ji("removelayer",t.layer))}handleLayersAdd_(t){const e=t.element;this.registerLayerListeners_(e),this.dispatchEvent(new Ji("addlayer",e)),this.changed()}handleLayersRemove_(t){const e=t.element,i=ie(e);this.listenerKeys_[i].forEach(Kt),delete this.listenerKeys_[i],this.dispatchEvent(new Ji("removelayer",e)),this.changed()}getLayers(){return this.get(lf.LAYERS)}setLayers(t){const e=this.getLayers();if(e){const i=e.getArray();for(let s=0,o=i.length;s<o;++s)this.dispatchEvent(new Ji("removelayer",i[s]))}this.set(lf.LAYERS,t)}getLayersArray(t){return t=t!==void 0?t:[],this.getLayers().forEach(function(e){e.getLayersArray(t)}),t}getLayerStatesArray(t){const e=t!==void 0?t:[],i=e.length;this.getLayers().forEach(function(l){l.getLayerStatesArray(e)});const s=this.getLayerState();let o=s.zIndex;!t&&s.zIndex===void 0&&(o=0);for(let l=i,h=e.length;l<h;l++){const c=e[l];c.opacity*=s.opacity,c.visible=c.visible&&s.visible,c.maxResolution=Math.min(c.maxResolution,s.maxResolution),c.minResolution=Math.max(c.minResolution,s.minResolution),c.minZoom=Math.max(c.minZoom,s.minZoom),c.maxZoom=Math.min(c.maxZoom,s.maxZoom),s.extent!==void 0&&(c.extent!==void 0?c.extent=nd(c.extent,s.extent):c.extent=s.extent),c.zIndex===void 0&&(c.zIndex=o)}return e}getSourceState(){return"ready"}}const xn={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};class su extends Bp{constructor(t){const e=Object.assign({},t);delete e.source,super(e),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(Gt.SOURCE,this.handleSourcePropertyChange_);const i=t.source?t.source:null;this.setSource(i)}getLayersArray(t){return t=t||[],t.push(this),t}getLayerStatesArray(t){return t=t||[],t.push(this.getLayerState()),t}getSource(){return this.get(Gt.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Kt(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const t=this.getSource();t&&(this.sourceChangeKey_=At(t,Ct.CHANGE,this.handleSourceChange_,this),t.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0)),this.clearRenderer()),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return!this.renderer_||!this.rendered?null:this.renderer_.getData(t)}isVisible(t){let e;const i=this.getMapInternal();!t&&i&&(t=i.getView()),t instanceof Un?e={viewState:t.getState(),extent:t.calculateExtent()}:e=t,!e.layerStatesArray&&i&&(e.layerStatesArray=i.getLayerGroup().getLayerStatesArray());let s;if(e.layerStatesArray){if(s=e.layerStatesArray.find(l=>l.layer===this),!s)return!1}else s=this.getLayerState();const o=this.getExtent();return Id(s,e.viewState)&&(!o||Ge(o,e.extent))}getAttributions(t){var o;if(!this.isVisible(t))return[];const e=(o=this.getSource())==null?void 0:o.getAttributions();if(!e)return[];const i=t instanceof Un?t.getViewStateAndExtent():t;let s=e(i);return Array.isArray(s)||(s=[s]),s}render(t,e){const i=this.getRenderer();return i.prepareFrame(t)?(this.rendered=!0,i.renderFrame(t,e)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(t,e){}renderDeferred(t){const e=this.getRenderer();e&&e.renderDeferred(t)}setMapInternal(t){t||this.unrender(),this.set(Gt.MAP,t)}getMapInternal(){return this.get(Gt.MAP)}setMap(t){this.mapPrecomposeKey_&&(Kt(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(Kt(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=At(t,xn.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=At(this,Ct.CHANGE,t.render,t),this.changed())}handlePrecompose_(t){const e=t.frameState.layerStatesArray,i=this.getLayerState(!1);$t(!e.some(s=>s.layer===i.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),e.push(i)}setSource(t){this.set(Gt.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function Id(n,t){if(!n.visible)return!1;const e=t.resolution;if(e<n.minResolution||e>=n.maxResolution)return!1;const i=t.zoom;return i>n.minZoom&&i<=n.maxZoom}function Up(n,t,e=0,i=n.length-1,s=Zx){for(;i>e;){if(i-e>600){const c=i-e+1,d=t-e+1,g=Math.log(c),_=.5*Math.exp(2*g/3),y=.5*Math.sqrt(g*_*(c-_)/c)*(d-c/2<0?-1:1),v=Math.max(e,Math.floor(t-d*_/c+y)),E=Math.min(i,Math.floor(t+(c-d)*_/c+y));Up(n,t,v,E,s)}const o=n[t];let l=e,h=i;for(Ha(n,e,t),s(n[i],o)>0&&Ha(n,e,i);l<h;){for(Ha(n,l,h),l++,h--;s(n[l],o)<0;)l++;for(;s(n[h],o)>0;)h--}s(n[e],o)===0?Ha(n,e,h):(h++,Ha(n,h,i)),h<=t&&(e=h+1),t<=h&&(i=h-1)}}function Ha(n,t,e){const i=n[t];n[t]=n[e],n[e]=i}function Zx(n,t){return n<t?-1:n>t?1:0}let Xp=class{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(t){let e=this.data;const i=[];if(!fh(t,e))return i;const s=this.toBBox,o=[];for(;e;){for(let l=0;l<e.children.length;l++){const h=e.children[l],c=e.leaf?s(h):h;fh(t,c)&&(e.leaf?i.push(h):uf(t,c)?this._all(h,i):o.push(h))}e=o.pop()}return i}collides(t){let e=this.data;if(!fh(t,e))return!1;const i=[];for(;e;){for(let s=0;s<e.children.length;s++){const o=e.children[s],l=e.leaf?this.toBBox(o):o;if(fh(t,l)){if(e.leaf||uf(t,l))return!0;i.push(o)}}e=i.pop()}return!1}load(t){if(!(t&&t.length))return this;if(t.length<this._minEntries){for(let i=0;i<t.length;i++)this.insert(t[i]);return this}let e=this._build(t.slice(),0,t.length-1,0);if(!this.data.children.length)this.data=e;else if(this.data.height===e.height)this._splitRoot(this.data,e);else{if(this.data.height<e.height){const i=this.data;this.data=e,e=i}this._insert(e,this.data.height-e.height-1,!0)}return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=As([]),this}remove(t,e){if(!t)return this;let i=this.data;const s=this.toBBox(t),o=[],l=[];let h,c,d;for(;i||o.length;){if(i||(i=o.pop(),c=o[o.length-1],h=l.pop(),d=!0),i.leaf){const g=Qx(t,i.children,e);if(g!==-1)return i.children.splice(g,1),o.push(i),this._condense(o),this}!d&&!i.leaf&&uf(i,s)?(o.push(i),l.push(h),h=0,c=i,i=i.children[0]):c?(h++,i=c.children[h],d=!1):i=null}return this}toBBox(t){return t}compareMinX(t,e){return t.minX-e.minX}compareMinY(t,e){return t.minY-e.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,e){const i=[];for(;t;)t.leaf?e.push(...t.children):i.push(...t.children),t=i.pop();return e}_build(t,e,i,s){const o=i-e+1;let l=this._maxEntries,h;if(o<=l)return h=As(t.slice(e,i+1)),Is(h,this.toBBox),h;s||(s=Math.ceil(Math.log(o)/Math.log(l)),l=Math.ceil(o/Math.pow(l,s-1))),h=As([]),h.leaf=!1,h.height=s;const c=Math.ceil(o/l),d=c*Math.ceil(Math.sqrt(l));o_(t,e,i,d,this.compareMinX);for(let g=e;g<=i;g+=d){const _=Math.min(g+d-1,i);o_(t,g,_,c,this.compareMinY);for(let y=g;y<=_;y+=c){const v=Math.min(y+c-1,_);h.children.push(this._build(t,y,v,s-1))}}return Is(h,this.toBBox),h}_chooseSubtree(t,e,i,s){for(;s.push(e),!(e.leaf||s.length-1===i);){let o=1/0,l=1/0,h;for(let c=0;c<e.children.length;c++){const d=e.children[c],g=hf(d),_=eE(t,d)-g;_<l?(l=_,o=g<o?g:o,h=d):_===l&&g<o&&(o=g,h=d)}e=h||e.children[0]}return e}_insert(t,e,i){const s=i?t:this.toBBox(t),o=[],l=this._chooseSubtree(s,this.data,e,o);for(l.children.push(t),to(l,s);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(s,o,e)}_split(t,e){const i=t[e],s=i.children.length,o=this._minEntries;this._chooseSplitAxis(i,o,s);const l=this._chooseSplitIndex(i,o,s),h=As(i.children.splice(l,i.children.length-l));h.height=i.height,h.leaf=i.leaf,Is(i,this.toBBox),Is(h,this.toBBox),e?t[e-1].children.push(h):this._splitRoot(i,h)}_splitRoot(t,e){this.data=As([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Is(this.data,this.toBBox)}_chooseSplitIndex(t,e,i){let s,o=1/0,l=1/0;for(let h=e;h<=i-e;h++){const c=Ja(t,0,h,this.toBBox),d=Ja(t,h,i,this.toBBox),g=nE(c,d),_=hf(c)+hf(d);g<o?(o=g,s=h,l=_<l?_:l):g===o&&_<l&&(l=_,s=h)}return s||i-e}_chooseSplitAxis(t,e,i){const s=t.leaf?this.compareMinX:Jx,o=t.leaf?this.compareMinY:tE,l=this._allDistMargin(t,e,i,s),h=this._allDistMargin(t,e,i,o);l<h&&t.children.sort(s)}_allDistMargin(t,e,i,s){t.children.sort(s);const o=this.toBBox,l=Ja(t,0,e,o),h=Ja(t,i-e,i,o);let c=ch(l)+ch(h);for(let d=e;d<i-e;d++){const g=t.children[d];to(l,t.leaf?o(g):g),c+=ch(l)}for(let d=i-e-1;d>=e;d--){const g=t.children[d];to(h,t.leaf?o(g):g),c+=ch(h)}return c}_adjustParentBBoxes(t,e,i){for(let s=i;s>=0;s--)to(e[s],t)}_condense(t){for(let e=t.length-1,i;e>=0;e--)t[e].children.length===0?e>0?(i=t[e-1].children,i.splice(i.indexOf(t[e]),1)):this.clear():Is(t[e],this.toBBox)}};function Qx(n,t,e){if(!e)return t.indexOf(n);for(let i=0;i<t.length;i++)if(e(n,t[i]))return i;return-1}function Is(n,t){Ja(n,0,n.children.length,t,n)}function Ja(n,t,e,i,s){s||(s=As(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let o=t;o<e;o++){const l=n.children[o];to(s,n.leaf?i(l):l)}return s}function to(n,t){return n.minX=Math.min(n.minX,t.minX),n.minY=Math.min(n.minY,t.minY),n.maxX=Math.max(n.maxX,t.maxX),n.maxY=Math.max(n.maxY,t.maxY),n}function Jx(n,t){return n.minX-t.minX}function tE(n,t){return n.minY-t.minY}function hf(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function ch(n){return n.maxX-n.minX+(n.maxY-n.minY)}function eE(n,t){return(Math.max(t.maxX,n.maxX)-Math.min(t.minX,n.minX))*(Math.max(t.maxY,n.maxY)-Math.min(t.minY,n.minY))}function nE(n,t){const e=Math.max(n.minX,t.minX),i=Math.max(n.minY,t.minY),s=Math.min(n.maxX,t.maxX),o=Math.min(n.maxY,t.maxY);return Math.max(0,s-e)*Math.max(0,o-i)}function uf(n,t){return n.minX<=t.minX&&n.minY<=t.minY&&t.maxX<=n.maxX&&t.maxY<=n.maxY}function fh(n,t){return t.minX<=n.maxX&&t.minY<=n.maxY&&t.maxX>=n.minX&&t.maxY>=n.minY}function As(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function o_(n,t,e,i,s){const o=[t,e];for(;o.length;){if(e=o.pop(),t=o.pop(),e-t<=i)continue;const l=t+Math.ceil((e-t)/i/2)*i;Up(n,l,t,e,s),o.push(t,l,l,e)}}const l_={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};var h_={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function iE(n){var g,_;var t,e=[],i=1,s;if(typeof n=="number")return{space:"rgb",values:[n>>>16,(n&65280)>>>8,n&255],alpha:1};if(typeof n=="number")return{space:"rgb",values:[n>>>16,(n&65280)>>>8,n&255],alpha:1};if(n=String(n).toLowerCase(),l_[n])e=l_[n].slice(),s="rgb";else if(n==="transparent")i=0,s="rgb",e=[0,0,0];else if(n[0]==="#"){var o=n.slice(1),l=o.length,h=l<=4;i=1,h?(e=[parseInt(o[0]+o[0],16),parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16)],l===4&&(i=parseInt(o[3]+o[3],16)/255)):(e=[parseInt(o[0]+o[1],16),parseInt(o[2]+o[3],16),parseInt(o[4]+o[5],16)],l===8&&(i=parseInt(o[6]+o[7],16)/255)),e[0]||(e[0]=0),e[1]||(e[1]=0),e[2]||(e[2]=0),s="rgb"}else if(t=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(n)){var c=t[1];s=c.replace(/a$/,"");var d=s==="cmyk"?4:s==="gray"?1:3;e=t[2].trim().split(/\s*[,\/]\s*|\s+/),s==="color"&&(s=e.shift()),e=e.map(function(y,v){if(y[y.length-1]==="%")return y=parseFloat(y)/100,v===3?y:s==="rgb"?y*255:s[0]==="h"||s[0]==="l"&&!v?y*100:s==="lab"?y*125:s==="lch"?v<2?y*150:y*360:s[0]==="o"&&!v?y:s==="oklab"?y*.4:s==="oklch"?v<2?y*.4:y*360:y;if(s[v]==="h"||v===2&&s[s.length-1]==="h"){if(h_[y]!==void 0)return h_[y];if(y.endsWith("deg"))return parseFloat(y);if(y.endsWith("turn"))return parseFloat(y)*360;if(y.endsWith("grad"))return parseFloat(y)*360/400;if(y.endsWith("rad"))return parseFloat(y)*180/Math.PI}return y==="none"?0:parseFloat(y)}),i=e.length>d?e.pop():1}else/[0-9](?:\s|\/|,)/.test(n)&&(e=n.match(/([0-9]+)/g).map(function(y){return parseFloat(y)}),s=((_=(g=n.match(/([a-z])/ig))==null?void 0:g.join(""))==null?void 0:_.toLowerCase())||"rgb");return{space:s,values:e,alpha:i}}const wo={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var cf={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(n){var t=n[0]/360,e=n[1]/100,i=n[2]/100,s,o,l,h,c,d=0;if(e===0)return c=i*255,[c,c,c];for(o=i<.5?i*(1+e):i+e-i*e,s=2*i-o,h=[0,0,0];d<3;)l=t+1/3*-(d-1),l<0?l++:l>1&&l--,c=6*l<1?s+(o-s)*6*l:2*l<1?o:3*l<2?s+(o-s)*(2/3-l)*6:s,h[d++]=c*255;return h}};wo.hsl=function(n){var t=n[0]/255,e=n[1]/255,i=n[2]/255,s=Math.min(t,e,i),o=Math.max(t,e,i),l=o-s,h,c,d;return o===s?h=0:t===o?h=(e-i)/l:e===o?h=2+(i-t)/l:i===o&&(h=4+(t-e)/l),h=Math.min(h*60,360),h<0&&(h+=360),d=(s+o)/2,o===s?c=0:d<=.5?c=l/(o+s):c=l/(2-o-s),[h,c*100,d*100]};function rE(n){Array.isArray(n)&&n.raw&&(n=String.raw(...arguments)),n instanceof Number&&(n=+n);var t,e=iE(n);if(!e.space)return[];const i=e.space[0]==="h"?cf.min:wo.min,s=e.space[0]==="h"?cf.max:wo.max;return t=Array(3),t[0]=Math.min(Math.max(e.values[0],i[0]),s[0]),t[1]=Math.min(Math.max(e.values[1],i[1]),s[1]),t[2]=Math.min(Math.max(e.values[2],i[2]),s[2]),e.space[0]==="h"&&(t=cf.rgb(t)),t.push(Math.min(Math.max(e.alpha,0),1)),t}const Pe={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"],whitepoint:{2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}}};Pe.max=Pe.whitepoint[2].D65;Pe.rgb=function(n,t){t=t||Pe.whitepoint[2].E;var e=n[0]/t[0],i=n[1]/t[1],s=n[2]/t[2],o,l,h;return o=e*3.240969941904521+i*-1.537383177570093+s*-.498610760293,l=e*-.96924363628087+i*1.87596750150772+s*.041555057407175,h=e*.055630079696993+i*-.20397695888897+s*1.056971514242878,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o=o*12.92,l=l>.0031308?1.055*Math.pow(l,1/2.4)-.055:l=l*12.92,h=h>.0031308?1.055*Math.pow(h,1/2.4)-.055:h=h*12.92,o=Math.min(Math.max(0,o),1),l=Math.min(Math.max(0,l),1),h=Math.min(Math.max(0,h),1),[o*255,l*255,h*255]};wo.xyz=function(n,t){var e=n[0]/255,i=n[1]/255,s=n[2]/255;e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92,s=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92;var o=e*.41239079926595+i*.35758433938387+s*.18048078840183,l=e*.21263900587151+i*.71516867876775+s*.072192315360733,h=e*.019330818715591+i*.11919477979462+s*.95053215224966;return t=t||Pe.whitepoint[2].E,[o*t[0],l*t[1],h*t[2]]};var Td={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(n,t,e){var i,s,o,l,h,c,d,g,_,y,v,E,M;if(o=n[0],l=n[1],h=n[2],o===0)return[0,0,0];var w=.0011070564598794539;return t=t||"D65",e=e||2,_=Pe.whitepoint[e][t][0],y=Pe.whitepoint[e][t][1],v=Pe.whitepoint[e][t][2],E=4*_/(_+15*y+3*v),M=9*y/(_+15*y+3*v),i=l/(13*o)+E||0,s=h/(13*o)+M||0,d=o>8?y*Math.pow((o+16)/116,3):y*o*w,c=d*9*i/(4*s)||0,g=d*(12-3*i-20*s)/(4*s)||0,[c,d,g]}};Pe.luv=function(n,t,e){var i,s,o,l,h,c,d,g,_,y,v,E,M,w=.008856451679035631,S=903.2962962962961;t=t||"D65",e=e||2,_=Pe.whitepoint[e][t][0],y=Pe.whitepoint[e][t][1],v=Pe.whitepoint[e][t][2],E=4*_/(_+15*y+3*v),M=9*y/(_+15*y+3*v),c=n[0],d=n[1],g=n[2],i=4*c/(c+15*d+3*g)||0,s=9*d/(c+15*d+3*g)||0;var R=d/y;return o=R<=w?S*R:116*Math.pow(R,1/3)-16,l=13*o*(i-E),h=13*o*(s-M),[o,l,h]};var Vp={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(n){var t=n[0],e=n[1],i=n[2],s,o,l;return l=i/360*2*Math.PI,s=e*Math.cos(l),o=e*Math.sin(l),[t,s,o]},xyz:function(n){return Td.xyz(Vp.luv(n))}};Td.lchuv=function(n){var t=n[0],e=n[1],i=n[2],s=Math.sqrt(e*e+i*i),o=Math.atan2(i,e),l=o*360/2/Math.PI;return l<0&&(l+=360),[t,s,l]};Pe.lchuv=function(n){return Td.lchuv(Pe.luv(n))};const Pd=[NaN,NaN,NaN,0];function sE(n){return typeof n=="string"?n:Ad(n)}const aE=1024,Ka={};let ff=0;function oE(n){if(n.length===4)return n;const t=n.slice();return t[3]=1,t}function u_(n){const t=Pe.lchuv(wo.xyz(n));return t[3]=n[3],t}function lE(n){const t=Pe.rgb(Vp.xyz(n));return t[3]=n[3],t}function Ld(n){if(n==="none")return Pd;if(Ka.hasOwnProperty(n))return Ka[n];if(ff>=aE){let e=0;for(const i in Ka)e++&3||(delete Ka[i],--ff)}const t=rE(n);if(t.length!==4)throw new Error('failed to parse "'+n+'" as color');for(const e of t)if(isNaN(e))throw new Error('failed to parse "'+n+'" as color');return $p(t),Ka[n]=t,++ff,t}function Hs(n){return Array.isArray(n)?n:Ld(n)}function $p(n){return n[0]=le(n[0]+.5|0,0,255),n[1]=le(n[1]+.5|0,0,255),n[2]=le(n[2]+.5|0,0,255),n[3]=le(n[3],0,1),n}function Ad(n){let t=n[0];t!=(t|0)&&(t=t+.5|0);let e=n[1];e!=(e|0)&&(e=e+.5|0);let i=n[2];i!=(i|0)&&(i=i+.5|0);const s=n[3]===void 0?1:Math.round(n[3]*1e3)/1e3;return"rgba("+t+","+e+","+i+","+s+")"}function c_(n){return n[0]>0&&n[1]>0}function Ks(n,t){return Array.isArray(n)?n:(t===void 0?t=[n,n]:(t[0]=n,t[1]=n),t)}let qr=0;const ze=1<<qr++,Pt=1<<qr++,Ke=1<<qr++,An=1<<qr++,Br=1<<qr++,eo=1<<qr++,dh=Math.pow(2,qr)-1,kd={[ze]:"boolean",[Pt]:"number",[Ke]:"string",[An]:"color",[Br]:"number[]",[eo]:"size"},hE=Object.keys(kd).map(Number).sort(zr);function uE(n){return n in kd}function no(n){const t=[];for(const e of hE)io(n,e)&&t.push(kd[e]);return t.length===0?"untyped":t.length<3?t.join(" or "):t.slice(0,-1).join(", ")+", or "+t[t.length-1]}function io(n,t){return(n&t)===t}function Yi(n,t){return n===t}class oe{constructor(t,e){if(!uE(t))throw new Error(`literal expressions must have a specific type, got ${no(t)}`);this.type=t,this.value=e}}class cE{constructor(t,e,...i){this.type=t,this.operator=e,this.args=i}}function Yp(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function Ee(n,t,e){switch(typeof n){case"boolean":{if(Yi(t,Ke))return new oe(Ke,n?"true":"false");if(!io(t,ze))throw new Error(`got a boolean, but expected ${no(t)}`);return new oe(ze,n)}case"number":{if(Yi(t,eo))return new oe(eo,Ks(n));if(Yi(t,ze))return new oe(ze,!!n);if(Yi(t,Ke))return new oe(Ke,n.toString());if(!io(t,Pt))throw new Error(`got a number, but expected ${no(t)}`);return new oe(Pt,n)}case"string":{if(Yi(t,An))return new oe(An,Ld(n));if(Yi(t,ze))return new oe(ze,!!n);if(!io(t,Ke))throw new Error(`got a string, but expected ${no(t)}`);return new oe(Ke,n)}}if(!Array.isArray(n))throw new Error("expression must be an array or a primitive value");if(n.length===0)throw new Error("empty expression");if(typeof n[0]=="string")return ME(n,t,e);for(const i of n)if(typeof i!="number")throw new Error("expected an array of numbers");if(Yi(t,eo)){if(n.length!==2)throw new Error(`expected an array of two values for a size, got ${n.length}`);return new oe(eo,n)}if(Yi(t,An)){if(n.length===3)return new oe(An,[...n,1]);if(n.length===4)return new oe(An,n);throw new Error(`expected an array of 3 or 4 values for a color, got ${n.length}`)}if(!io(t,Br))throw new Error(`got an array of numbers, but expected ${no(t)}`);return new oe(Br,n)}const j={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},fE={[j.Get]:vt(It(1,1/0),f_),[j.Var]:vt(It(1,1),dE),[j.Has]:vt(It(1,1/0),f_),[j.Id]:vt(gE,Ts),[j.Concat]:vt(It(2,1/0),Dt(Ke)),[j.GeometryType]:vt(mE,Ts),[j.LineMetric]:vt(Ts),[j.Resolution]:vt(df,Ts),[j.Zoom]:vt(df,Ts),[j.Time]:vt(df,Ts),[j.Any]:vt(It(2,1/0),Dt(ze)),[j.All]:vt(It(2,1/0),Dt(ze)),[j.Not]:vt(It(1,1),Dt(ze)),[j.Equal]:vt(It(2,2),Dt(dh)),[j.NotEqual]:vt(It(2,2),Dt(dh)),[j.GreaterThan]:vt(It(2,2),Dt(Pt)),[j.GreaterThanOrEqualTo]:vt(It(2,2),Dt(Pt)),[j.LessThan]:vt(It(2,2),Dt(Pt)),[j.LessThanOrEqualTo]:vt(It(2,2),Dt(Pt)),[j.Multiply]:vt(It(2,1/0),d_),[j.Coalesce]:vt(It(2,1/0),d_),[j.Divide]:vt(It(2,2),Dt(Pt)),[j.Add]:vt(It(2,1/0),Dt(Pt)),[j.Subtract]:vt(It(2,2),Dt(Pt)),[j.Clamp]:vt(It(3,3),Dt(Pt)),[j.Mod]:vt(It(2,2),Dt(Pt)),[j.Pow]:vt(It(2,2),Dt(Pt)),[j.Abs]:vt(It(1,1),Dt(Pt)),[j.Floor]:vt(It(1,1),Dt(Pt)),[j.Ceil]:vt(It(1,1),Dt(Pt)),[j.Round]:vt(It(1,1),Dt(Pt)),[j.Sin]:vt(It(1,1),Dt(Pt)),[j.Cos]:vt(It(1,1),Dt(Pt)),[j.Atan]:vt(It(1,2),Dt(Pt)),[j.Sqrt]:vt(It(1,1),Dt(Pt)),[j.Match]:vt(It(4,1/0),g_,pE),[j.Between]:vt(It(3,3),Dt(Pt)),[j.Interpolate]:vt(It(6,1/0),g_,yE),[j.Case]:vt(It(3,1/0),_E,vE),[j.In]:vt(It(2,2),xE),[j.Number]:vt(It(1,1/0),Dt(dh)),[j.String]:vt(It(1,1/0),Dt(dh)),[j.Array]:vt(It(1,1/0),Dt(Pt)),[j.Color]:vt(It(1,4),Dt(Pt)),[j.Band]:vt(It(1,3),Dt(Pt)),[j.Palette]:vt(It(2,2),EE),[j.ToString]:vt(It(1,1),Dt(ze|Pt|Ke|An))};function f_(n,t,e){const i=n.length-1,s=new Array(i);for(let o=0;o<i;++o){const l=n[o+1];switch(typeof l){case"number":{s[o]=new oe(Pt,l);break}case"string":{s[o]=new oe(Ke,l);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${l}`)}o===0&&e.properties.add(String(l))}return s}function dE(n,t,e){const i=n[1];if(typeof i!="string")throw new Error("expected a string argument for var operation");return e.variables.add(i),[new oe(Ke,i)]}function gE(n,t,e){e.featureId=!0}function mE(n,t,e){e.geometryType=!0}function df(n,t,e){e.mapState=!0}function Ts(n,t,e){const i=n[0];if(n.length!==1)throw new Error(`expected no arguments for ${i} operation`);return[]}function It(n,t){return function(e,i,s){const o=e[0],l=e.length-1;if(n===t){if(l!==n){const h=n===1?"":"s";throw new Error(`expected ${n} argument${h} for ${o}, got ${l}`)}}else if(l<n||l>t){const h=t===1/0?`${n} or more`:`${n} to ${t}`;throw new Error(`expected ${h} arguments for ${o}, got ${l}`)}}}function d_(n,t,e){const i=n.length-1,s=new Array(i);for(let o=0;o<i;++o){const l=Ee(n[o+1],t,e);s[o]=l}return s}function Dt(n){return function(t,e,i){const s=t.length-1,o=new Array(s);for(let l=0;l<s;++l){const h=Ee(t[l+1],n,i);o[l]=h}return o}}function _E(n,t,e){const i=n[0],s=n.length-1;if(s%2===0)throw new Error(`expected an odd number of arguments for ${i}, got ${s} instead`)}function g_(n,t,e){const i=n[0],s=n.length-1;if(s%2===1)throw new Error(`expected an even number of arguments for operation ${i}, got ${s} instead`)}function pE(n,t,e){const i=n.length-1,s=Ke|Pt|ze,o=Ee(n[1],s,e),l=Ee(n[n.length-1],t,e),h=new Array(i-2);for(let c=0;c<i-2;c+=2){try{const d=Ee(n[c+2],o.type,e);h[c]=d}catch(d){throw new Error(`failed to parse argument ${c+1} of match expression: ${d.message}`)}try{const d=Ee(n[c+3],l.type,e);h[c+1]=d}catch(d){throw new Error(`failed to parse argument ${c+2} of match expression: ${d.message}`)}}return[o,...h,l]}function yE(n,t,e){const i=n[1];let s;switch(i[0]){case"linear":s=1;break;case"exponential":const c=i[1];if(typeof c!="number"||c<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(c)} instead`);s=c;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(i)}`)}const o=new oe(Pt,s);let l;try{l=Ee(n[2],Pt,e)}catch(c){throw new Error(`failed to parse argument 1 in interpolate expression: ${c.message}`)}const h=new Array(n.length-3);for(let c=0;c<h.length;c+=2){try{const d=Ee(n[c+3],Pt,e);h[c]=d}catch(d){throw new Error(`failed to parse argument ${c+2} for interpolate expression: ${d.message}`)}try{const d=Ee(n[c+4],t,e);h[c+1]=d}catch(d){throw new Error(`failed to parse argument ${c+3} for interpolate expression: ${d.message}`)}}return[o,l,...h]}function vE(n,t,e){const i=Ee(n[n.length-1],t,e),s=new Array(n.length-1);for(let o=0;o<s.length-1;o+=2){try{const l=Ee(n[o+1],ze,e);s[o]=l}catch(l){throw new Error(`failed to parse argument ${o} of case expression: ${l.message}`)}try{const l=Ee(n[o+2],i.type,e);s[o+1]=l}catch(l){throw new Error(`failed to parse argument ${o+1} of case expression: ${l.message}`)}}return s[s.length-1]=i,s}function xE(n,t,e){let i=n[2];if(!Array.isArray(i))throw new Error('the second argument for the "in" operator must be an array');let s;if(typeof i[0]=="string"){if(i[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(i[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');i=i[1],s=Ke}else s=Pt;const o=new Array(i.length);for(let h=0;h<o.length;h++)try{const c=Ee(i[h],s,e);o[h]=c}catch(c){throw new Error(`failed to parse haystack item ${h} for "in" expression: ${c.message}`)}return[Ee(n[1],s,e),...o]}function EE(n,t,e){let i;try{i=Ee(n[1],Pt,e)}catch(l){throw new Error(`failed to parse first argument in palette expression: ${l.message}`)}const s=n[2];if(!Array.isArray(s))throw new Error("the second argument of palette must be an array");const o=new Array(s.length);for(let l=0;l<o.length;l++){let h;try{h=Ee(s[l],An,e)}catch(c){throw new Error(`failed to parse color at index ${l} in palette expression: ${c.message}`)}if(!(h instanceof oe))throw new Error(`the palette color at index ${l} must be a literal value`);o[l]=h}return[i,...o]}function vt(...n){return function(t,e,i){const s=t[0];let o;for(let l=0;l<n.length;l++){const h=n[l](t,e,i);if(l==n.length-1){if(!h)throw new Error("expected last argument validator to return the parsed args");o=h}}return new cE(e,s,...o)}}function ME(n,t,e){const i=n[0],s=fE[i];if(!s)throw new Error(`unknown operator: ${i}`);return s(n,t,e)}function qp(n){if(!n)return"";const t=n.getType();switch(t){case"Point":case"LineString":case"Polygon":return t;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return t.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return qp(n.getGeometries()[0]);default:return""}}function Hp(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function Ei(n,t,e){const i=Ee(n,t,e);return Dn(i)}function Dn(n,t){if(n instanceof oe){if(n.type===An&&typeof n.value=="string"){const i=Ld(n.value);return function(){return i}}return function(){return n.value}}const e=n.operator;switch(e){case j.Number:case j.String:case j.Coalesce:return wE(n);case j.Get:case j.Var:case j.Has:return CE(n);case j.Id:return i=>i.featureId;case j.GeometryType:return i=>i.geometryType;case j.Concat:{const i=n.args.map(s=>Dn(s));return s=>"".concat(...i.map(o=>o(s).toString()))}case j.Resolution:return i=>i.resolution;case j.Any:case j.All:case j.Between:case j.In:case j.Not:return RE(n);case j.Equal:case j.NotEqual:case j.LessThan:case j.LessThanOrEqualTo:case j.GreaterThan:case j.GreaterThanOrEqualTo:return SE(n);case j.Multiply:case j.Divide:case j.Add:case j.Subtract:case j.Clamp:case j.Mod:case j.Pow:case j.Abs:case j.Floor:case j.Ceil:case j.Round:case j.Sin:case j.Cos:case j.Atan:case j.Sqrt:return IE(n);case j.Case:return TE(n);case j.Match:return PE(n);case j.Interpolate:return LE(n);case j.ToString:return AE(n);default:throw new Error(`Unsupported operator ${e}`)}}function wE(n,t){const e=n.operator,i=n.args.length,s=new Array(i);for(let o=0;o<i;++o)s[o]=Dn(n.args[o]);switch(e){case j.Coalesce:return o=>{for(let l=0;l<i;++l){const h=s[l](o);if(typeof h<"u"&&h!==null)return h}throw new Error("Expected one of the values to be non-null")};case j.Number:case j.String:return o=>{for(let l=0;l<i;++l){const h=s[l](o);if(typeof h===e)return h}throw new Error(`Expected one of the values to be a ${e}`)};default:throw new Error(`Unsupported assertion operator ${e}`)}}function CE(n,t){const i=n.args[0].value;switch(n.operator){case j.Get:return s=>{const o=n.args;let l=s.properties[i];for(let h=1,c=o.length;h<c;++h){const g=o[h].value;l=l[g]}return l};case j.Var:return s=>s.variables[i];case j.Has:return s=>{const o=n.args;if(!(i in s.properties))return!1;let l=s.properties[i];for(let h=1,c=o.length;h<c;++h){const g=o[h].value;if(!l||!Object.hasOwn(l,g))return!1;l=l[g]}return!0};default:throw new Error(`Unsupported accessor operator ${n.operator}`)}}function SE(n,t){const e=n.operator,i=Dn(n.args[0]),s=Dn(n.args[1]);switch(e){case j.Equal:return o=>i(o)===s(o);case j.NotEqual:return o=>i(o)!==s(o);case j.LessThan:return o=>i(o)<s(o);case j.LessThanOrEqualTo:return o=>i(o)<=s(o);case j.GreaterThan:return o=>i(o)>s(o);case j.GreaterThanOrEqualTo:return o=>i(o)>=s(o);default:throw new Error(`Unsupported comparison operator ${e}`)}}function RE(n,t){const e=n.operator,i=n.args.length,s=new Array(i);for(let o=0;o<i;++o)s[o]=Dn(n.args[o]);switch(e){case j.Any:return o=>{for(let l=0;l<i;++l)if(s[l](o))return!0;return!1};case j.All:return o=>{for(let l=0;l<i;++l)if(!s[l](o))return!1;return!0};case j.Between:return o=>{const l=s[0](o),h=s[1](o),c=s[2](o);return l>=h&&l<=c};case j.In:return o=>{const l=s[0](o);for(let h=1;h<i;++h)if(l===s[h](o))return!0;return!1};case j.Not:return o=>!s[0](o);default:throw new Error(`Unsupported logical operator ${e}`)}}function IE(n,t){const e=n.operator,i=n.args.length,s=new Array(i);for(let o=0;o<i;++o)s[o]=Dn(n.args[o]);switch(e){case j.Multiply:return o=>{let l=1;for(let h=0;h<i;++h)l*=s[h](o);return l};case j.Divide:return o=>s[0](o)/s[1](o);case j.Add:return o=>{let l=0;for(let h=0;h<i;++h)l+=s[h](o);return l};case j.Subtract:return o=>s[0](o)-s[1](o);case j.Clamp:return o=>{const l=s[0](o),h=s[1](o);if(l<h)return h;const c=s[2](o);return l>c?c:l};case j.Mod:return o=>s[0](o)%s[1](o);case j.Pow:return o=>Math.pow(s[0](o),s[1](o));case j.Abs:return o=>Math.abs(s[0](o));case j.Floor:return o=>Math.floor(s[0](o));case j.Ceil:return o=>Math.ceil(s[0](o));case j.Round:return o=>Math.round(s[0](o));case j.Sin:return o=>Math.sin(s[0](o));case j.Cos:return o=>Math.cos(s[0](o));case j.Atan:return i===2?o=>Math.atan2(s[0](o),s[1](o)):o=>Math.atan(s[0](o));case j.Sqrt:return o=>Math.sqrt(s[0](o));default:throw new Error(`Unsupported numeric operator ${e}`)}}function TE(n,t){const e=n.args.length,i=new Array(e);for(let s=0;s<e;++s)i[s]=Dn(n.args[s]);return s=>{for(let o=0;o<e-1;o+=2)if(i[o](s))return i[o+1](s);return i[e-1](s)}}function PE(n,t){const e=n.args.length,i=new Array(e);for(let s=0;s<e;++s)i[s]=Dn(n.args[s]);return s=>{const o=i[0](s);for(let l=1;l<e;l+=2)if(o===i[l](s))return i[l+1](s);return i[e-1](s)}}function LE(n,t){const e=n.args.length,i=new Array(e);for(let s=0;s<e;++s)i[s]=Dn(n.args[s]);return s=>{const o=i[0](s),l=i[1](s);let h,c;for(let d=2;d<e;d+=2){const g=i[d](s);let _=i[d+1](s);const y=Array.isArray(_);if(y&&(_=oE(_)),g>=l)return d===2?_:y?kE(o,l,h,c,g,_):ro(o,l,h,c,g,_);h=g,c=_}return c}}function AE(n,t){const e=n.operator,i=n.args.length,s=new Array(i);for(let o=0;o<i;++o)s[o]=Dn(n.args[o]);switch(e){case j.ToString:return o=>{const l=s[0](o);return n.args[0].type===An?Ad(l):l.toString()};default:throw new Error(`Unsupported convert operator ${e}`)}}function ro(n,t,e,i,s,o){const l=s-e;if(l===0)return i;const h=t-e,c=n===1?h/l:(Math.pow(n,h)-1)/(Math.pow(n,l)-1);return i+c*(o-i)}function kE(n,t,e,i,s,o){if(s-e===0)return i;const h=u_(i),c=u_(o);let d=c[2]-h[2];d>180?d-=360:d<-180&&(d+=360);const g=[ro(n,t,e,h[0],s,c[0]),ro(n,t,e,h[1],s,c[1]),h[2]+ro(n,t,e,0,s,d),ro(n,t,e,i[3],s,o[3])];return $p(lE(g))}const ut={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class Od extends Kh{constructor(t,e,i,s){super(),this.extent=t,this.pixelRatio_=i,this.resolution=e,this.state=typeof s=="function"?ut.IDLE:s,this.image_=null,this.loader=typeof s=="function"?s:null}changed(){this.dispatchEvent(Ct.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==ut.IDLE&&this.loader){this.state=ut.LOADING,this.changed();const t=this.getResolution(),e=Array.isArray(t)?t[0]:t;ep(()=>this.loader(this.getExtent(),e,this.getPixelRatio())).then(i=>{"image"in i&&(this.image_=i.image),"extent"in i&&(this.extent=i.extent),"resolution"in i&&(this.resolution=i.resolution),"pixelRatio"in i&&(this.pixelRatio_=i.pixelRatio),(i instanceof HTMLImageElement||ap&&i instanceof ImageBitmap||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement)&&(this.image_=i),this.state=ut.LOADED}).catch(i=>{this.state=ut.ERROR,console.error(i)}).finally(()=>this.changed())}}setImage(t){this.image_=t}setResolution(t){this.resolution=t}}function OE(n,t){return new Promise((e,i)=>{function s(){l(),e(n)}function o(){l(),i(new Error("Image load error"))}function l(){n.removeEventListener("load",s),n.removeEventListener("error",o)}n.addEventListener("load",s),n.addEventListener("error",o)})}function Kp(n,t){return t&&(n.src=t),n.src&&sp?new Promise((e,i)=>n.decode().then(()=>e(n)).catch(s=>n.complete&&n.width?e(n):i(s))):OE(n)}function Zp(n,t){return t&&(n.src=t),n.src&&sp&&ap?n.decode().then(()=>createImageBitmap(n)).catch(e=>{if(n.complete&&n.width)return n;throw e}):Kp(n)}class NE{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const e in this.cache_){const i=this.cache_[e];!(t++&3)&&!i.hasListener()&&(delete this.cache_[e],delete this.patternCache_[e],--this.cacheSize_)}}}get(t,e,i){const s=gf(t,e,i);return s in this.cache_?this.cache_[s]:null}getPattern(t,e,i){const s=gf(t,e,i);return s in this.patternCache_?this.patternCache_[s]:null}set(t,e,i,s,o){const l=gf(t,e,i),h=l in this.cache_;this.cache_[l]=s,o&&(s.getImageState()===ut.IDLE&&s.load(),s.getImageState()===ut.LOADING?s.ready().then(()=>{this.patternCache_[l]=Oh().createPattern(s.getImage(1),"repeat")}):this.patternCache_[l]=Oh().createPattern(s.getImage(1),"repeat")),h||++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}}function gf(n,t,e){const i=e?Hs(e):"null";return t+":"+n+":"+i}const En=new NE;let Za=null;class Qp extends Kh{constructor(t,e,i,s,o){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=i,this.canvas_={},this.color_=o,this.imageState_=s===void 0?ut.IDLE:s,this.size_=t&&t.width&&t.height?[t.width,t.height]:null,this.src_=e,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===ut.LOADED){Za||(Za=Me(1,1,void 0,{willReadFrequently:!0})),Za.drawImage(this.image_,0,0);try{Za.getImageData(0,0,1,1),this.tainted_=!1}catch{Za=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(Ct.CHANGE)}handleImageError_(){this.imageState_=ut.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=ut.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],e=this.size_[1],i=Me(t,e);i.fillRect(0,0,t,e),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===ut.IDLE){this.image_||this.initializeImage_(),this.imageState_=ut.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&Kp(this.image_,this.src_).then(t=>{this.image_=t,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==ut.LOADED)return;const e=this.image_,i=Me(Math.ceil(e.width*t),Math.ceil(e.height*t)),s=i.canvas;i.scale(t,t),i.drawImage(e,0,0),i.globalCompositeOperation="multiply",i.fillStyle=sE(this.color_),i.fillRect(0,0,s.width/t,s.height/t),i.globalCompositeOperation="destination-in",i.drawImage(e,0,0),this.canvas_[t]=s}ready(){return this.ready_||(this.ready_=new Promise(t=>{if(this.imageState_===ut.LOADED||this.imageState_===ut.ERROR)t();else{const e=()=>{(this.imageState_===ut.LOADED||this.imageState_===ut.ERROR)&&(this.removeEventListener(Ct.CHANGE,e),t())};this.addEventListener(Ct.CHANGE,e)}})),this.ready_}}function Nd(n,t,e,i,s,o){let l=t===void 0?void 0:En.get(t,e,s);return l||(l=new Qp(n,n&&"src"in n?n.src||void 0:t,e,i,s),En.set(t,e,s,l,o)),o&&l&&!En.getPattern(t,e,s)&&En.set(t,e,s,l,o),l}function $n(n){return n?Array.isArray(n)?Ad(n):typeof n=="object"&&"src"in n?DE(n):n:null}function DE(n){if(!n.offset||!n.size)return En.getPattern(n.src,"anonymous",n.color);const t=n.src+":"+n.offset,e=En.getPattern(t,void 0,n.color);if(e)return e;const i=En.get(n.src,"anonymous",null);if(i.getImageState()!==ut.LOADED)return null;const s=Me(n.size[0],n.size[1]);return s.drawImage(i.getImage(1),n.offset[0],n.offset[1],n.size[0],n.size[1],0,0,n.size[0],n.size[1]),Nd(s.canvas,t,void 0,ut.LOADED,n.color,!0),En.getPattern(t,void 0,n.color)}const Jp="10px sans-serif",Ze="#000",Zs="round",_i=[],pi=0,Qs="round",Co=10,So="#000",Ro="center",Nh="middle",Fr=[0,0,0,0],Io=1,gi=new Zn;let ks=null,bf;const zf={},FE=function(){const t="32px ",e=["monospace","serif"],i=e.length,s="wmytzilWMYTZIL@#/&?$%10";let o,l;function h(d,g,_){let y=!0;for(let v=0;v<i;++v){const E=e[v];if(l=Dh(d+" "+g+" "+t+E,s),_!=E){const M=Dh(d+" "+g+" "+t+_+","+E,s);y=y&&M!=l}}return!!y}function c(){let d=!0;const g=gi.getKeys();for(let _=0,y=g.length;_<y;++_){const v=g[_];if(gi.get(v)<100){const[E,M,w]=v.split(`
`);h(E,M,w)?(No(zf),ks=null,bf=void 0,gi.set(v,100)):(gi.set(v,gi.get(v)+1,!0),d=!1)}}d&&(clearInterval(o),o=void 0)}return function(d){const g=bp(d);if(!g)return;const _=g.families;for(let y=0,v=_.length;y<v;++y){const E=_[y],M=g.style+`
`+g.weight+`
`+E;gi.get(M)===void 0&&(gi.set(M,100,!0),h(g.style,g.weight,E)||(gi.set(M,0,!0),o===void 0&&(o=setInterval(c,32))))}}}(),bE=function(){let n;return function(t){let e=zf[t];if(e==null){if(rp){const i=bp(t),s=ty(t,"Žg");e=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(s.actualBoundingBoxAscent+s.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=t,document.body.appendChild(n),e=n.offsetHeight,document.body.removeChild(n);zf[t]=e}return e}}();function ty(n,t){return ks||(ks=Me(1,1)),n!=bf&&(ks.font=n,bf=ks.font),ks.measureText(t)}function Dh(n,t){return ty(n,t).width}function m_(n,t,e){if(t in e)return e[t];const i=t.split(`
`).reduce((s,o)=>Math.max(s,Dh(n,o)),0);return e[t]=i,i}function zE(n,t){const e=[],i=[],s=[];let o=0,l=0,h=0,c=0;for(let d=0,g=t.length;d<=g;d+=2){const _=t[d];if(_===`
`||d===g){o=Math.max(o,l),s.push(l),l=0,h+=c,c=0;continue}const y=t[d+1]||n.font,v=Dh(y,_);e.push(v),l+=v;const E=bE(y);i.push(E),c=Math.max(c,E)}return{width:o,height:h,widths:e,heights:i,lineWidths:s}}function GE(n,t,e,i,s,o,l,h,c,d,g){n.save(),e!==1&&(n.globalAlpha===void 0?n.globalAlpha=_=>_.globalAlpha*=e:n.globalAlpha*=e),t&&n.transform.apply(n,t),i.contextInstructions?(n.translate(c,d),n.scale(g[0],g[1]),jE(i,n)):g[0]<0||g[1]<0?(n.translate(c,d),n.scale(g[0],g[1]),n.drawImage(i,s,o,l,h,0,0,l,h)):n.drawImage(i,s,o,l,h,c,d,l*g[0],h*g[1]),n.restore()}function jE(n,t){const e=n.contextInstructions;for(let i=0,s=e.length;i<s;i+=2)Array.isArray(e[i+1])?t[e[i]].apply(t,e[i+1]):t[e[i]]=e[i+1]}class au{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=Ks(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new au({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Mt()}getImage(t){return Mt()}getHitDetectionImage(){return Mt()}getPixelRatio(t){return 1}getImageState(){return Mt()}getImageSize(){return Mt()}getOrigin(){return Mt()}getSize(){return Mt()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=Ks(t)}listenImageChange(t){Mt()}load(){Mt()}unlistenImageChange(t){Mt()}ready(){return Promise.resolve()}}class ou extends au{constructor(t){super({opacity:1,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=t.fill!==void 0?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius=t.radius,this.radius2_=t.radius2,this.angle_=t.angle!==void 0?t.angle:0,this.stroke_=t.stroke!==void 0?t.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?ut.LOADING:ut.LOADED,this.imageState_===ut.LOADING&&this.ready().then(()=>this.imageState_=ut.LOADED),this.render()}clone(){const t=this.getScale(),e=new ou({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}getAnchor(){const t=this.size_,e=this.getDisplacement(),i=this.getScaleArray();return[t[0]/2-e[0]/i[0],t[1]/2+e[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(t){var o,l;const e=(o=this.fill_)==null?void 0:o.getKey(),i=`${t},${this.angle_},${this.radius},${this.radius2_},${this.points_},${e}`+Object.values(this.renderOptions_).join(",");let s=(l=En.get(i,null,null))==null?void 0:l.getImage(1);if(!s){const h=this.renderOptions_,c=Math.ceil(h.size*t),d=Me(c,c);this.draw_(h,d,t),s=d.canvas,En.set(i,null,null,new Qp(s,void 0,null,ut.LOADED,null))}return s}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,e,i){if(e===0||this.points_===1/0||t!=="bevel"&&t!=="miter")return e;let s=this.radius,o=this.radius2_===void 0?s:this.radius2_;if(s<o){const b=s;s=o,o=b}const l=this.radius2_===void 0?this.points_:this.points_*2,h=2*Math.PI/l,c=o*Math.sin(h),d=Math.sqrt(o*o-c*c),g=s-d,_=Math.sqrt(c*c+g*g),y=_/c;if(t==="miter"&&y<=i)return y*e;const v=e/2/y,E=e/2*(g/_),w=Math.sqrt((s+v)*(s+v)+E*E)-s;if(this.radius2_===void 0||t==="bevel")return w*2;const S=s*Math.sin(h),R=Math.sqrt(s*s-S*S),O=o-R,k=Math.sqrt(S*S+O*O)/S;if(k<=i){const b=k*e/2-o-s;return 2*Math.max(w,b)}return w*2}createRenderOptions(){let t=Zs,e=Qs,i=0,s=null,o=0,l,h=0;this.stroke_&&(l=$n(this.stroke_.getColor()??So),h=this.stroke_.getWidth()??Io,s=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset()??0,e=this.stroke_.getLineJoin()??Qs,t=this.stroke_.getLineCap()??Zs,i=this.stroke_.getMiterLimit()??Co);const c=this.calculateLineJoinSize_(e,h,i),d=Math.max(this.radius,this.radius2_||0),g=Math.ceil(2*d+c);return{strokeStyle:l,strokeWidth:h,size:g,lineCap:t,lineDash:s,lineDashOffset:o,lineJoin:e,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[t,t]}draw_(t,e,i){if(e.scale(i,i),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){let s=this.fill_.getColor();s===null&&(s=Ze),e.fillStyle=$n(s),e.fill()}t.strokeStyle&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}createHitDetectionCanvas_(t){let e;if(this.fill_){let i=this.fill_.getColor(),s=0;typeof i=="string"&&(i=Hs(i)),i===null?s=1:Array.isArray(i)&&(s=i.length===4?i[3]:1),s===0&&(e=Me(t.size,t.size),this.drawHitDetectionCanvas_(t,e))}return e?e.canvas:this.getImage(1)}createPath_(t){let e=this.points_;const i=this.radius;if(e===1/0)t.arc(0,0,i,0,2*Math.PI);else{const s=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(e*=2);const o=this.angle_-Math.PI/2,l=2*Math.PI/e;for(let h=0;h<e;h++){const c=o+h*l,d=h%2===0?i:s;t.lineTo(d*Math.cos(c),d*Math.sin(c))}t.closePath()}}drawHitDetectionCanvas_(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=Ze,e.fill(),t.strokeStyle&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class lu extends ou{constructor(t){t=t||{radius:5},super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:t.scale!==void 0?t.scale:1,rotation:t.rotation!==void 0?t.rotation:0,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),e=new lu({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}setRadius(t){this.radius=t,this.render()}}class sa{constructor(t){t=t||{},this.patternImage_=null,this.color_=null,t.color!==void 0&&this.setColor(t.color)}clone(){const t=this.getColor();return new sa({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){if(t!==null&&typeof t=="object"&&"src"in t){const e=Nd(null,t.src,"anonymous",void 0,t.offset?null:t.color?t.color:null,!(t.offset&&t.size));e.ready().then(()=>{this.patternImage_=null}),e.getImageState()===ut.IDLE&&e.load(),e.getImageState()===ut.LOADING&&(this.patternImage_=e)}this.color_=t}getKey(){const t=this.getColor();return t?t instanceof CanvasPattern||t instanceof CanvasGradient?ie(t):typeof t=="object"&&"src"in t?t.src+":"+t.offset:Hs(t).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function __(n,t,e,i){return e!==void 0&&i!==void 0?[e/n,i/t]:e!==void 0?e/n:i!==void 0?i/t:1}class hu extends au{constructor(t){t=t||{};const e=t.opacity!==void 0?t.opacity:1,i=t.rotation!==void 0?t.rotation:0,s=t.scale!==void 0?t.scale:1,o=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:e,rotation:i,scale:s,displacement:t.displacement!==void 0?t.displacement:[0,0],rotateWithView:o,declutterMode:t.declutterMode}),this.anchor_=t.anchor!==void 0?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=t.anchorOrigin!==void 0?t.anchorOrigin:"top-left",this.anchorXUnits_=t.anchorXUnits!==void 0?t.anchorXUnits:"fraction",this.anchorYUnits_=t.anchorYUnits!==void 0?t.anchorYUnits:"fraction",this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null;const l=t.img!==void 0?t.img:null;let h=t.src;$t(!(h!==void 0&&l),"`image` and `src` cannot be provided at the same time"),(h===void 0||h.length===0)&&l&&(h=l.src||ie(l)),$t(h!==void 0&&h.length>0,"A defined and non-empty `src` or `image` must be provided"),$t(!((t.width!==void 0||t.height!==void 0)&&t.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let c;if(t.src!==void 0?c=ut.IDLE:l!==void 0&&("complete"in l?l.complete?c=l.src?ut.LOADED:ut.IDLE:c=ut.LOADING:c=ut.LOADED),this.color_=t.color!==void 0?Hs(t.color):null,this.iconImage_=Nd(l,h,this.crossOrigin_,c,this.color_),this.offset_=t.offset!==void 0?t.offset:[0,0],this.offsetOrigin_=t.offsetOrigin!==void 0?t.offsetOrigin:"top-left",this.origin_=null,this.size_=t.size!==void 0?t.size:null,this.initialOptions_,t.width!==void 0||t.height!==void 0){let d,g;if(t.size)[d,g]=t.size;else{const _=this.getImage(1);if(_.width&&_.height)d=_.width,g=_.height;else if(_ instanceof HTMLImageElement){this.initialOptions_=t;const y=()=>{if(this.unlistenImageChange(y),!this.initialOptions_)return;const v=this.iconImage_.getSize();this.setScale(__(v[0],v[1],t.width,t.height))};this.listenImageChange(y);return}}d!==void 0&&this.setScale(__(d,g,t.width,t.height))}}clone(){let t,e,i;return this.initialOptions_?(e=this.initialOptions_.width,i=this.initialOptions_.height):(t=this.getScale(),t=Array.isArray(t)?t.slice():t),new hu({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:e,height:i,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const s=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!s)return null;t=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(t[0]*=s[0]),this.anchorYUnits_=="fraction"&&(t[1]*=s[1])}if(this.anchorOrigin_!="top-left"){if(!s)return null;t===this.anchor_&&(t=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(t[0]=-t[0]+s[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(t[1]=-t[1]+s[1])}this.normalizedAnchor_=t}const e=this.getDisplacement(),i=this.getScaleArray();return[t[0]-e[0]/i[0],t[1]+e[1]/i[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if(this.offsetOrigin_!="top-left"){const e=this.getSize(),i=this.iconImage_.getSize();if(!e||!i)return null;t=t.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(t[0]=i[0]-e[0]-t[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(t[1]=i[1]-e[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const t=this.getScaleArray();if(this.size_)return this.size_[0]*t[0];if(this.iconImage_.getImageState()==ut.LOADED)return this.iconImage_.getSize()[0]*t[0]}getHeight(){const t=this.getScaleArray();if(this.size_)return this.size_[1]*t[1];if(this.iconImage_.getImageState()==ut.LOADED)return this.iconImage_.getSize()[1]*t[1]}setScale(t){delete this.initialOptions_,super.setScale(t)}listenImageChange(t){this.iconImage_.addEventListener(Ct.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(Ct.CHANGE,t)}ready(){return this.iconImage_.ready()}}class Wo{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new Wo({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}class sr{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=p_,t.geometry!==void 0&&this.setGeometry(t.geometry),this.fill_=t.fill!==void 0?t.fill:null,this.image_=t.image!==void 0?t.image:null,this.renderer_=t.renderer!==void 0?t.renderer:null,this.hitDetectionRenderer_=t.hitDetectionRenderer!==void 0?t.hitDetectionRenderer:null,this.stroke_=t.stroke!==void 0?t.stroke:null,this.text_=t.text!==void 0?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&typeof t=="object"&&(t=t.clone()),new sr({geometry:t??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){typeof t=="function"?this.geometryFunction_=t:typeof t=="string"?this.geometryFunction_=function(e){return e.get(t)}:t?t!==void 0&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=p_,this.geometry_=t}setZIndex(t){this.zIndex_=t}}function WE(n){let t;if(typeof n=="function")t=n;else{let e;Array.isArray(n)?e=n:($t(typeof n.getZIndex=="function","Expected an `Style` or an array of `Style`"),e=[n]),t=function(){return e}}return t}let mf=null;function ey(n,t){if(!mf){const e=new sa({color:"rgba(255,255,255,0.4)"}),i=new Wo({color:"#3399CC",width:1.25});mf=[new sr({image:new lu({fill:e,stroke:i,radius:5}),fill:e,stroke:i})]}return mf}function p_(n){return n.getGeometry()}const BE="#333";class Dd{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.keepUpright_=t.keepUpright,this.scale_=t.scale,this.scaleArray_=Ks(t.scale!==void 0?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.repeat_=t.repeat,this.textBaseline_=t.textBaseline,this.fill_=t.fill!==void 0?t.fill:new sa({color:BE}),this.maxAngle_=t.maxAngle!==void 0?t.maxAngle:Math.PI/4,this.placement_=t.placement!==void 0?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=t.stroke!==void 0?t.stroke:null,this.offsetX_=t.offsetX!==void 0?t.offsetX:0,this.offsetY_=t.offsetY!==void 0?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=t.padding===void 0?null:t.padding,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new Dd({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRepeat(t){this.repeat_=t}setRotateWithView(t){this.rotateWithView_=t}setKeepUpright(t){this.keepUpright_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=Ks(t!==void 0?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}}function UE(n){return!0}function XE(n){const t=Yp(),e=VE(n,t),i=Hp();return function(s,o){if(i.properties=s.getPropertiesInternal(),i.resolution=o,t.featureId){const l=s.getId();l!==void 0?i.featureId=l:i.featureId=null}return t.geometryType&&(i.geometryType=qp(s.getGeometry())),e(i)}}function y_(n){const t=Yp(),e=n.length,i=new Array(e);for(let l=0;l<e;++l)i[l]=Gf(n[l],t);const s=Hp(),o=new Array(e);return function(l,h){if(s.properties=l.getPropertiesInternal(),s.resolution=h,t.featureId){const d=l.getId();d!==void 0?s.featureId=d:s.featureId=null}let c=0;for(let d=0;d<e;++d){const g=i[d](s);g&&(o[c]=g,c+=1)}return o.length=c,o}}function VE(n,t){const e=n.length,i=new Array(e);for(let s=0;s<e;++s){const o=n[s],l="filter"in o?Ei(o.filter,ze,t):UE;let h;if(Array.isArray(o.style)){const c=o.style.length;h=new Array(c);for(let d=0;d<c;++d)h[d]=Gf(o.style[d],t)}else h=[Gf(o.style,t)];i[s]={filter:l,styles:h}}return function(s){const o=[];let l=!1;for(let h=0;h<e;++h){const c=i[h].filter;if(c(s)&&!(n[h].else&&l)){l=!0;for(const d of i[h].styles){const g=d(s);g&&o.push(g)}}}return o}}function Gf(n,t){const e=To(n,"",t),i=Po(n,"",t),s=$E(n,t),o=YE(n,t),l=Qe(n,"z-index",t);if(!e&&!i&&!s&&!o&&!jr(n))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(n));const h=new sr;return function(c){let d=!0;if(e){const g=e(c);g&&(d=!1),h.setFill(g)}if(i){const g=i(c);g&&(d=!1),h.setStroke(g)}if(s){const g=s(c);g&&(d=!1),h.setText(g)}if(o){const g=o(c);g&&(d=!1),h.setImage(g)}return l&&h.setZIndex(l(c)),d?null:h}}function To(n,t,e){let i;if(t+"fill-pattern-src"in n)i=ZE(n,t+"fill-",e);else{if(n[t+"fill-color"]==="none")return o=>null;i=Fd(n,t+"fill-color",e)}if(!i)return null;const s=new sa;return function(o){const l=i(o);return l===Pd?null:(s.setColor(l),s)}}function Po(n,t,e){const i=Qe(n,t+"stroke-width",e),s=Fd(n,t+"stroke-color",e);if(!i&&!s)return null;const o=mi(n,t+"stroke-line-cap",e),l=mi(n,t+"stroke-line-join",e),h=ny(n,t+"stroke-line-dash",e),c=Qe(n,t+"stroke-line-dash-offset",e),d=Qe(n,t+"stroke-miter-limit",e),g=new Wo;return function(_){if(s){const y=s(_);if(y===Pd)return null;g.setColor(y)}if(i&&g.setWidth(i(_)),o){const y=o(_);if(y!=="butt"&&y!=="round"&&y!=="square")throw new Error("Expected butt, round, or square line cap");g.setLineCap(y)}if(l){const y=l(_);if(y!=="bevel"&&y!=="round"&&y!=="miter")throw new Error("Expected bevel, round, or miter line join");g.setLineJoin(y)}return h&&g.setLineDash(h(_)),c&&g.setLineDashOffset(c(_)),d&&g.setMiterLimit(d(_)),g}}function $E(n,t){const e="text-",i=mi(n,e+"value",t);if(!i)return null;const s=To(n,e,t),o=To(n,e+"background-",t),l=Po(n,e,t),h=Po(n,e+"background-",t),c=mi(n,e+"font",t),d=Qe(n,e+"max-angle",t),g=Qe(n,e+"offset-x",t),_=Qe(n,e+"offset-y",t),y=Bs(n,e+"overflow",t),v=mi(n,e+"placement",t),E=Qe(n,e+"repeat",t),M=uu(n,e+"scale",t),w=Bs(n,e+"rotate-with-view",t),S=Qe(n,e+"rotation",t),R=mi(n,e+"align",t),O=mi(n,e+"justify",t),P=mi(n,e+"baseline",t),k=Bs(n,e+"keep-upright",t),b=ny(n,e+"padding",t),B=cu(n,e+"declutter-mode"),G=new Dd({declutterMode:B});return function(W){if(G.setText(i(W)),s&&G.setFill(s(W)),o&&G.setBackgroundFill(o(W)),l&&G.setStroke(l(W)),h&&G.setBackgroundStroke(h(W)),c&&G.setFont(c(W)),d&&G.setMaxAngle(d(W)),g&&G.setOffsetX(g(W)),_&&G.setOffsetY(_(W)),y&&G.setOverflow(y(W)),v){const K=v(W);if(K!=="point"&&K!=="line")throw new Error("Expected point or line for text-placement");G.setPlacement(K)}if(E&&G.setRepeat(E(W)),M&&G.setScale(M(W)),w&&G.setRotateWithView(w(W)),S&&G.setRotation(S(W)),R){const K=R(W);if(K!=="left"&&K!=="center"&&K!=="right"&&K!=="end"&&K!=="start")throw new Error("Expected left, right, center, start, or end for text-align");G.setTextAlign(K)}if(O){const K=O(W);if(K!=="left"&&K!=="right"&&K!=="center")throw new Error("Expected left, right, or center for text-justify");G.setJustify(K)}if(P){const K=P(W);if(K!=="bottom"&&K!=="top"&&K!=="middle"&&K!=="alphabetic"&&K!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");G.setTextBaseline(K)}return b&&G.setPadding(b(W)),k&&G.setKeepUpright(k(W)),G}}function YE(n,t){return"icon-src"in n?qE(n,t):"shape-points"in n?HE(n,t):"circle-radius"in n?KE(n,t):null}function qE(n,t){const e="icon-",i=e+"src",s=iy(n[i],i),o=Fh(n,e+"anchor",t),l=uu(n,e+"scale",t),h=Qe(n,e+"opacity",t),c=Fh(n,e+"displacement",t),d=Qe(n,e+"rotation",t),g=Bs(n,e+"rotate-with-view",t),_=x_(n,e+"anchor-origin"),y=E_(n,e+"anchor-x-units"),v=E_(n,e+"anchor-y-units"),E=eM(n,e+"color"),M=JE(n,e+"cross-origin"),w=tM(n,e+"offset"),S=x_(n,e+"offset-origin"),R=bh(n,e+"width"),O=bh(n,e+"height"),P=QE(n,e+"size"),k=cu(n,e+"declutter-mode"),b=new hu({src:s,anchorOrigin:_,anchorXUnits:y,anchorYUnits:v,color:E,crossOrigin:M,offset:w,offsetOrigin:S,height:O,width:R,size:P,declutterMode:k});return function(B){return h&&b.setOpacity(h(B)),c&&b.setDisplacement(c(B)),d&&b.setRotation(d(B)),g&&b.setRotateWithView(g(B)),l&&b.setScale(l(B)),o&&b.setAnchor(o(B)),b}}function HE(n,t){const e="shape-",i=e+"points",s=e+"radius",o=jf(n[i],i),l=jf(n[s],s),h=To(n,e,t),c=Po(n,e,t),d=uu(n,e+"scale",t),g=Fh(n,e+"displacement",t),_=Qe(n,e+"rotation",t),y=Bs(n,e+"rotate-with-view",t),v=bh(n,e+"radius2"),E=bh(n,e+"angle"),M=cu(n,e+"declutter-mode"),w=new ou({points:o,radius:l,radius2:v,angle:E,declutterMode:M});return function(S){return h&&w.setFill(h(S)),c&&w.setStroke(c(S)),g&&w.setDisplacement(g(S)),_&&w.setRotation(_(S)),y&&w.setRotateWithView(y(S)),d&&w.setScale(d(S)),w}}function KE(n,t){const e="circle-",i=To(n,e,t),s=Po(n,e,t),o=Qe(n,e+"radius",t),l=uu(n,e+"scale",t),h=Fh(n,e+"displacement",t),c=Qe(n,e+"rotation",t),d=Bs(n,e+"rotate-with-view",t),g=cu(n,e+"declutter-mode"),_=new lu({radius:5,declutterMode:g});return function(y){return o&&_.setRadius(o(y)),i&&_.setFill(i(y)),s&&_.setStroke(s(y)),h&&_.setDisplacement(h(y)),c&&_.setRotation(c(y)),d&&_.setRotateWithView(d(y)),l&&_.setScale(l(y)),_}}function Qe(n,t,e){if(!(t in n))return;const i=Ei(n[t],Pt,e);return function(s){return jf(i(s),t)}}function mi(n,t,e){if(!(t in n))return null;const i=Ei(n[t],Ke,e);return function(s){return iy(i(s),t)}}function ZE(n,t,e){const i=mi(n,t+"pattern-src",e),s=v_(n,t+"pattern-offset",e),o=v_(n,t+"pattern-size",e),l=Fd(n,t+"color",e);return function(h){return{src:i(h),offset:s&&s(h),size:o&&o(h),color:l&&l(h)}}}function Bs(n,t,e){if(!(t in n))return null;const i=Ei(n[t],ze,e);return function(s){const o=i(s);if(typeof o!="boolean")throw new Error(`Expected a boolean for ${t}`);return o}}function Fd(n,t,e){if(!(t in n))return null;const i=Ei(n[t],An,e);return function(s){return ry(i(s),t)}}function ny(n,t,e){if(!(t in n))return null;const i=Ei(n[t],Br,e);return function(s){return Bo(i(s),t)}}function Fh(n,t,e){if(!(t in n))return null;const i=Ei(n[t],Br,e);return function(s){const o=Bo(i(s),t);if(o.length!==2)throw new Error(`Expected two numbers for ${t}`);return o}}function v_(n,t,e){if(!(t in n))return null;const i=Ei(n[t],Br,e);return function(s){return sy(i(s),t)}}function uu(n,t,e){if(!(t in n))return null;const i=Ei(n[t],Br|Pt,e);return function(s){return nM(i(s),t)}}function bh(n,t){const e=n[t];if(e!==void 0){if(typeof e!="number")throw new Error(`Expected a number for ${t}`);return e}}function QE(n,t){const e=n[t];if(e!==void 0){if(typeof e=="number")return Ks(e);if(!Array.isArray(e))throw new Error(`Expected a number or size array for ${t}`);if(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number")throw new Error(`Expected a number or size array for ${t}`);return e}}function JE(n,t){const e=n[t];if(e!==void 0){if(typeof e!="string")throw new Error(`Expected a string for ${t}`);return e}}function x_(n,t){const e=n[t];if(e!==void 0){if(e!=="bottom-left"&&e!=="bottom-right"&&e!=="top-left"&&e!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${t}`);return e}}function E_(n,t){const e=n[t];if(e!==void 0){if(e!=="pixels"&&e!=="fraction")throw new Error(`Expected pixels or fraction for ${t}`);return e}}function tM(n,t){const e=n[t];if(e!==void 0)return Bo(e,t)}function cu(n,t){const e=n[t];if(e!==void 0){if(typeof e!="string")throw new Error(`Expected a string for ${t}`);if(e!=="declutter"&&e!=="obstacle"&&e!=="none")throw new Error(`Expected declutter, obstacle, or none for ${t}`);return e}}function eM(n,t){const e=n[t];if(e!==void 0)return ry(e,t)}function Bo(n,t){if(!Array.isArray(n))throw new Error(`Expected an array for ${t}`);const e=n.length;for(let i=0;i<e;++i)if(typeof n[i]!="number")throw new Error(`Expected an array of numbers for ${t}`);return n}function iy(n,t){if(typeof n!="string")throw new Error(`Expected a string for ${t}`);return n}function jf(n,t){if(typeof n!="number")throw new Error(`Expected a number for ${t}`);return n}function ry(n,t){if(typeof n=="string")return n;const e=Bo(n,t),i=e.length;if(i<3||i>4)throw new Error(`Expected a color with 3 or 4 values for ${t}`);return e}function sy(n,t){const e=Bo(n,t);if(e.length!==2)throw new Error(`Expected an array of two numbers for ${t}`);return e}function nM(n,t){return typeof n=="number"?n:sy(n,t)}const M_={RENDER_ORDER:"renderOrder"};class ay extends su{constructor(t){t=t||{};const e=Object.assign({},t);delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,super(e),this.declutter_=t.declutter?String(t.declutter):void 0,this.renderBuffer_=t.renderBuffer!==void 0?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=t.updateWhileAnimating!==void 0?t.updateWhileAnimating:!1,this.updateWhileInteracting_=t.updateWhileInteracting!==void 0?t.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(M_.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t,e){const i=this.getDeclutter();i in t.declutter||(t.declutter[i]=new Xp(9)),this.getRenderer().renderDeclutter(t,e)}setRenderOrder(t){this.set(M_.RENDER_ORDER,t)}setStyle(t){this.style_=t===void 0?ey:t;const e=iM(t);this.styleFunction_=t===null?void 0:WE(e),this.changed()}setDeclutter(t){this.declutter_=t?String(t):void 0,this.changed()}}function iM(n){if(n===void 0)return ey;if(!n)return null;if(typeof n=="function"||n instanceof sr)return n;if(!Array.isArray(n))return y_([n]);if(n.length===0)return[];const t=n.length,e=n[0];if(e instanceof sr){const s=new Array(t);for(let o=0;o<t;++o){const l=n[o];if(!(l instanceof sr))throw new Error("Expected a list of style instances");s[o]=l}return s}if("style"in e){const s=new Array(t);for(let o=0;o<t;++o){const l=n[o];if(!("style"in l))throw new Error("Expected a list of rules with a style property");s[o]=l}return XE(s)}return y_(n)}class oy extends xi{constructor(t,e,i,s){super(t),this.inversePixelTransform=e,this.frameState=i,this.context=s}}class rM extends Hf{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,e){Mt()}calculateMatrices2D(t){const e=t.viewState,i=t.coordinateToPixelTransform,s=t.pixelToCoordinateTransform;vi(i,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),Sp(s,i)}forEachFeatureAtCoordinate(t,e,i,s,o,l,h,c){let d;const g=e.viewState;function _(P,k,b,B){return o.call(l,k,P?b:null,B)}const y=g.projection,v=gp(t.slice(),y),E=[[0,0]];if(y.canWrapX()&&s){const P=y.getExtent(),k=Nt(P);E.push([-k,0],[k,0])}const M=e.layerStatesArray,w=M.length,S=[],R=[];for(let P=0;P<E.length;P++)for(let k=w-1;k>=0;--k){const b=M[k],B=b.layer;if(B.hasRenderer()&&Id(b,g)&&h.call(c,B)){const G=B.getRenderer(),W=B.getSource();if(G&&W){const K=W.getWrapX()?v:t,rt=_.bind(null,b.managed);R[0]=K[0]+E[P][0],R[1]=K[1]+E[P][1],d=G.forEachFeatureAtCoordinate(R,e,i,rt,S)}if(d)return d}}if(S.length===0)return;const O=1/S.length;return S.forEach((P,k)=>P.distanceSq+=k*O),S.sort((P,k)=>P.distanceSq-k.distanceSq),S.some(P=>d=P.callback(P.feature,P.layer,P.geometry)),d}hasFeatureAtCoordinate(t,e,i,s,o,l){return this.forEachFeatureAtCoordinate(t,e,i,s,po,this,o,l)!==void 0}getMap(){return this.map_}renderFrame(t){Mt()}scheduleExpireIconCache(t){En.canExpireCache()&&t.postRenderFunctions.push(sM)}}function sM(n,t){En.expire()}class aM extends rM{constructor(t){super(t),this.fontChangeListenerKey_=At(gi,Vs.PROPERTYCHANGE,t.redrawText,t),this.element_=document.createElement("div");const e=this.element_.style;e.position="absolute",e.width="100%",e.height="100%",e.zIndex="0",this.element_.className=ru+" ol-layers";const i=t.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(t,e){const i=this.getMap();if(i.hasListener(t)){const s=new oy(t,void 0,e);i.dispatchEvent(s)}}disposeInternal(){Kt(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(t){if(!t){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(t),this.dispatchRenderEvent(xn.PRECOMPOSE,t);const e=t.layerStatesArray.sort((h,c)=>h.zIndex-c.zIndex);e.some(h=>h.layer instanceof ay&&h.layer.getDeclutter())&&(t.declutter={});const s=t.viewState;this.children_.length=0;const o=[];let l=null;for(let h=0,c=e.length;h<c;++h){const d=e[h];t.layerIndex=h;const g=d.layer,_=g.getSourceState();if(!Id(d,s)||_!="ready"&&_!="undefined"){g.unrender();continue}const y=g.render(t,l);y&&(y!==l&&(this.children_.push(y),l=y),o.push(d))}this.declutter(t,o),Rx(this.element_,this.children_),this.dispatchRenderEvent(xn.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}declutter(t,e){if(t.declutter){for(let i=e.length-1;i>=0;--i){const s=e[i],o=s.layer;o.getDeclutter()&&o.renderDeclutter(t,s)}e.forEach(i=>i.layer.renderDeferred(t))}}}function ly(n){if(n instanceof su){n.setMapInternal(null);return}n instanceof ra&&n.getLayers().forEach(ly)}function hy(n,t){if(n instanceof su){n.setMapInternal(t);return}if(n instanceof ra){const e=n.getLayers().getArray();for(let i=0,s=e.length;i<s;++i)hy(e[i],t)}}let oM=class extends Zn{constructor(t){super(),t=t||{},this.on,this.once,this.un;const e=lM(t);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=t.maxTilesLoading!==void 0?t.maxTilesLoading:16,this.pixelRatio_=t.pixelRatio!==void 0?t.pixelRatio:ip,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=kn(),this.pixelToCoordinateTransform_=kn(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=e.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=e.controls||Lx(),this.interactions=e.interactions||Kx({onFocusOnly:!0}),this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new i2(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Ie.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(Ie.VIEW,this.handleViewChanged_),this.addChangeListener(Ie.SIZE,this.handleSizeChanged_),this.addChangeListener(Ie.TARGET,this.handleTargetChanged_),this.setProperties(e.values);const i=this;t.view&&!(t.view instanceof Un)&&t.view.then(function(s){i.setView(new Un(s))}),this.controls.addEventListener(He.ADD,s=>{s.element.setMap(this)}),this.controls.addEventListener(He.REMOVE,s=>{s.element.setMap(null)}),this.interactions.addEventListener(He.ADD,s=>{s.element.setMap(this)}),this.interactions.addEventListener(He.REMOVE,s=>{s.element.setMap(null)}),this.overlays_.addEventListener(He.ADD,s=>{this.addOverlayInternal_(s.element)}),this.overlays_.addEventListener(He.REMOVE,s=>{const o=s.element.getId();o!==void 0&&delete this.overlayIdIndex_[o.toString()],s.element.setMap(null)}),this.controls.forEach(s=>{s.setMap(this)}),this.interactions.forEach(s=>{s.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){hy(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const e=t.getId();e!==void 0&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,e,i){if(!this.frameState_||!this.renderer_)return;const s=this.getCoordinateFromPixelInternal(t);i=i!==void 0?i:{};const o=i.hitTolerance!==void 0?i.hitTolerance:0,l=i.layerFilter!==void 0?i.layerFilter:po,h=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(s,this.frameState_,o,h,e,null,l,null)}getFeaturesAtPixel(t,e){const i=[];return this.forEachFeatureAtPixel(t,function(s){i.push(s)},e),i}getAllLayers(){const t=[];function e(i){i.forEach(function(s){s instanceof ra?e(s.getLayers()):t.push(s)})}return e(this.getLayers()),t}hasFeatureAtPixel(t,e){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(t);e=e!==void 0?e:{};const s=e.layerFilter!==void 0?e.layerFilter:po,o=e.hitTolerance!==void 0?e.hitTolerance:0,l=e.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,o,l,s,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const i=this.viewport_.getBoundingClientRect(),s=this.getSize(),o=i.width/s[0],l=i.height/s[1],h="changedTouches"in t?t.changedTouches[0]:t;return[(h.clientX-i.left)/o,(h.clientY-i.top)/l]}getTarget(){return this.get(Ie.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){return Of(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const e=this.frameState_;return e?ve(e.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const e=this.overlayIdIndex_[t.toString()];return e!==void 0?e:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Ie.LAYERGROUP)}setLayers(t){const e=this.getLayerGroup();if(t instanceof Vn){e.setLayers(t);return}const i=e.getLayers();i.clear(),i.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,i=t.length;e<i;++e){const s=t[e];if(!s.visible)continue;const o=s.layer.getRenderer();if(o&&!o.ready)return!0;const l=s.layer.getSource();if(l&&l.loading)return!0}return!1}getPixelFromCoordinate(t){const e=di(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)}getPixelFromCoordinateInternal(t){const e=this.frameState_;return e?ve(e.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Ie.SIZE)}getView(){return this.get(Ie.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,e,i,s){return r2(this.frameState_,t,e,i,s)}handleBrowserEvent(t,e){e=e||t.type;const i=new Zi(e,this,t);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(t){if(!this.frameState_)return;const e=t.originalEvent,i=e.type;if(i===Sf.POINTERDOWN||i===Ct.WHEEL||i===Ct.KEYDOWN){const s=this.getOwnerDocument(),o=this.viewport_.getRootNode?this.viewport_.getRootNode():s,l=e.target,h=o instanceof ShadowRoot?o.host===l?o.host.ownerDocument:o:o===s?s.documentElement:o;if(this.overlayContainerStopEvent_.contains(l)||!h.contains(l))return}if(t.frameState=this.frameState_,this.dispatchEvent(t)!==!1){const s=this.getInteractions().getArray().slice();for(let o=s.length-1;o>=0;o--){const l=s[o];if(l.getMap()!==this||!l.getActive()||!this.getTargetElement())continue;if(!l.handleEvent(t)||t.propagationStopped)break}}}handlePostRender(){const t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){let s=this.maxTilesLoading_,o=s;if(t){const l=t.viewHints;if(l[de.ANIMATING]||l[de.INTERACTING]){const h=Date.now()-t.time>8;s=h?0:8,o=h?0:2}}e.getTilesLoading()<s&&(e.reprioritize(),e.loadMoreTiles(s,o))}t&&this.renderer_&&!t.animate&&(this.renderComplete_?(this.hasListener(xn.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(xn.RENDERCOMPLETE,t),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Ls(Qi.LOADEND,this,t)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Ls(Qi.LOADSTART,this,t))));const i=this.postRenderFunctions_;if(t)for(let s=0,o=i.length;s<o;++s)i[s](this,t);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,s=this.targetChangeHandlerKeys_.length;i<s;++i)Kt(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(Ct.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Ct.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const i=this.targetElement_.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.unobserve(i.host),this.setSize(void 0)}const t=this.getTarget(),e=typeof t=="string"?document.getElementById(t):t;if(this.targetElement_=e,!e)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{e.appendChild(this.viewport_),this.renderer_||(this.renderer_=new aM(this)),this.mapBrowserEventHandler_=new e2(this,this.moveTolerance_);for(const o in Qt)this.mapBrowserEventHandler_.addEventListener(Qt[o],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(Ct.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Ct.WHEEL,this.boundHandleBrowserEvent_,op?{passive:!1}:!1);let i;if(this.keyboardEventTarget_)i=this.keyboardEventTarget_;else{const o=e.getRootNode();i=o instanceof ShadowRoot?o.host:e}this.targetChangeHandlerKeys_=[At(i,Ct.KEYDOWN,this.handleBrowserEvent,this),At(i,Ct.KEYPRESS,this.handleBrowserEvent,this)];const s=e.getRootNode();s instanceof ShadowRoot&&this.resizeObserver_.observe(s.host),this.resizeObserver_.observe(e)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Kt(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Kt(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=At(t,Vs.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=At(t,Ct.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Kt),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new Ji("addlayer",t)),this.layerGroupPropertyListenerKeys_=[At(t,Vs.PROPERTYCHANGE,this.render,this),At(t,Ct.CHANGE,this.render,this),At(t,"addlayer",this.handleLayerAdd_,this),At(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,i=t.length;e<i;++e){const s=t[e].layer;s.hasRenderer()&&s.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){ly(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const e=this.getSize(),i=this.getView(),s=this.frameState_;let o=null;if(e!==void 0&&c_(e)&&i&&i.isDef()){const l=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),h=i.getState();if(o={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:Rh(h.center,h.resolution,h.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:h,viewHints:l,wantedTiles:{},mapId:ie(this),renderTargets:{}},h.nextCenter&&h.nextResolution){const c=isNaN(h.nextRotation)?h.rotation:h.nextRotation;o.nextExtent=Rh(h.nextCenter,h.nextResolution,c,e)}}this.frameState_=o,this.renderer_.renderFrame(o),o&&(o.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,o.postRenderFunctions),s&&(!this.previousExtent_||!na(this.previousExtent_)&&!vo(o.extent,this.previousExtent_))&&(this.dispatchEvent(new Ls(Qi.MOVESTART,this,s)),this.previousExtent_=Fo(this.previousExtent_)),this.previousExtent_&&!o.viewHints[de.ANIMATING]&&!o.viewHints[de.INTERACTING]&&!vo(o.extent,this.previousExtent_)&&(this.dispatchEvent(new Ls(Qi.MOVEEND,this,o)),hp(o.extent,this.previousExtent_))),this.dispatchEvent(new Ls(Qi.POSTRENDER,this,o)),this.renderComplete_=(this.hasListener(Qi.LOADSTART)||this.hasListener(Qi.LOADEND)||this.hasListener(xn.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(t){const e=this.getLayerGroup();e&&this.handleLayerRemove_(new Ji("removelayer",e)),this.set(Ie.LAYERGROUP,t)}setSize(t){this.set(Ie.SIZE,t)}setTarget(t){this.set(Ie.TARGET,t)}setView(t){if(!t||t instanceof Un){this.set(Ie.VIEW,t);return}this.set(Ie.VIEW,new Un);const e=this;t.then(function(i){e.setView(new Un(i))})}updateSize(){const t=this.getTargetElement();let e;if(t){const s=getComputedStyle(t),o=t.offsetWidth-parseFloat(s.borderLeftWidth)-parseFloat(s.paddingLeft)-parseFloat(s.paddingRight)-parseFloat(s.borderRightWidth),l=t.offsetHeight-parseFloat(s.borderTopWidth)-parseFloat(s.paddingTop)-parseFloat(s.paddingBottom)-parseFloat(s.borderBottomWidth);!isNaN(o)&&!isNaN(l)&&(e=[Math.max(0,o),Math.max(0,l)],!c_(e)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&_p("No map visible because the map container's width or height are 0."))}const i=this.getSize();e&&(!i||!cr(e,i))&&(this.setSize(e),this.updateViewportSize_(e))}updateViewportSize_(t){const e=this.getView();e&&e.setViewportSize(t)}};function lM(n){let t=null;n.keyboardEventTarget!==void 0&&(t=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const e={},i=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new ra({layers:n.layers});e[Ie.LAYERGROUP]=i,e[Ie.TARGET]=n.target,e[Ie.VIEW]=n.view instanceof Un?n.view:new Un;let s;n.controls!==void 0&&(Array.isArray(n.controls)?s=new Vn(n.controls.slice()):($t(typeof n.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),s=n.controls));let o;n.interactions!==void 0&&(Array.isArray(n.interactions)?o=new Vn(n.interactions.slice()):($t(typeof n.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),o=n.interactions));let l;return n.overlays!==void 0?Array.isArray(n.overlays)?l=new Vn(n.overlays.slice()):($t(typeof n.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),l=n.overlays):l=new Vn,{controls:s,interactions:o,keyboardEventTarget:t,overlays:l,values:e}}class fu extends Zn{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if(typeof t.getSimplifiedGeometry=="function"){const e=t;this.setGeometry(e)}else{const e=t;this.setProperties(e)}}clone(){const t=new fu(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const e=this.getGeometry();e&&t.setGeometry(e.clone());const i=this.getStyle();return i&&t.setStyle(i),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Kt(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=At(t,Ct.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?hM(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function hM(n){if(typeof n=="function")return n;let t;return Array.isArray(n)?t=n:($t(typeof n.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),t=[n]),function(){return t}}function zh(n,t,e,i,s,o,l){let h,c;const d=(e-t)/i;if(d===1)h=t;else if(d===2)h=t,c=s;else if(d!==0){let g=n[t],_=n[t+1],y=0;const v=[0];for(let w=t+i;w<e;w+=i){const S=n[w],R=n[w+1];y+=Math.sqrt((S-g)*(S-g)+(R-_)*(R-_)),v.push(y),g=S,_=R}const E=s*y,M=Yv(v,E);M<0?(c=(E-v[-M-2])/(v[-M-1]-v[-M-2]),h=t+(-M-2)*i):h=t+M*i}l=l>1?l:2,o=o||new Array(l);for(let g=0;g<l;++g)o[g]=h===void 0?NaN:c===void 0?n[h+g]:ln(n[h+g],n[h+i+g],c);return o}function Wf(n,t,e,i,s,o){if(e==t)return null;let l;if(s<n[t+i-1])return o?(l=n.slice(t,t+i),l[i-1]=s,l):null;if(n[e-1]<s)return o?(l=n.slice(e-i,e),l[i-1]=s,l):null;if(s==n[t+i-1])return n.slice(t,t+i);let h=t/i,c=e/i;for(;h<c;){const y=h+c>>1;s<n[(y+1)*i-1]?c=y:h=y+1}const d=n[h*i-1];if(s==d)return n.slice((h-1)*i,(h-1)*i+i);const g=n[(h+1)*i-1],_=(s-d)/(g-d);l=[];for(let y=0;y<i-1;++y)l.push(ln(n[(h-1)*i+y],n[h*i+y],_));return l.push(s),l}function uM(n,t,e,i,s,o,l){if(l)return Wf(n,t,e[e.length-1],i,s,o);let h;if(s<n[i-1])return o?(h=n.slice(0,i),h[i-1]=s,h):null;if(n[n.length-1]<s)return o?(h=n.slice(n.length-i),h[i-1]=s,h):null;for(let c=0,d=e.length;c<d;++c){const g=e[c];if(t!=g){if(s<n[t+i-1])return null;if(s<=n[g-1])return Wf(n,t,g,i,s,!1);t=g}}return null}function uy(n,t,e,i){let s=n[t],o=n[t+1],l=0;for(let h=t+i;h<e;h+=i){const c=n[h],d=n[h+1];l+=Math.sqrt((c-s)*(c-s)+(d-o)*(d-o)),s=c,o=d}return l}class Js extends $r{constructor(t,e){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,e!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendCoordinate(t){qn(this.flatCoordinates,t),this.changed()}clone(){const t=new Js(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,s){return s<Vr(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ud(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),fd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,i,s))}forEachSegment(t){return Np(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,e){return this.layout!="XYM"&&this.layout!="XYZM"?null:(e=e!==void 0?e:!1,Wf(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e))}getCoordinates(){return er(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,e){return zh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)}getLength(){return uy(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const e=[];return e.length=nu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new Js(e,"XY")}getType(){return"LineString"}intersectsExtent(t){return iu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,this.getExtent())}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=eu(this.flatCoordinates,0,t,this.stride),this.changed()}}class cy{drawCustom(t,e,i,s,o){}drawGeometry(t){}setStyle(t){}drawCircle(t,e,i){}drawFeature(t,e,i){}drawGeometryCollection(t,e,i){}drawLineString(t,e,i){}drawMultiLineString(t,e,i){}drawMultiPoint(t,e,i){}drawMultiPolygon(t,e,i){}drawPoint(t,e,i){}drawPolygon(t,e,i){}drawText(t,e,i){}setFillStrokeStyle(t,e){}setImageStyle(t,e){}setTextStyle(t,e){}}class cM extends cy{constructor(t,e,i,s,o,l,h){super(),this.context_=t,this.pixelRatio_=e,this.extent_=i,this.transform_=s,this.transformRotation_=s?lp(Math.atan2(s[1],s[0]),10):0,this.viewRotation_=o,this.squaredTolerance_=l,this.userTransform_=h,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=kn()}drawImages_(t,e,i,s){if(!this.image_)return;const o=rr(t,e,i,s,this.transform_,this.pixelCoordinates_),l=this.context_,h=this.tmpLocalTransform_,c=l.globalAlpha;this.imageOpacity_!=1&&(l.globalAlpha=c*this.imageOpacity_);let d=this.imageRotation_;this.transformRotation_===0&&(d-=this.viewRotation_),this.imageRotateWithView_&&(d+=this.viewRotation_);for(let g=0,_=o.length;g<_;g+=2){const y=o[g]-this.imageAnchorX_,v=o[g+1]-this.imageAnchorY_;if(d!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const E=y+this.imageAnchorX_,M=v+this.imageAnchorY_;vi(h,E,M,1,1,d,-E,-M),l.save(),l.transform.apply(l,h),l.translate(E,M),l.scale(this.imageScale_[0],this.imageScale_[1]),l.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),l.restore()}else l.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,y,v,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(l.globalAlpha=c)}drawText_(t,e,i,s){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const o=rr(t,e,i,s,this.transform_,this.pixelCoordinates_),l=this.context_;let h=this.textRotation_;for(this.transformRotation_===0&&(h-=this.viewRotation_),this.textRotateWithView_&&(h+=this.viewRotation_);e<i;e+=s){const c=o[e]+this.textOffsetX_,d=o[e+1]+this.textOffsetY_;h!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(l.save(),l.translate(c-this.textOffsetX_,d-this.textOffsetY_),l.rotate(h),l.translate(this.textOffsetX_,this.textOffsetY_),l.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&l.strokeText(this.text_,0,0),this.textFillState_&&l.fillText(this.text_,0,0),l.restore()):(this.textStrokeState_&&l.strokeText(this.text_,c,d),this.textFillState_&&l.fillText(this.text_,c,d))}}moveToLineTo_(t,e,i,s,o){const l=this.context_,h=rr(t,e,i,s,this.transform_,this.pixelCoordinates_);l.moveTo(h[0],h[1]);let c=h.length;o&&(c-=2);for(let d=2;d<c;d+=2)l.lineTo(h[d],h[d+1]);return o&&l.closePath(),i}drawRings_(t,e,i,s){for(let o=0,l=i.length;o<l;++o)e=this.moveToLineTo_(t,e,i[o],s,!0);return e}drawCircle(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ge(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=ex(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],s=e[3]-e[1],o=Math.sqrt(i*i+s*s),l=this.context_;l.beginPath(),l.arc(e[0],e[1],o,0,2*Math.PI),this.fillState_&&l.fill(),this.strokeState_&&l.stroke()}this.text_!==""&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t);break}}drawFeature(t,e){const i=e.getGeometryFunction()(t);i&&(this.setStyle(e),this.drawGeometry(i))}drawGeometryCollection(t){const e=t.getGeometriesArray();for(let i=0,s=e.length;i<s;++i)this.drawGeometry(e[i])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),this.text_!==""&&this.drawText_(e,0,e.length,i)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),this.text_!==""&&this.drawText_(e,0,e.length,i)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ge(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(this.text_!==""){const e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getExtent();if(Ge(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,s=t.getFlatCoordinates();let o=0;const l=t.getEnds(),h=t.getStride();i.beginPath();for(let c=0,d=l.length;c<d;++c)o=this.moveToLineTo_(s,o,l[c],h,!1);i.stroke()}if(this.text_!==""){const i=t.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ge(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(this.text_!==""){const e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ge(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getOrientedFlatCoordinates();let s=0;const o=t.getEndss(),l=t.getStride();e.beginPath();for(let h=0,c=o.length;h<c;++h){const d=o[h];s=this.drawRings_(i,s,d,l)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(this.text_!==""){const e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){const e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,e.lineCap=t.lineCap),cr(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const e=this.context_,i=this.contextTextState_,s=t.textAlign?t.textAlign:Ro;i?(i.font!=t.font&&(i.font=t.font,e.font=t.font),i.textAlign!=s&&(i.textAlign=s,e.textAlign=s),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=s,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:s,textBaseline:t.textBaseline})}setFillStrokeStyle(t,e){if(!t)this.fillState_=null;else{const i=t.getColor();this.fillState_={fillStyle:$n(i||Ze)}}if(!e)this.strokeState_=null;else{const i=e.getColor(),s=e.getLineCap(),o=e.getLineDash(),l=e.getLineDashOffset(),h=e.getLineJoin(),c=e.getWidth(),d=e.getMiterLimit(),g=o||_i;this.strokeState_={lineCap:s!==void 0?s:Zs,lineDash:this.pixelRatio_===1?g:g.map(_=>_*this.pixelRatio_),lineDashOffset:(l||pi)*this.pixelRatio_,lineJoin:h!==void 0?h:Qs,lineWidth:(c!==void 0?c:Io)*this.pixelRatio_,miterLimit:d!==void 0?d:Co,strokeStyle:$n(i||So)}}}setImageStyle(t){let e;if(!t||!(e=t.getSize())){this.image_=null;return}const i=t.getPixelRatio(this.pixelRatio_),s=t.getAnchor(),o=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=s[0]*i,this.imageAnchorY_=s[1]*i,this.imageHeight_=e[1]*i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=o[0],this.imageOriginY_=o[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const l=t.getScaleArray();this.imageScale_=[l[0]*this.pixelRatio_/i,l[1]*this.pixelRatio_/i],this.imageWidth_=e[0]*i}setTextStyle(t){if(!t)this.text_="";else{const e=t.getFill();if(!e)this.textFillState_=null;else{const v=e.getColor();this.textFillState_={fillStyle:$n(v||Ze)}}const i=t.getStroke();if(!i)this.textStrokeState_=null;else{const v=i.getColor(),E=i.getLineCap(),M=i.getLineDash(),w=i.getLineDashOffset(),S=i.getLineJoin(),R=i.getWidth(),O=i.getMiterLimit();this.textStrokeState_={lineCap:E!==void 0?E:Zs,lineDash:M||_i,lineDashOffset:w||pi,lineJoin:S!==void 0?S:Qs,lineWidth:R!==void 0?R:Io,miterLimit:O!==void 0?O:Co,strokeStyle:$n(v||So)}}const s=t.getFont(),o=t.getOffsetX(),l=t.getOffsetY(),h=t.getRotateWithView(),c=t.getRotation(),d=t.getScaleArray(),g=t.getText(),_=t.getTextAlign(),y=t.getTextBaseline();this.textState_={font:s!==void 0?s:Jp,textAlign:_!==void 0?_:Ro,textBaseline:y!==void 0?y:Nh},this.text_=g!==void 0?Array.isArray(g)?g.reduce((v,E,M)=>v+=M%2?" ":E,""):g:"",this.textOffsetX_=o!==void 0?this.pixelRatio_*o:0,this.textOffsetY_=l!==void 0?this.pixelRatio_*l:0,this.textRotateWithView_=h!==void 0?h:!1,this.textRotation_=c!==void 0?c:0,this.textScale_=[this.pixelRatio_*d[0],this.pixelRatio_*d[1]]}}}const fM=.5,fy={Point:xM,LineString:pM,Polygon:MM,MultiPoint:EM,MultiLineString:yM,MultiPolygon:vM,GeometryCollection:_M,Circle:gM};function dM(n,t){return parseInt(ie(n),10)-parseInt(ie(t),10)}function w_(n,t){const e=dy(n,t);return e*e}function dy(n,t){return fM*n/t}function gM(n,t,e,i,s){const o=e.getFill(),l=e.getStroke();if(o||l){const c=n.getBuilder(e.getZIndex(),"Circle");c.setFillStrokeStyle(o,l),c.drawCircle(t,i,s)}const h=e.getText();if(h&&h.getText()){const c=n.getBuilder(e.getZIndex(),"Text");c.setTextStyle(h),c.drawText(t,i)}}function C_(n,t,e,i,s,o,l,h){const c=[],d=e.getImage();if(d){let y=!0;const v=d.getImageState();v==ut.LOADED||v==ut.ERROR?y=!1:v==ut.IDLE&&d.load(),y&&c.push(d.ready())}const g=e.getFill();g&&g.loading()&&c.push(g.ready());const _=c.length>0;return _&&Promise.all(c).then(()=>s(null)),mM(n,t,e,i,o,l,h),_}function mM(n,t,e,i,s,o,l){const h=e.getGeometryFunction()(t);if(!h)return;const c=h.simplifyTransformed(i,s);if(e.getRenderer())gy(n,c,e,t,l);else{const g=fy[c.getType()];g(n,c,e,t,l,o)}}function gy(n,t,e,i,s){if(t.getType()=="GeometryCollection"){const l=t.getGeometries();for(let h=0,c=l.length;h<c;++h)gy(n,l[h],e,i,s);return}n.getBuilder(e.getZIndex(),"Default").drawCustom(t,i,e.getRenderer(),e.getHitDetectionRenderer(),s)}function _M(n,t,e,i,s,o){const l=t.getGeometriesArray();let h,c;for(h=0,c=l.length;h<c;++h){const d=fy[l[h].getType()];d(n,l[h],e,i,s,o)}}function pM(n,t,e,i,s){const o=e.getStroke();if(o){const h=n.getBuilder(e.getZIndex(),"LineString");h.setFillStrokeStyle(null,o),h.drawLineString(t,i,s)}const l=e.getText();if(l&&l.getText()){const h=n.getBuilder(e.getZIndex(),"Text");h.setTextStyle(l),h.drawText(t,i,s)}}function yM(n,t,e,i,s){const o=e.getStroke();if(o){const h=n.getBuilder(e.getZIndex(),"LineString");h.setFillStrokeStyle(null,o),h.drawMultiLineString(t,i,s)}const l=e.getText();if(l&&l.getText()){const h=n.getBuilder(e.getZIndex(),"Text");h.setTextStyle(l),h.drawText(t,i,s)}}function vM(n,t,e,i,s){const o=e.getFill(),l=e.getStroke();if(l||o){const c=n.getBuilder(e.getZIndex(),"Polygon");c.setFillStrokeStyle(o,l),c.drawMultiPolygon(t,i,s)}const h=e.getText();if(h&&h.getText()){const c=n.getBuilder(e.getZIndex(),"Text");c.setTextStyle(h),c.drawText(t,i,s)}}function xM(n,t,e,i,s,o){const l=e.getImage(),h=e.getText(),c=h&&h.getText(),d=o&&l&&c?{}:void 0;if(l){if(l.getImageState()!=ut.LOADED)return;const g=n.getBuilder(e.getZIndex(),"Image");g.setImageStyle(l,d),g.drawPoint(t,i,s)}if(c){const g=n.getBuilder(e.getZIndex(),"Text");g.setTextStyle(h,d),g.drawText(t,i,s)}}function EM(n,t,e,i,s,o){const l=e.getImage(),h=l&&l.getOpacity()!==0,c=e.getText(),d=c&&c.getText(),g=o&&h&&d?{}:void 0;if(h){if(l.getImageState()!=ut.LOADED)return;const _=n.getBuilder(e.getZIndex(),"Image");_.setImageStyle(l,g),_.drawMultiPoint(t,i,s)}if(d){const _=n.getBuilder(e.getZIndex(),"Text");_.setTextStyle(c,g),_.drawText(t,i,s)}}function MM(n,t,e,i,s){const o=e.getFill(),l=e.getStroke();if(o||l){const c=n.getBuilder(e.getZIndex(),"Polygon");c.setFillStrokeStyle(o,l),c.drawPolygon(t,i,s)}const h=e.getText();if(h&&h.getText()){const c=n.getBuilder(e.getZIndex(),"Text");c.setTextStyle(h),c.drawText(t,i,s)}}let wM=!1;function CM(n,t,e,i,s,o,l){const h=new XMLHttpRequest;h.open("GET",typeof n=="function"?n(e,i,s):n,!0),t.getType()=="arraybuffer"&&(h.responseType="arraybuffer"),h.withCredentials=wM,h.onload=function(c){if(!h.status||h.status>=200&&h.status<300){const d=t.getType();try{let g;d=="text"||d=="json"?g=h.responseText:d=="xml"?g=h.responseXML||h.responseText:d=="arraybuffer"&&(g=h.response),g?o(t.readFeatures(g,{extent:e,featureProjection:s}),t.readProjection(g)):l()}catch{l()}}else l()},h.onerror=l,h.send()}function S_(n,t){return function(e,i,s,o,l){CM(n,t,e,i,s,(h,c)=>{this.addFeatures(h),o!==void 0&&o(h)},l||$s)}}function SM(n,t){return[[-1/0,-1/0,1/0,1/0]]}function my(n,t,e,i){const s=[];let o=Nn();for(let l=0,h=e.length;l<h;++l){const c=e[l];o=Jf(n,t,c[0],i),s.push((o[0]+o[2])/2,(o[1]+o[3])/2),t=c[c.length-1]}return s}class Gh extends Ip{constructor(t){super(),this.geometries_=t,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Kt),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const t=this.geometries_;for(let e=0,i=t.length;e<i;++e)this.changeEventsKeys_.push(At(t[e],Ct.CHANGE,this.changed,this))}clone(){const t=new Gh(_f(this.geometries_));return t.applyProperties(this),t}closestPointXY(t,e,i,s){if(s<Vr(this.getExtent(),t,e))return s;const o=this.geometries_;for(let l=0,h=o.length;l<h;++l)s=o[l].closestPointXY(t,e,i,s);return s}containsXY(t,e){const i=this.geometries_;for(let s=0,o=i.length;s<o;++s)if(i[s].containsXY(t,e))return!0;return!1}computeExtent(t){Fo(t);const e=this.geometries_;for(let i=0,s=e.length;i<s;++i)cp(t,e[i].getExtent());return t}getGeometries(){return _f(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let t=[];const e=this.geometries_;for(let i=0,s=e.length;i<s;++i)e[i].getType()===this.getType()?t=t.concat(e[i].getGeometriesArrayRecursive()):t.push(e[i]);return t}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=[],i=this.geometries_;let s=!1;for(let o=0,l=i.length;o<l;++o){const h=i[o],c=h.getSimplifiedGeometry(t);e.push(c),c!==h&&(s=!0)}return s?new Gh(e):(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getType(){return"GeometryCollection"}intersectsExtent(t){const e=this.geometries_;for(let i=0,s=e.length;i<s;++i)if(e[i].intersectsExtent(t))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(t,e){const i=this.geometries_;for(let s=0,o=i.length;s<o;++s)i[s].rotate(t,e);this.changed()}scale(t,e,i){i||(i=yi(this.getExtent()));const s=this.geometries_;for(let o=0,l=s.length;o<l;++o)s[o].scale(t,e,i);this.changed()}setGeometries(t){this.setGeometriesArray(_f(t))}setGeometriesArray(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}applyTransform(t){const e=this.geometries_;for(let i=0,s=e.length;i<s;++i)e[i].applyTransform(t);this.changed()}translate(t,e){const i=this.geometries_;for(let s=0,o=i.length;s<o;++s)i[s].translate(t,e);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function _f(n){return n.map(t=>t.clone())}class jh extends $r{constructor(t,e,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,e);else if(e!==void 0&&i)this.setFlatCoordinates(e,t),this.ends_=i;else{const s=t,o=[],l=[];for(let c=0,d=s.length;c<d;++c){const g=s[c];qn(o,g.getFlatCoordinates()),l.push(o.length)}const h=s.length===0?this.getLayout():s[0].getLayout();this.setFlatCoordinates(h,o),this.ends_=l}}appendLineString(t){qn(this.flatCoordinates,t.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new jh(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,i,s){return s<Vr(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(cd(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),dd(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,i,s))}getCoordinateAtM(t,e,i){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(e=e!==void 0?e:!1,i=i!==void 0?i:!1,uM(this.flatCoordinates,0,this.ends_,this.stride,t,e,i))}getCoordinates(){return Eo(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new Js(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){const t=this.flatCoordinates,e=this.ends_,i=this.layout,s=[];let o=0;for(let l=0,h=e.length;l<h;++l){const c=e[l],d=new Js(t.slice(o,c),i);s.push(d),o=c}return s}getFlatMidpoints(){const t=[],e=this.flatCoordinates;let i=0;const s=this.ends_,o=this.stride;for(let l=0,h=s.length;l<h;++l){const c=s[l],d=zh(e,i,c,o,.5);qn(t,d),i=c}return t}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=Ap(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,i),new jh(e,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(t){return ux(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=zo(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}class du extends $r{constructor(t,e){super(),e&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendPoint(t){qn(this.flatCoordinates,t.getFlatCoordinates()),this.changed()}clone(){const t=new du(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,s){if(s<Vr(this.getExtent(),t,e))return s;const o=this.flatCoordinates,l=this.stride;for(let h=0,c=o.length;h<c;h+=l){const d=Gr(t,e,o[h],o[h+1]);if(d<s){s=d;for(let g=0;g<l;++g)i[g]=o[h+g];i.length=l}}return s}getCoordinates(){return er(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){const e=this.flatCoordinates.length/this.stride;return t<0||e<=t?null:new Ah(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){const t=this.flatCoordinates,e=this.layout,i=this.stride,s=[];for(let o=0,l=t.length;o<l;o+=i){const h=new Ah(t.slice(o,o+i),e);s.push(h)}return s}getType(){return"MultiPoint"}intersectsExtent(t){const e=this.flatCoordinates,i=this.stride;for(let s=0,o=e.length;s<o;s+=i){const l=e[s],h=e[s+1];if(Qf(t,l,h))return!0}return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=eu(this.flatCoordinates,0,t,this.stride),this.changed()}}class Wh extends $r{constructor(t,e,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(t[0])){const s=t,o=[],l=[];for(let h=0,c=s.length;h<c;++h){const d=s[h],g=o.length,_=d.getEnds();for(let y=0,v=_.length;y<v;++y)_[y]+=g;qn(o,d.getFlatCoordinates()),l.push(_)}e=s.length===0?this.getLayout():s[0].getLayout(),t=o,i=l}e!==void 0&&i?(this.setFlatCoordinates(e,t),this.endss_=i):this.setCoordinates(t,e)}appendPolygon(t){let e;if(!this.flatCoordinates)this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();else{const i=this.flatCoordinates.length;qn(this.flatCoordinates,t.getFlatCoordinates()),e=t.getEnds().slice();for(let s=0,o=e.length;s<o;++s)e[s]+=i}this.endss_.push(e),this.changed()}clone(){const t=this.endss_.length,e=new Array(t);for(let s=0;s<t;++s)e[s]=this.endss_[s].slice();const i=new Wh(this.flatCoordinates.slice(),this.layout,e);return i.applyProperties(this),i}closestPointXY(t,e,i,s){return s<Vr(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ix(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),rx(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,i,s))}containsXY(t,e){return hx(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)}getArea(){return nx(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let e;return t!==void 0?(e=this.getOrientedFlatCoordinates().slice(),Df(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,Nf(e,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=my(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Op(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new du(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;Fp(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Df(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=ox(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,i),new Wh(e,"XY",i)}getPolygon(t){if(t<0||this.endss_.length<=t)return null;let e;if(t===0)e=0;else{const o=this.endss_[t-1];e=o[o.length-1]}const i=this.endss_[t].slice(),s=i[i.length-1];if(e!==0)for(let o=0,l=i.length;o<l;++o)i[o]-=e;return new lr(this.flatCoordinates.slice(e,s),this.layout,i)}getPolygons(){const t=this.layout,e=this.flatCoordinates,i=this.endss_,s=[];let o=0;for(let l=0,h=i.length;l<h;++l){const c=i[l].slice(),d=c[c.length-1];if(o!==0)for(let _=0,y=c.length;_<y;++_)c[_]-=o;const g=new lr(e.slice(o,d),t,c);s.push(g),o=d}return s}getType(){return"MultiPolygon"}intersectsExtent(t){return fx(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=Lp(this.flatCoordinates,0,t,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{const s=i[i.length-1];this.flatCoordinates.length=s.length===0?0:s[s.length-1]}this.changed()}}const R_=kn();class hn{constructor(t,e,i,s,o,l){this.styleFunction,this.extent_,this.id_=l,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i||null,this.properties_=o,this.squaredTolerance_,this.stride_=s,this.simplifiedGeometry_}get(t){return this.properties_[t]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?up(this.flatCoordinates_):Jf(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const t=yi(this.getExtent());this.flatInteriorPoints_=_d(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const t=gx(this.flatCoordinates_,this.ends_),e=my(this.flatCoordinates_,0,t,2);this.flatInteriorPoints_=Op(this.flatCoordinates_,0,t,2,e)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=zh(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const t=this.flatCoordinates_;let e=0;const i=this.ends_;for(let s=0,o=i.length;s<o;++s){const l=i[s],h=zh(t,e,l,2,.5);qn(this.flatMidpoints_,h),e=l}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(t){return this}simplifyTransformed(t,e){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(t){t=Jt(t);const e=t.getExtent(),i=t.getWorldExtent();if(e&&i){const s=ge(i)/ge(e);vi(R_,i[0],i[3],s,-s,0,0,0),rr(this.flatCoordinates_,0,this.flatCoordinates_.length,2,R_,this.flatCoordinates_)}}applyTransform(t){t(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var t;return new hn(this.type_,this.flatCoordinates_.slice(),(t=this.ends_)==null?void 0:t.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=tp((t,e)=>{if(t===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),e&&this.simplifiedGeometry_.applyTransform(e);const i=this.simplifiedGeometry_.getFlatCoordinates();let s;switch(this.type_){case"LineString":i.length=nu(i,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,t,i,0),s=[i.length];break;case"MultiLineString":s=[],i.length=Ap(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,t,i,0,s);break;case"Polygon":s=[],i.length=gd(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(t),i,0,s);break}return s&&(this.simplifiedGeometry_=new hn(this.type_,i,s,2,this.properties_,this.id_)),this.squaredTolerance_=t,this.simplifiedGeometry_}),this}}hn.prototype.getFlatCoordinates=hn.prototype.getOrientedFlatCoordinates;class I_{constructor(t){this.rbush_=new Xp(t),this.items_={}}insert(t,e){const i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(i),this.items_[ie(e)]=i}load(t,e){const i=new Array(e.length);for(let s=0,o=e.length;s<o;s++){const l=t[s],h=e[s],c={minX:l[0],minY:l[1],maxX:l[2],maxY:l[3],value:h};i[s]=c,this.items_[ie(h)]=c}this.rbush_.load(i)}remove(t){const e=ie(t),i=this.items_[e];return delete this.items_[e],this.rbush_.remove(i)!==null}update(t,e){const i=this.items_[ie(e)],s=[i.minX,i.minY,i.maxX,i.maxY];vo(s,t)||(this.remove(e),this.insert(t,e))}getAll(){return this.rbush_.all().map(function(e){return e.value})}getInExtent(t){const e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(s){return s.value})}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,e){return this.forEach_(this.getInExtent(t),e)}forEach_(t,e){let i;for(let s=0,o=t.length;s<o;s++)if(i=e(t[s]),i)return i;return i}isEmpty(){return jr(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const e=this.rbush_.toJSON();return Ys(e.minX,e.minY,e.maxX,e.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const e in t.items_)this.items_[e]=t.items_[e]}}class _y extends Zn{constructor(t){super(),this.projection=Jt(t.projection),this.attributions_=T_(t.attributions),this.attributionsCollapsible_=t.attributionsCollapsible??!0,this.loading=!1,this.state_=t.state!==void 0?t.state:"ready",this.wrapX_=t.wrapX!==void 0?t.wrapX:!1,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const e=this;this.viewPromise_=new Promise(function(i,s){e.viewResolver=i,e.viewRejector=s})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=T_(t),this.changed()}setState(t){this.state_=t,this.changed()}}function T_(n){return n?typeof n=="function"?n:(Array.isArray(n)||(n=[n]),t=>n):null}const yn={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class qi extends xi{constructor(t,e,i){super(t),this.feature=e,this.features=i}}class RM extends _y{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:t.wrapX!==void 0?t.wrapX:!0}),this.on,this.once,this.un,this.loader_=$s,this.format_=t.format||null,this.overlaps_=t.overlaps===void 0?!0:t.overlaps,this.url_=t.url,t.loader!==void 0?this.loader_=t.loader:this.url_!==void 0&&($t(this.format_,"`format` must be set when `url` is set"),this.loader_=S_(this.url_,this.format_)),this.strategy_=t.strategy!==void 0?t.strategy:SM;const e=t.useSpatialIndex!==void 0?t.useSpatialIndex:!0;this.featuresRtree_=e?new I_:null,this.loadedExtentsRtree_=new I_,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,s;Array.isArray(t.features)?s=t.features:t.features&&(i=t.features,s=i.getArray()),!e&&i===void 0&&(i=new Vn(s)),s!==void 0&&this.addFeaturesInternal(s),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const e=ie(t);if(!this.addToIndex_(e,t)){this.featuresCollection_&&this.featuresCollection_.remove(t);return}this.setupChangeEvents_(e,t);const i=t.getGeometry();if(i){const s=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(s,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new qi(yn.ADDFEATURE,t))}setupChangeEvents_(t,e){e instanceof hn||(this.featureChangeKeys_[t]=[At(e,Ct.CHANGE,this.handleFeatureChange_,this),At(e,Vs.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(t,e){let i=!0;if(e.getId()!==void 0){const s=String(e.getId());if(!(s in this.idIndex_))this.idIndex_[s]=e;else if(e instanceof hn){const o=this.idIndex_[s];o instanceof hn?Array.isArray(o)?o.push(e):this.idIndex_[s]=[o,e]:i=!1}else i=!1}return i&&($t(!(t in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[t]=e),i}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const e=[],i=[],s=[];for(let o=0,l=t.length;o<l;o++){const h=t[o],c=ie(h);this.addToIndex_(c,h)&&i.push(h)}for(let o=0,l=i.length;o<l;o++){const h=i[o],c=ie(h);this.setupChangeEvents_(c,h);const d=h.getGeometry();if(d){const g=d.getExtent();e.push(g),s.push(h)}else this.nullGeometryFeatures_[c]=h}if(this.featuresRtree_&&this.featuresRtree_.load(e,s),this.hasListener(yn.ADDFEATURE))for(let o=0,l=i.length;o<l;o++)this.dispatchEvent(new qi(yn.ADDFEATURE,i[o]))}bindFeaturesCollection_(t){let e=!1;this.addEventListener(yn.ADDFEATURE,function(i){e||(e=!0,t.push(i.feature),e=!1)}),this.addEventListener(yn.REMOVEFEATURE,function(i){e||(e=!0,t.remove(i.feature),e=!1)}),t.addEventListener(He.ADD,i=>{e||(e=!0,this.addFeature(i.element),e=!1)}),t.addEventListener(He.REMOVE,i=>{e||(e=!0,this.removeFeature(i.element),e=!1)}),this.featuresCollection_=t}clear(t){if(t){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(Kt);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(i=>{this.removeFeatureInternal(i)});for(const i in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const e=new qi(yn.CLEAR);this.dispatchEvent(e),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,e){const i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,function(s){const o=s.getGeometry();if(o instanceof hn||o.intersectsCoordinate(t))return e(s)})}forEachFeatureInExtent(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureIntersectingExtent(t,e){return this.forEachFeatureInExtent(t,function(i){const s=i.getGeometry();if(s instanceof hn||s.intersectsExtent(t)){const o=e(i);if(o)return o}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),jr(this.nullGeometryFeatures_)||qn(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const e=[];return this.forEachFeatureAtCoordinateDirect(t,function(i){e.push(i)}),e}getFeaturesInExtent(t,e){if(this.featuresRtree_){if(!(e&&e.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);const s=g2(t,e);return[].concat(...s.map(o=>this.featuresRtree_.getInExtent(o)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,e){const i=t[0],s=t[1];let o=null;const l=[NaN,NaN];let h=1/0;const c=[-1/0,-1/0,1/0,1/0];return e=e||po,this.featuresRtree_.forEachInExtent(c,function(d){if(e(d)){const g=d.getGeometry(),_=h;if(h=g instanceof hn?0:g.closestPointXY(i,s,l,h),h<_){o=d;const y=Math.sqrt(h);c[0]=i-y,c[1]=s-y,c[2]=i+y,c[3]=s+y}}}),o}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const e=this.idIndex_[t.toString()];return e!==void 0?e:null}getFeatureByUid(t){const e=this.uidIndex_[t];return e!==void 0?e:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const e=t.target,i=ie(e),s=e.getGeometry();if(!s)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[i]=e);else{const l=s.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(l,e)):this.featuresRtree_&&this.featuresRtree_.update(l,e)}const o=e.getId();if(o!==void 0){const l=o.toString();this.idIndex_[l]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[l]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[i]=e;this.changed(),this.dispatchEvent(new qi(yn.CHANGEFEATURE,e))}hasFeature(t){const e=t.getId();return e!==void 0?e in this.idIndex_:ie(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&jr(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(t,e,i){const s=this.loadedExtentsRtree_,o=this.strategy_(t,e,i);for(let l=0,h=o.length;l<h;++l){const c=o[l];s.forEachInExtent(c,function(g){return tr(g.extent,c)})||(++this.loadingExtentsCount_,this.dispatchEvent(new qi(yn.FEATURESLOADSTART)),this.loader_.call(this,c,e,i,g=>{--this.loadingExtentsCount_,this.dispatchEvent(new qi(yn.FEATURESLOADEND,void 0,g))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new qi(yn.FEATURESLOADERROR))}),s.insert(c,{extent:c.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const e=this.loadedExtentsRtree_,i=e.forEachInExtent(t,function(s){if(vo(s.extent,t))return s});i&&e.remove(i)}removeFeatures(t){let e=!1;for(let i=0,s=t.length;i<s;++i)e=this.removeFeatureInternal(t[i])||e;e&&this.changed()}removeFeature(t){if(!t)return;this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){const e=ie(t);if(!(e in this.uidIndex_))return!1;e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t);const i=this.featureChangeKeys_[e];i==null||i.forEach(Kt),delete this.featureChangeKeys_[e];const s=t.getId();if(s!==void 0){const o=s.toString(),l=this.idIndex_[o];l===t?delete this.idIndex_[o]:Array.isArray(l)&&(l.splice(l.indexOf(t),1),l.length===1&&(this.idIndex_[o]=l[0]))}return delete this.uidIndex_[e],this.hasListener(yn.REMOVEFEATURE)&&this.dispatchEvent(new qi(yn.REMOVEFEATURE,t)),!0}removeFromIdIndex_(t){for(const e in this.idIndex_)if(this.idIndex_[e]===t){delete this.idIndex_[e];break}}setLoader(t){this.loader_=t}setUrl(t){$t(this.format_,"`format` must be set when `url` is set"),this.url_=t,this.setLoader(S_(t,this.format_))}setOverlaps(t){this.overlaps_=t,this.changed()}}const gt={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},gh=[gt.FILL],nr=[gt.STROKE],br=[gt.BEGIN_PATH],P_=[gt.CLOSE_PATH];class Uo extends cy{constructor(t,e,i,s){super(),this.tolerance=t,this.maxExtent=e,this.pixelRatio=s,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const e=this.pixelRatio;return e==1?t:t.map(function(i){return i*e})}appendFlatPointCoordinates(t,e){const i=this.getBufferedMaxExtent(),s=this.tmpCoordinate_,o=this.coordinates;let l=o.length;for(let h=0,c=t.length;h<c;h+=e)s[0]=t[h],s[1]=t[h+1],yo(i,s)&&(o[l++]=s[0],o[l++]=s[1]);return l}appendFlatLineCoordinates(t,e,i,s,o,l){const h=this.coordinates;let c=h.length;const d=this.getBufferedMaxExtent();l&&(e+=s);let g=t[e],_=t[e+1];const y=this.tmpCoordinate_;let v=!0,E,M,w;for(E=e+s;E<i;E+=s)y[0]=t[E],y[1]=t[E+1],w=If(d,y),w!==M?(v&&(h[c++]=g,h[c++]=_,v=!1),h[c++]=y[0],h[c++]=y[1]):w===fe.INTERSECTING?(h[c++]=y[0],h[c++]=y[1],v=!1):v=!0,g=y[0],_=y[1],M=w;return(o&&v||E===e+s)&&(h[c++]=g,h[c++]=_),c}drawCustomCoordinates_(t,e,i,s,o){for(let l=0,h=i.length;l<h;++l){const c=i[l],d=this.appendFlatLineCoordinates(t,e,c,s,!1,!1);o.push(d),e=c}return e}drawCustom(t,e,i,s,o){this.beginGeometry(t,e,o);const l=t.getType(),h=t.getStride(),c=this.coordinates.length;let d,g,_,y,v;switch(l){case"MultiPolygon":d=t.getOrientedFlatCoordinates(),y=[];const E=t.getEndss();v=0;for(let M=0,w=E.length;M<w;++M){const S=[];v=this.drawCustomCoordinates_(d,v,E[M],h,S),y.push(S)}this.instructions.push([gt.CUSTOM,c,y,t,i,Nf,o]),this.hitDetectionInstructions.push([gt.CUSTOM,c,y,t,s||i,Nf,o]);break;case"Polygon":case"MultiLineString":_=[],d=l=="Polygon"?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),v=this.drawCustomCoordinates_(d,0,t.getEnds(),h,_),this.instructions.push([gt.CUSTOM,c,_,t,i,Eo,o]),this.hitDetectionInstructions.push([gt.CUSTOM,c,_,t,s||i,Eo,o]);break;case"LineString":case"Circle":d=t.getFlatCoordinates(),g=this.appendFlatLineCoordinates(d,0,d.length,h,!1,!1),this.instructions.push([gt.CUSTOM,c,g,t,i,er,o]),this.hitDetectionInstructions.push([gt.CUSTOM,c,g,t,s||i,er,o]);break;case"MultiPoint":d=t.getFlatCoordinates(),g=this.appendFlatPointCoordinates(d,h),g>c&&(this.instructions.push([gt.CUSTOM,c,g,t,i,er,o]),this.hitDetectionInstructions.push([gt.CUSTOM,c,g,t,s||i,er,o]));break;case"Point":d=t.getFlatCoordinates(),this.coordinates.push(d[0],d[1]),g=this.coordinates.length,this.instructions.push([gt.CUSTOM,c,g,t,i,void 0,o]),this.hitDetectionInstructions.push([gt.CUSTOM,c,g,t,s||i,void 0,o]);break}this.endGeometry(e)}beginGeometry(t,e,i){this.beginGeometryInstruction1_=[gt.BEGIN_GEOMETRY,e,0,t,i],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[gt.BEGIN_GEOMETRY,e,0,t,i],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;t.reverse();let e;const i=t.length;let s,o,l=-1;for(e=0;e<i;++e)s=t[e],o=s[0],o==gt.END_GEOMETRY?l=e:o==gt.BEGIN_GEOMETRY&&(s[2]=e,Hv(this.hitDetectionInstructions,l,e),l=-1)}fillStyleToState(t,e={}){if(t){const i=t.getColor();e.fillPatternScale=i&&typeof i=="object"&&"src"in i?this.pixelRatio:1,e.fillStyle=$n(i||Ze)}else e.fillStyle=void 0;return e}strokeStyleToState(t,e={}){if(t){const i=t.getColor();e.strokeStyle=$n(i||So);const s=t.getLineCap();e.lineCap=s!==void 0?s:Zs;const o=t.getLineDash();e.lineDash=o?o.slice():_i;const l=t.getLineDashOffset();e.lineDashOffset=l||pi;const h=t.getLineJoin();e.lineJoin=h!==void 0?h:Qs;const c=t.getWidth();e.lineWidth=c!==void 0?c:Io;const d=t.getMiterLimit();e.miterLimit=d!==void 0?d:Co,e.lineWidth>this.maxLineWidth&&(this.maxLineWidth=e.lineWidth,this.bufferedMaxExtent_=null)}else e.strokeStyle=void 0,e.lineCap=void 0,e.lineDash=null,e.lineDashOffset=void 0,e.lineJoin=void 0,e.lineWidth=void 0,e.miterLimit=void 0;return e}setFillStrokeStyle(t,e){const i=this.state;this.fillStyleToState(t,i),this.strokeStyleToState(e,i)}createFill(t){const e=t.fillStyle,i=[gt.SET_FILL_STYLE,e];return typeof e!="string"&&i.push(t.fillPatternScale),i}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[gt.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,t.lineDash?this.applyPixelRatio(t.lineDash):null,t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,e){const i=t.fillStyle;(typeof i!="string"||t.currentFillStyle!=i)&&(i!==void 0&&this.instructions.push(e.call(this,t)),t.currentFillStyle=i)}updateStrokeStyle(t,e){const i=t.strokeStyle,s=t.lineCap,o=t.lineDash,l=t.lineDashOffset,h=t.lineJoin,c=t.lineWidth,d=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=s||o!=t.currentLineDash&&!cr(t.currentLineDash,o)||t.currentLineDashOffset!=l||t.currentLineJoin!=h||t.currentLineWidth!=c||t.currentMiterLimit!=d)&&(i!==void 0&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=s,t.currentLineDash=o,t.currentLineDashOffset=l,t.currentLineJoin=h,t.currentLineWidth=c,t.currentMiterLimit=d)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const e=[gt.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=hp(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;Zf(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class IM extends Uo{constructor(t,e,i,s){super(t,e,i,s),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,e,i){if(!this.image_||this.maxExtent&&!yo(this.maxExtent,t.getFlatCoordinates()))return;this.beginGeometry(t,e,i);const s=t.getFlatCoordinates(),o=t.getStride(),l=this.coordinates.length,h=this.appendFlatPointCoordinates(s,o);this.instructions.push([gt.DRAW_IMAGE,l,h,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([gt.DRAW_IMAGE,l,h,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(t,e,i){if(!this.image_)return;this.beginGeometry(t,e,i);const s=t.getFlatCoordinates(),o=[];for(let c=0,d=s.length;c<d;c+=t.getStride())(!this.maxExtent||yo(this.maxExtent,s.slice(c,c+2)))&&o.push(s[c],s[c+1]);const l=this.coordinates.length,h=this.appendFlatPointCoordinates(o,2);this.instructions.push([gt.DRAW_IMAGE,l,h,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([gt.DRAW_IMAGE,l,h,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,e){const i=t.getAnchor(),s=t.getSize(),o=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=s[1],this.opacity_=t.getOpacity(),this.originX_=o[0],this.originY_=o[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=s[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}class TM extends Uo{constructor(t,e,i,s){super(t,e,i,s)}drawFlatCoordinates_(t,e,i,s){const o=this.coordinates.length,l=this.appendFlatLineCoordinates(t,e,i,s,!1,!1),h=[gt.MOVE_TO_LINE_TO,o,l];return this.instructions.push(h),this.hitDetectionInstructions.push(h),i}drawLineString(t,e,i){const s=this.state,o=s.strokeStyle,l=s.lineWidth;if(o===void 0||l===void 0)return;this.updateStrokeStyle(s,this.applyStroke),this.beginGeometry(t,e,i),this.hitDetectionInstructions.push([gt.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,_i,pi],br);const h=t.getFlatCoordinates(),c=t.getStride();this.drawFlatCoordinates_(h,0,h.length,c),this.hitDetectionInstructions.push(nr),this.endGeometry(e)}drawMultiLineString(t,e,i){const s=this.state,o=s.strokeStyle,l=s.lineWidth;if(o===void 0||l===void 0)return;this.updateStrokeStyle(s,this.applyStroke),this.beginGeometry(t,e,i),this.hitDetectionInstructions.push([gt.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,_i,pi],br);const h=t.getEnds(),c=t.getFlatCoordinates(),d=t.getStride();let g=0;for(let _=0,y=h.length;_<y;++_)g=this.drawFlatCoordinates_(c,g,h[_],d);this.hitDetectionInstructions.push(nr),this.endGeometry(e)}finish(){const t=this.state;return t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&this.instructions.push(nr),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(nr),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(br)}}class L_ extends Uo{constructor(t,e,i,s){super(t,e,i,s)}drawFlatCoordinatess_(t,e,i,s){const o=this.state,l=o.fillStyle!==void 0,h=o.strokeStyle!==void 0,c=i.length;this.instructions.push(br),this.hitDetectionInstructions.push(br);for(let d=0;d<c;++d){const g=i[d],_=this.coordinates.length,y=this.appendFlatLineCoordinates(t,e,g,s,!0,!h),v=[gt.MOVE_TO_LINE_TO,_,y];this.instructions.push(v),this.hitDetectionInstructions.push(v),h&&(this.instructions.push(P_),this.hitDetectionInstructions.push(P_)),e=g}return l&&(this.instructions.push(gh),this.hitDetectionInstructions.push(gh)),h&&(this.instructions.push(nr),this.hitDetectionInstructions.push(nr)),e}drawCircle(t,e,i){const s=this.state,o=s.fillStyle,l=s.strokeStyle;if(o===void 0&&l===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,i),s.fillStyle!==void 0&&this.hitDetectionInstructions.push([gt.SET_FILL_STYLE,Ze]),s.strokeStyle!==void 0&&this.hitDetectionInstructions.push([gt.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,_i,pi]);const h=t.getFlatCoordinates(),c=t.getStride(),d=this.coordinates.length;this.appendFlatLineCoordinates(h,0,h.length,c,!1,!1);const g=[gt.CIRCLE,d];this.instructions.push(br,g),this.hitDetectionInstructions.push(br,g),s.fillStyle!==void 0&&(this.instructions.push(gh),this.hitDetectionInstructions.push(gh)),s.strokeStyle!==void 0&&(this.instructions.push(nr),this.hitDetectionInstructions.push(nr)),this.endGeometry(e)}drawPolygon(t,e,i){const s=this.state,o=s.fillStyle,l=s.strokeStyle;if(o===void 0&&l===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,i),s.fillStyle!==void 0&&this.hitDetectionInstructions.push([gt.SET_FILL_STYLE,Ze]),s.strokeStyle!==void 0&&this.hitDetectionInstructions.push([gt.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,_i,pi]);const h=t.getEnds(),c=t.getOrientedFlatCoordinates(),d=t.getStride();this.drawFlatCoordinatess_(c,0,h,d),this.endGeometry(e)}drawMultiPolygon(t,e,i){const s=this.state,o=s.fillStyle,l=s.strokeStyle;if(o===void 0&&l===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,i),s.fillStyle!==void 0&&this.hitDetectionInstructions.push([gt.SET_FILL_STYLE,Ze]),s.strokeStyle!==void 0&&this.hitDetectionInstructions.push([gt.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,_i,pi]);const h=t.getEndss(),c=t.getOrientedFlatCoordinates(),d=t.getStride();let g=0;for(let _=0,y=h.length;_<y;++_)g=this.drawFlatCoordinatess_(c,g,h[_],d);this.endGeometry(e)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(t!==0){const e=this.coordinates;for(let i=0,s=e.length;i<s;++i)e[i]=kr(e[i],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;t.fillStyle!==void 0&&this.updateFillStyle(t,this.createFill),t.strokeStyle!==void 0&&this.updateStrokeStyle(t,this.applyStroke)}}function PM(n,t,e,i,s){const o=[];let l=e,h=0,c=t.slice(e,2);for(;h<n&&l+s<i;){const[d,g]=c.slice(-2),_=t[l+s],y=t[l+s+1],v=Math.sqrt((_-d)*(_-d)+(y-g)*(y-g));if(h+=v,h>=n){const E=(n-h+v)/v,M=ln(d,_,E),w=ln(g,y,E);c.push(M,w),o.push(c),c=[M,w],h==n&&(l+=s),h=0}else if(h<n)c.push(t[l+s],t[l+s+1]),l+=s;else{const E=v-h,M=ln(d,_,E/v),w=ln(g,y,E/v);c.push(M,w),o.push(c),c=[M,w],h=0,l+=s}}return h>0&&o.push(c),o}function LM(n,t,e,i,s){let o=e,l=e,h=0,c=0,d=e,g,_,y,v,E,M,w,S,R,O;for(_=e;_<i;_+=s){const P=t[_],k=t[_+1];E!==void 0&&(R=P-E,O=k-M,v=Math.sqrt(R*R+O*O),w!==void 0&&(c+=y,g=Math.acos((w*R+S*O)/(y*v)),g>n&&(c>h&&(h=c,o=d,l=_),c=0,d=_-s)),y=v,w=R,S=O),E=P,M=k}return c+=v,c>h?[d,_]:[o,l]}const Bh={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class AM extends Uo{constructor(t,e,i,s){super(t,e,i,s),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[Ze]={fillStyle:Ze},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e,i){const s=this.textFillState_,o=this.textStrokeState_,l=this.textState_;if(this.text_===""||!l||!s&&!o)return;const h=this.coordinates;let c=h.length;const d=t.getType();let g=null,_=t.getStride();if(l.placement==="line"&&(d=="LineString"||d=="MultiLineString"||d=="Polygon"||d=="MultiPolygon")){if(!Ge(this.maxExtent,t.getExtent()))return;let y;if(g=t.getFlatCoordinates(),d=="LineString")y=[g.length];else if(d=="MultiLineString")y=t.getEnds();else if(d=="Polygon")y=t.getEnds().slice(0,1);else if(d=="MultiPolygon"){const w=t.getEndss();y=[];for(let S=0,R=w.length;S<R;++S)y.push(w[S][0])}this.beginGeometry(t,e,i);const v=l.repeat,E=v?void 0:l.textAlign;let M=0;for(let w=0,S=y.length;w<S;++w){let R;v?R=PM(v*this.resolution,g,M,y[w],_):R=[g.slice(M,y[w])];for(let O=0,P=R.length;O<P;++O){const k=R[O];let b=0,B=k.length;if(E==null){const W=LM(l.maxAngle,k,0,k.length,2);b=W[0],B=W[1]}for(let W=b;W<B;W+=_)h.push(k[W],k[W+1]);const G=h.length;M=y[w],this.drawChars_(c,G),c=G}}this.endGeometry(e)}else{let y=l.overflow?null:[];switch(d){case"Point":case"MultiPoint":g=t.getFlatCoordinates();break;case"LineString":g=t.getFlatMidpoint();break;case"Circle":g=t.getCenter();break;case"MultiLineString":g=t.getFlatMidpoints(),_=2;break;case"Polygon":g=t.getFlatInteriorPoint(),l.overflow||y.push(g[2]/this.resolution),_=3;break;case"MultiPolygon":const P=t.getFlatInteriorPoints();g=[];for(let k=0,b=P.length;k<b;k+=3)l.overflow||y.push(P[k+2]/this.resolution),g.push(P[k],P[k+1]);if(g.length===0)return;_=2;break}const v=this.appendFlatPointCoordinates(g,_);if(v===c)return;if(y&&(v-c)/2!==g.length/_){let P=c/2;y=y.filter((k,b)=>{const B=h[(P+b)*2]===g[b*_]&&h[(P+b)*2+1]===g[b*_+1];return B||--P,B})}this.saveTextStates_();const E=l.backgroundFill?this.createFill(this.fillStyleToState(l.backgroundFill)):null,M=l.backgroundStroke?this.createStroke(this.strokeStyleToState(l.backgroundStroke)):null;this.beginGeometry(t,e,i);let w=l.padding;if(w!=Fr&&(l.scale[0]<0||l.scale[1]<0)){let P=l.padding[0],k=l.padding[1],b=l.padding[2],B=l.padding[3];l.scale[0]<0&&(k=-k,B=-B),l.scale[1]<0&&(P=-P,b=-b),w=[P,k,b,B]}const S=this.pixelRatio;this.instructions.push([gt.DRAW_IMAGE,c,v,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,w==Fr?Fr:w.map(function(P){return P*S}),E,M,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,y]);const R=1/S,O=E?E.slice(0):null;O&&(O[1]=Ze),this.hitDetectionInstructions.push([gt.DRAW_IMAGE,c,v,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[R,R],NaN,this.declutterMode_,this.declutterImageWithText_,w,O,M,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?Ze:this.fillKey_,this.textOffsetX_,this.textOffsetY_,y]),this.endGeometry(e)}}saveTextStates_(){const t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,s=this.strokeKey_;t&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const o=this.textKey_;o in this.textStates||(this.textStates[o]={font:e.font,textAlign:e.textAlign||Ro,justify:e.justify,textBaseline:e.textBaseline||Nh,scale:e.scale});const l=this.fillKey_;i&&(l in this.fillStates||(this.fillStates[l]={fillStyle:i.fillStyle}))}drawChars_(t,e){const i=this.textStrokeState_,s=this.textState_,o=this.strokeKey_,l=this.textKey_,h=this.fillKey_;this.saveTextStates_();const c=this.pixelRatio,d=Bh[s.textBaseline],g=this.textOffsetY_*c,_=this.text_,y=i?i.lineWidth*Math.abs(s.scale[0])/2:0;this.instructions.push([gt.DRAW_CHARS,t,e,d,s.overflow,h,s.maxAngle,c,g,o,y*c,_,l,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([gt.DRAW_CHARS,t,e,d,s.overflow,h&&Ze,s.maxAngle,c,g,o,y*c,_,l,1/c,this.declutterMode_,this.textKeepUpright_])}setTextStyle(t,e){let i,s,o;if(!t)this.text_="";else{const l=t.getFill();l?(s=this.textFillState_,s||(s={},this.textFillState_=s),s.fillStyle=$n(l.getColor()||Ze)):(s=null,this.textFillState_=s);const h=t.getStroke();if(!h)o=null,this.textStrokeState_=o;else{o=this.textStrokeState_,o||(o={},this.textStrokeState_=o);const M=h.getLineDash(),w=h.getLineDashOffset(),S=h.getWidth(),R=h.getMiterLimit();o.lineCap=h.getLineCap()||Zs,o.lineDash=M?M.slice():_i,o.lineDashOffset=w===void 0?pi:w,o.lineJoin=h.getLineJoin()||Qs,o.lineWidth=S===void 0?Io:S,o.miterLimit=R===void 0?Co:R,o.strokeStyle=$n(h.getColor()||So)}i=this.textState_;const c=t.getFont()||Jp;FE(c);const d=t.getScaleArray();i.overflow=t.getOverflow(),i.font=c,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.repeat=t.getRepeat(),i.justify=t.getJustify(),i.textBaseline=t.getTextBaseline()||Nh,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||Fr,i.scale=d===void 0?[1,1]:d;const g=t.getOffsetX(),_=t.getOffsetY(),y=t.getRotateWithView(),v=t.getKeepUpright(),E=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=g===void 0?0:g,this.textOffsetY_=_===void 0?0:_,this.textRotateWithView_=y===void 0?!1:y,this.textKeepUpright_=v===void 0?!0:v,this.textRotation_=E===void 0?0:E,this.strokeKey_=o?(typeof o.strokeStyle=="string"?o.strokeStyle:ie(o.strokeStyle))+o.lineCap+o.lineDashOffset+"|"+o.lineWidth+o.lineJoin+o.miterLimit+"["+o.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=s&&s.fillStyle?typeof s.fillStyle=="string"?s.fillStyle:"|"+ie(s.fillStyle):""}this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}const kM={Circle:L_,Default:Uo,Image:IM,LineString:TM,Polygon:L_,Text:AM};class OM{constructor(t,e,i,s){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=s,this.resolution_=i,this.buildersByZIndex_={}}finish(){const t={};for(const e in this.buildersByZIndex_){t[e]=t[e]||{};const i=this.buildersByZIndex_[e];for(const s in i){const o=i[s].finish();t[e][s]=o}}return t}getBuilder(t,e){const i=t!==void 0?t.toString():"0";let s=this.buildersByZIndex_[i];s===void 0&&(s={},this.buildersByZIndex_[i]=s);let o=s[e];if(o===void 0){const l=kM[e];o=new l(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),s[e]=o}return o}}function NM(n,t,e,i,s,o,l,h,c,d,g,_,y=!0){let v=n[t],E=n[t+1],M=0,w=0,S=0,R=0;function O(){M=v,w=E,t+=i,v=n[t],E=n[t+1],R+=S,S=Math.sqrt((v-M)*(v-M)+(E-w)*(E-w))}do O();while(t<e-i&&R+S<o);let P=S===0?0:(o-R)/S;const k=ln(M,v,P),b=ln(w,E,P),B=t-i,G=R,W=o+h*c(d,s,g);for(;t<e-i&&R+S<W;)O();P=S===0?0:(W-R)/S;const K=ln(M,v,P),rt=ln(w,E,P);let lt=!1;if(y)if(_){const nt=[k,b,K,rt];Rp(nt,0,4,2,_,nt,nt),lt=nt[0]>nt[2]}else lt=k>K;const ct=Math.PI,et=[],wt=B+i===t;t=B,S=0,R=G,v=n[t],E=n[t+1];let st;if(wt){O(),st=Math.atan2(E-w,v-M),lt&&(st+=st>0?-ct:ct);const nt=(K+k)/2,z=(rt+b)/2;return et[0]=[nt,z,(W-o)/2,st,s],et}s=s.replace(/\n/g," ");for(let nt=0,z=s.length;nt<z;){O();let H=Math.atan2(E-w,v-M);if(lt&&(H+=H>0?-ct:ct),st!==void 0){let pt=H-st;if(pt+=pt>ct?-2*ct:pt<-ct?2*ct:0,Math.abs(pt)>l)return null}st=H;const V=nt;let T=0;for(;nt<z;++nt){const pt=lt?z-nt-1:nt,Et=h*c(d,s[pt],g);if(t+i<e&&R+S<o+T+Et/2)break;T+=Et}if(nt===V)continue;const A=lt?s.substring(z-V,z-nt):s.substring(V,nt);P=S===0?0:(o+T/2-R)/S;const ft=ln(M,v,P),dt=ln(w,E,P);et.push([ft,dt,T/2,H,A]),o+=T}return et}class py{constructor(){Cm(this,"pushMethodArgs_",(...t)=>(this.instructions_[this.zIndex+this.offset_].push(t),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(Oh(),{get:(t,e)=>{if(typeof Oh()[e]=="function")return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(e),this.pushMethodArgs_},set:(t,e,i)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(e,i),!0)})}pushFunction(t){this.instructions_[this.zIndex+this.offset_].push(t)}getContext(){return this.context_}draw(t){this.instructions_.forEach(e=>{for(let i=0,s=e.length;i<s;++i){const o=e[i];if(typeof o=="function"){o(t);continue}const l=e[++i];if(typeof t[o]=="function")t[o](...l);else{if(typeof l=="function"){t[o]=l(t);continue}t[o]=l}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const Ps=Nn(),Hi=[],ci=[],fi=[],Ki=[];function A_(n){return n[3].declutterBox}const k_=new RegExp("[֑-ࣿיִ-﷿ﹰ-ﻼࠀ-࿿-]");function pf(n,t){return t==="start"?t=k_.test(n)?"right":"left":t==="end"&&(t=k_.test(n)?"left":"right"),Bh[t]}function DM(n,t,e){return e>0&&n.push(`
`,""),n.push(t,""),n}class FM{constructor(t,e,i,s,o){this.overlaps=i,this.pixelRatio=e,this.resolution=t,this.alignAndScaleFill_,this.instructions=s.instructions,this.coordinates=s.coordinates,this.coordinateCache_={},this.renderedTransform_=kn(),this.hitDetectionInstructions=s.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=s.fillStates||{},this.strokeStates=s.strokeStates||{},this.textStates=s.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=o?new py:null}getZIndexContext(){return this.zIndexContext_}createLabel(t,e,i,s){const o=t+e+i+s;if(this.labels_[o])return this.labels_[o];const l=s?this.strokeStates[s]:null,h=i?this.fillStates[i]:null,c=this.textStates[e],d=this.pixelRatio,g=[c.scale[0]*d,c.scale[1]*d],_=c.justify?Bh[c.justify]:pf(Array.isArray(t)?t[0]:t,c.textAlign||Ro),y=s&&l.lineWidth?l.lineWidth:0,v=Array.isArray(t)?t:String(t).split(`
`).reduce(DM,[]),{width:E,height:M,widths:w,heights:S,lineWidths:R}=zE(c,v),O=E+y,P=[],k=(O+2)*g[0],b=(M+y)*g[1],B={width:k<0?Math.floor(k):Math.ceil(k),height:b<0?Math.floor(b):Math.ceil(b),contextInstructions:P};(g[0]!=1||g[1]!=1)&&P.push("scale",g),s&&(P.push("strokeStyle",l.strokeStyle),P.push("lineWidth",y),P.push("lineCap",l.lineCap),P.push("lineJoin",l.lineJoin),P.push("miterLimit",l.miterLimit),P.push("setLineDash",[l.lineDash]),P.push("lineDashOffset",l.lineDashOffset)),i&&P.push("fillStyle",h.fillStyle),P.push("textBaseline","middle"),P.push("textAlign","center");const G=.5-_;let W=_*O+G*y;const K=[],rt=[];let lt=0,ct=0,et=0,wt=0,st;for(let nt=0,z=v.length;nt<z;nt+=2){const H=v[nt];if(H===`
`){ct+=lt,lt=0,W=_*O+G*y,++wt;continue}const V=v[nt+1]||c.font;V!==st&&(s&&K.push("font",V),i&&rt.push("font",V),st=V),lt=Math.max(lt,S[et]);const T=[H,W+G*w[et]+_*(w[et]-R[wt]),.5*(y+lt)+ct];W+=w[et],s&&K.push("strokeText",T),i&&rt.push("fillText",T),++et}return Array.prototype.push.apply(P,K),Array.prototype.push.apply(P,rt),this.labels_[o]=B,B}replayTextBackground_(t,e,i,s,o,l,h){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,s),t.lineTo.apply(t,o),t.lineTo.apply(t,e),l&&(this.alignAndScaleFill_=l[2],t.fillStyle=l[1],this.fill_(t)),h&&(this.setStrokeStyle_(t,h),t.stroke())}calculateImageOrLabelDimensions_(t,e,i,s,o,l,h,c,d,g,_,y,v,E,M,w){h*=y[0],c*=y[1];let S=i-h,R=s-c;const O=o+d>t?t-d:o,P=l+g>e?e-g:l,k=E[3]+O*y[0]+E[1],b=E[0]+P*y[1]+E[2],B=S-E[3],G=R-E[0];(M||_!==0)&&(Hi[0]=B,Ki[0]=B,Hi[1]=G,ci[1]=G,ci[0]=B+k,fi[0]=ci[0],fi[1]=G+b,Ki[1]=fi[1]);let W;return _!==0?(W=vi(kn(),i,s,1,1,_,-i,-s),ve(W,Hi),ve(W,ci),ve(W,fi),ve(W,Ki),Ys(Math.min(Hi[0],ci[0],fi[0],Ki[0]),Math.min(Hi[1],ci[1],fi[1],Ki[1]),Math.max(Hi[0],ci[0],fi[0],Ki[0]),Math.max(Hi[1],ci[1],fi[1],Ki[1]),Ps)):Ys(Math.min(B,B+k),Math.min(G,G+b),Math.max(B,B+k),Math.max(G,G+b),Ps),v&&(S=Math.round(S),R=Math.round(R)),{drawImageX:S,drawImageY:R,drawImageW:O,drawImageH:P,originX:d,originY:g,declutterBox:{minX:Ps[0],minY:Ps[1],maxX:Ps[2],maxY:Ps[3],value:w},canvasTransform:W,scale:y}}replayImageOrLabel_(t,e,i,s,o,l,h){const c=!!(l||h),d=s.declutterBox,g=h?h[2]*s.scale[0]/2:0;return d.minX-g<=e[0]&&d.maxX+g>=0&&d.minY-g<=e[1]&&d.maxY+g>=0&&(c&&this.replayTextBackground_(t,Hi,ci,fi,Ki,l,h),GE(t,s.canvasTransform,o,i,s.originX,s.originY,s.drawImageW,s.drawImageH,s.drawImageX,s.drawImageY,s.scale)),!0}fill_(t){const e=this.alignAndScaleFill_;if(e){const i=ve(this.renderedTransform_,[0,0]),s=512*this.pixelRatio;t.save(),t.translate(i[0]%s,i[1]%s),e!==1&&t.scale(e,e),t.rotate(this.viewRotation_)}t.fill(),e&&t.restore()}setStrokeStyle_(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6])}drawLabelWithPointPlacement_(t,e,i,s){const o=this.textStates[e],l=this.createLabel(t,e,s,i),h=this.strokeStates[i],c=this.pixelRatio,d=pf(Array.isArray(t)?t[0]:t,o.textAlign||Ro),g=Bh[o.textBaseline||Nh],_=h&&h.lineWidth?h.lineWidth:0,y=l.width/c-2*o.scale[0],v=d*y+2*(.5-d)*_,E=g*l.height/c+2*(.5-g)*_;return{label:l,anchorX:v,anchorY:E}}execute_(t,e,i,s,o,l,h,c){const d=this.zIndexContext_;let g;this.pixelCoordinates_&&cr(i,this.renderedTransform_)?g=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),g=rr(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),H2(this.renderedTransform_,i));let _=0;const y=s.length;let v=0,E,M,w,S,R,O,P,k,b,B,G,W,K,rt=0,lt=0;const ct=this.coordinateCache_,et=this.viewRotation_,wt=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,st={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:et},nt=this.instructions!=s||this.overlaps?0:200;let z,H,V,T;for(;_<y;){const A=s[_];switch(A[0]){case gt.BEGIN_GEOMETRY:z=A[1],T=A[3],z.getGeometry()?h!==void 0&&!Ge(h,T.getExtent())?_=A[2]+1:++_:_=A[2],d&&(d.zIndex=A[4]);break;case gt.BEGIN_PATH:rt>nt&&(this.fill_(t),rt=0),lt>nt&&(t.stroke(),lt=0),!rt&&!lt&&(t.beginPath(),R=NaN,O=NaN),++_;break;case gt.CIRCLE:v=A[1];const dt=g[v],pt=g[v+1],Et=g[v+2],St=g[v+3],Rt=Et-dt,kt=St-pt,Wt=Math.sqrt(Rt*Rt+kt*kt);t.moveTo(dt+Wt,pt),t.arc(dt,pt,Wt,0,2*Math.PI,!0),++_;break;case gt.CLOSE_PATH:t.closePath(),++_;break;case gt.CUSTOM:v=A[1],E=A[2];const Qn=A[3],Hr=A[4],dr=A[5];st.geometry=Qn,st.feature=z,_ in ct||(ct[_]=[]);const Jn=ct[_];dr?dr(g,v,E,2,Jn):(Jn[0]=g[v],Jn[1]=g[v+1],Jn.length=2),d&&(d.zIndex=A[6]),Hr(Jn,st),++_;break;case gt.DRAW_IMAGE:v=A[1],E=A[2],b=A[3],M=A[4],w=A[5];let Kr=A[6];const Ho=A[7],oa=A[8],Ko=A[9],Zr=A[10];let ti=A[11];const wi=A[12];let Ci=A[13];S=A[14]||"declutter";const Si=A[15];if(!b&&A.length>=20){B=A[19],G=A[20],W=A[21],K=A[22];const Le=this.drawLabelWithPointPlacement_(B,G,W,K);b=Le.label,A[3]=b;const Fn=A[23];M=(Le.anchorX-Fn)*this.pixelRatio,A[4]=M;const Ae=A[24];w=(Le.anchorY-Ae)*this.pixelRatio,A[5]=w,Kr=b.height,A[6]=Kr,Ci=b.width,A[13]=Ci}let Qr;A.length>25&&(Qr=A[25]);let Jr,gr,Ri;A.length>17?(Jr=A[16],gr=A[17],Ri=A[18]):(Jr=Fr,gr=null,Ri=null),Zr&&wt?ti+=et:!Zr&&!wt&&(ti-=et);let ts=0;for(;v<E;v+=2){if(Qr&&Qr[ts++]<Ci/this.pixelRatio)continue;const Le=this.calculateImageOrLabelDimensions_(b.width,b.height,g[v],g[v+1],Ci,Kr,M,w,oa,Ko,ti,wi,o,Jr,!!gr||!!Ri,z),Fn=[t,e,b,Le,Ho,gr,Ri];if(c){let Ae,We,ke;if(Si){const jt=E-v;if(!Si[jt]){Si[jt]={args:Fn,declutterMode:S};continue}const me=Si[jt];Ae=me.args,We=me.declutterMode,delete Si[jt],ke=A_(Ae)}let Oe,nn;if(Ae&&(We!=="declutter"||!c.collides(ke))&&(Oe=!0),(S!=="declutter"||!c.collides(Le.declutterBox))&&(nn=!0),We==="declutter"&&S==="declutter"){const jt=Oe&&nn;Oe=jt,nn=jt}Oe&&(We!=="none"&&c.insert(ke),this.replayImageOrLabel_.apply(this,Ae)),nn&&(S!=="none"&&c.insert(Le.declutterBox),this.replayImageOrLabel_.apply(this,Fn))}else this.replayImageOrLabel_.apply(this,Fn)}++_;break;case gt.DRAW_CHARS:const la=A[1],Ii=A[2],ei=A[3],mu=A[4];K=A[5];const Zo=A[6],ha=A[7],Qo=A[8];W=A[9];const mr=A[10];B=A[11],G=A[12];const es=[A[13],A[13]];S=A[14]||"declutter";const ua=A[15],_r=this.textStates[G],ni=_r.font,un=[_r.scale[0]*ha,_r.scale[1]*ha];let cn;ni in this.widths_?cn=this.widths_[ni]:(cn={},this.widths_[ni]=cn);const ca=uy(g,la,Ii,2),fa=Math.abs(un[0])*m_(ni,B,cn);if(mu||fa<=ca){const Le=this.textStates[G].textAlign,Fn=(ca-fa)*pf(B,Le),Ae=NM(g,la,Ii,2,B,Fn,Zo,Math.abs(un[0]),m_,ni,cn,wt?0:this.viewRotation_,ua);t:if(Ae){const We=[];let ke,Oe,nn,jt,me;if(W)for(ke=0,Oe=Ae.length;ke<Oe;++ke){me=Ae[ke],nn=me[4],jt=this.createLabel(nn,G,"",W),M=me[2]+(un[0]<0?-mr:mr),w=ei*jt.height+(.5-ei)*2*mr*un[1]/un[0]-Qo;const Ne=this.calculateImageOrLabelDimensions_(jt.width,jt.height,me[0],me[1],jt.width,jt.height,M,w,0,0,me[3],es,!1,Fr,!1,z);if(c&&S==="declutter"&&c.collides(Ne.declutterBox))break t;We.push([t,e,jt,Ne,1,null,null])}if(K)for(ke=0,Oe=Ae.length;ke<Oe;++ke){me=Ae[ke],nn=me[4],jt=this.createLabel(nn,G,K,""),M=me[2],w=ei*jt.height-Qo;const Ne=this.calculateImageOrLabelDimensions_(jt.width,jt.height,me[0],me[1],jt.width,jt.height,M,w,0,0,me[3],es,!1,Fr,!1,z);if(c&&S==="declutter"&&c.collides(Ne.declutterBox))break t;We.push([t,e,jt,Ne,1,null,null])}c&&S!=="none"&&c.load(We.map(A_));for(let Ne=0,ns=We.length;Ne<ns;++Ne)this.replayImageOrLabel_.apply(this,We[Ne])}}++_;break;case gt.END_GEOMETRY:if(l!==void 0){z=A[1];const Le=l(z,T,S);if(Le)return Le}++_;break;case gt.FILL:nt?rt++:this.fill_(t),++_;break;case gt.MOVE_TO_LINE_TO:for(v=A[1],E=A[2],H=g[v],V=g[v+1],t.moveTo(H,V),R=H+.5|0,O=V+.5|0,v+=2;v<E;v+=2)H=g[v],V=g[v+1],P=H+.5|0,k=V+.5|0,(v==E-2||P!==R||k!==O)&&(t.lineTo(H,V),R=P,O=k);++_;break;case gt.SET_FILL_STYLE:this.alignAndScaleFill_=A[2],rt&&(this.fill_(t),rt=0,lt&&(t.stroke(),lt=0)),t.fillStyle=A[1],++_;break;case gt.SET_STROKE_STYLE:lt&&(t.stroke(),lt=0),this.setStrokeStyle_(t,A),++_;break;case gt.STROKE:nt?lt++:t.stroke(),++_;break;default:++_;break}}rt&&this.fill_(t),lt&&t.stroke()}execute(t,e,i,s,o,l){this.viewRotation_=s,this.execute_(t,e,i,this.instructions,o,void 0,void 0,l)}executeHitDetection(t,e,i,s,o){return this.viewRotation_=i,this.execute_(t,[t.canvas.width,t.canvas.height],e,this.hitDetectionInstructions,!0,s,o)}}const Fs=["Polygon","Circle","LineString","Image","Text","Default"],yy=["Image","Text"],bM=Fs.filter(n=>!yy.includes(n));class zM{constructor(t,e,i,s,o,l,h){this.maxExtent_=t,this.overlaps_=s,this.pixelRatio_=i,this.resolution_=e,this.renderBuffer_=l,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=kn(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(o,h)}clip(t,e){const i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()}createExecutors_(t,e){for(const i in t){let s=this.executorsByZIndex_[i];s===void 0&&(s={},this.executorsByZIndex_[i]=s);const o=t[i];for(const l in o){const h=o[l];s[l]=new FM(this.resolution_,this.pixelRatio_,this.overlaps_,h,e)}}}hasExecutors(t){for(const e in this.executorsByZIndex_){const i=this.executorsByZIndex_[e];for(let s=0,o=t.length;s<o;++s)if(t[s]in i)return!0}return!1}forEachFeatureAtCoordinate(t,e,i,s,o,l){s=Math.round(s);const h=s*2+1,c=vi(this.hitDetectionTransform_,s+.5,s+.5,1/e,-1/e,-i,-t[0],-t[1]),d=!this.hitDetectionContext_;d&&(this.hitDetectionContext_=Me(h,h,void 0,{willReadFrequently:!0}));const g=this.hitDetectionContext_;g.canvas.width!==h||g.canvas.height!==h?(g.canvas.width=h,g.canvas.height=h):d||g.clearRect(0,0,h,h);let _;this.renderBuffer_!==void 0&&(_=Nn(),ho(_,t),Zf(_,e*(this.renderBuffer_+s),_));const y=GM(s);let v;function E(k,b,B){const G=g.getImageData(0,0,h,h).data;for(let W=0,K=y.length;W<K;W++)if(G[y[W]]>0){if(!l||B==="none"||v!=="Image"&&v!=="Text"||l.includes(k)){const rt=(y[W]-3)/4,lt=s-rt%h,ct=s-(rt/h|0),et=o(k,b,lt*lt+ct*ct);if(et)return et}g.clearRect(0,0,h,h);break}}const M=Object.keys(this.executorsByZIndex_).map(Number);M.sort(zr);let w,S,R,O,P;for(w=M.length-1;w>=0;--w){const k=M[w].toString();for(R=this.executorsByZIndex_[k],S=Fs.length-1;S>=0;--S)if(v=Fs[S],O=R[v],O!==void 0&&(P=O.executeHitDetection(g,c,i,E,_),P))return P}}getClipCoords(t){const e=this.maxExtent_;if(!e)return null;const i=e[0],s=e[1],o=e[2],l=e[3],h=[i,s,i,l,o,l,o,s];return rr(h,0,8,2,t,h),h}isEmpty(){return jr(this.executorsByZIndex_)}execute(t,e,i,s,o,l,h){const c=Object.keys(this.executorsByZIndex_).map(Number);c.sort(h?qv:zr),l=l||Fs;const d=Fs.length;for(let g=0,_=c.length;g<_;++g){const y=c[g].toString(),v=this.executorsByZIndex_[y];for(let E=0,M=l.length;E<M;++E){const w=l[E],S=v[w];if(S!==void 0){const R=h===null?void 0:S.getZIndexContext(),O=R?R.getContext():t,P=this.maxExtent_&&w!=="Image"&&w!=="Text";if(P&&(O.save(),this.clip(O,i)),!R||w==="Text"||w==="Image"?S.execute(O,e,i,s,o,h):R.pushFunction(k=>S.execute(k,e,i,s,o,h)),P&&O.restore(),R){R.offset();const k=c[g]*d+E;this.deferredZIndexContexts_[k]||(this.deferredZIndexContexts_[k]=[]),this.deferredZIndexContexts_[k].push(R)}}}}this.renderedContext_=t}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const t=this.deferredZIndexContexts_,e=Object.keys(t).map(Number).sort(zr);for(let i=0,s=e.length;i<s;++i)t[e[i]].forEach(o=>{o.draw(this.renderedContext_),o.clear()}),t[e[i]].length=0}}const yf={};function GM(n){if(yf[n]!==void 0)return yf[n];const t=n*2+1,e=n*n,i=new Array(e+1);for(let o=0;o<=n;++o)for(let l=0;l<=n;++l){const h=o*o+l*l;if(h>e)break;let c=i[h];c||(c=[],i[h]=c),c.push(((n+o)*t+(n+l))*4+3),o>0&&c.push(((n-o)*t+(n+l))*4+3),l>0&&(c.push(((n+o)*t+(n-l))*4+3),o>0&&c.push(((n-o)*t+(n-l))*4+3))}const s=[];for(let o=0,l=i.length;o<l;++o)i[o]&&s.push(...i[o]);return yf[n]=s,s}const Xn=.5;function jM(n,t,e,i,s,o,l,h,c){const d=s,g=n[0]*Xn,_=n[1]*Xn,y=Me(g,_);y.imageSmoothingEnabled=!1;const v=y.canvas,E=new cM(y,Xn,s,null,l,h,null),M=e.length,w=Math.floor((256*256*256-1)/M),S={};for(let O=1;O<=M;++O){const P=e[O-1],k=P.getStyleFunction()||i;if(!k)continue;let b=k(P,o);if(!b)continue;Array.isArray(b)||(b=[b]);const G=(O*w).toString(16).padStart(7,"#00000");for(let W=0,K=b.length;W<K;++W){const rt=b[W],lt=rt.getGeometryFunction()(P);if(!lt||!Ge(d,lt.getExtent()))continue;const ct=rt.clone(),et=ct.getFill();et&&et.setColor(G);const wt=ct.getStroke();wt&&(wt.setColor(G),wt.setLineDash(null)),ct.setText(void 0);const st=rt.getImage();if(st){const V=st.getImageSize();if(!V)continue;const T=Me(V[0],V[1],void 0,{alpha:!1}),A=T.canvas;T.fillStyle=G,T.fillRect(0,0,A.width,A.height),ct.setImage(new hu({img:A,anchor:st.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:st.getOrigin(),opacity:1,size:st.getSize(),scale:st.getScale(),rotation:st.getRotation(),rotateWithView:st.getRotateWithView()}))}const nt=ct.getZIndex()||0;let z=S[nt];z||(z={},S[nt]=z,z.Polygon=[],z.Circle=[],z.LineString=[],z.Point=[]);const H=lt.getType();if(H==="GeometryCollection"){const V=lt.getGeometriesArrayRecursive();for(let T=0,A=V.length;T<A;++T){const ft=V[T];z[ft.getType().replace("Multi","")].push(ft,ct)}}else z[H.replace("Multi","")].push(lt,ct)}}const R=Object.keys(S).map(Number).sort(zr);for(let O=0,P=R.length;O<P;++O){const k=S[R[O]];for(const b in k){const B=k[b];for(let G=0,W=B.length;G<W;G+=2){E.setStyle(B[G+1]);for(let K=0,rt=t.length;K<rt;++K)E.setTransform(t[K]),E.drawGeometry(B[G])}}}return y.getImageData(0,0,v.width,v.height)}function WM(n,t,e){const i=[];if(e){const s=Math.floor(Math.round(n[0])*Xn),o=Math.floor(Math.round(n[1])*Xn),l=(le(s,0,e.width-1)+le(o,0,e.height-1)*e.width)*4,h=e.data[l],c=e.data[l+1],g=e.data[l+2]+256*(c+256*h),_=Math.floor((256*256*256-1)/t.length);g&&g%_===0&&i.push(t[g/_-1])}return i}const BM=5;class UM extends Do{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.staleKeys_=new Array,this.maxStaleKeys=BM}getStaleKeys(){return this.staleKeys_}prependStaleKey(t){this.staleKeys_.unshift(t),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(t){return Mt()}getData(t){return null}prepareFrame(t){return Mt()}renderFrame(t,e){return Mt()}forEachFeatureAtCoordinate(t,e,i,s,o){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){const e=t.target;(e.getState()===ut.LOADED||e.getState()===ut.ERROR)&&this.renderIfReadyAndVisible()}loadImage(t){let e=t.getState();return e!=ut.LOADED&&e!=ut.ERROR&&t.addEventListener(Ct.CHANGE,this.boundHandleImageChange_),e==ut.IDLE&&(t.load(),e=t.getState()),e==ut.LOADED}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&t.getSourceState()==="ready"&&t.changed()}renderDeferred(t){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const O_=[];let Os=null;function XM(){Os=Me(1,1,void 0,{willReadFrequently:!0})}class vy extends UM{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=kn(),this.pixelTransform=kn(),this.inversePixelTransform=kn(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(t,e,i){Os||XM(),Os.clearRect(0,0,1,1);let s;try{Os.drawImage(t,e,i,1,1,0,0,1,1),s=Os.getImageData(0,0,1,1).data}catch{return Os=null,null}return s}getBackground(t){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(t.viewState.resolution)),i||void 0}useContainer(t,e,i){const s=this.getLayer().getClassName();let o,l;if(t&&t.className===s&&(!i||t&&t.style.backgroundColor&&cr(Hs(t.style.backgroundColor),Hs(i)))){const h=t.firstElementChild;h instanceof HTMLCanvasElement&&(l=h.getContext("2d"))}if(l&&l.canvas.style.transform===e?(this.container=t,this.context=l,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){o=document.createElement("div"),o.className=s;let h=o.style;h.position="absolute",h.width="100%",h.height="100%",l=Me();const c=l.canvas;o.appendChild(c),h=c.style,h.position="absolute",h.left="0",h.transformOrigin="top left",this.container=o,this.context=l}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(t,e,i){const s=Zh(i),o=id(i),l=ed(i),h=td(i);ve(e.coordinateToPixelTransform,s),ve(e.coordinateToPixelTransform,o),ve(e.coordinateToPixelTransform,l),ve(e.coordinateToPixelTransform,h);const c=this.inversePixelTransform;ve(c,s),ve(c,o),ve(c,l),ve(c,h),t.save(),t.beginPath(),t.moveTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(l[0]),Math.round(l[1])),t.lineTo(Math.round(h[0]),Math.round(h[1])),t.clip()}prepareContainer(t,e){const i=t.extent,s=t.viewState.resolution,o=t.viewState.rotation,l=t.pixelRatio,h=Math.round(Nt(i)/s*l),c=Math.round(ge(i)/s*l);vi(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/l,1/l,o,-h/2,-c/2),Sp(this.inversePixelTransform,this.pixelTransform);const d=Z2(this.pixelTransform);if(this.useContainer(e,d,this.getBackground(t)),!this.containerReused){const g=this.context.canvas;g.width!=h||g.height!=c?(g.width=h,g.height=c):this.context.clearRect(0,0,h,c),d!==g.style.transform&&(g.style.transform=d)}}dispatchRenderEvent_(t,e,i){const s=this.getLayer();if(s.hasListener(t)){const o=new oy(t,this.inversePixelTransform,i,e);s.dispatchEvent(o)}}preRender(t,e){this.frameState=e,!e.declutter&&this.dispatchRenderEvent_(xn.PRERENDER,t,e)}postRender(t,e){e.declutter||this.dispatchRenderEvent_(xn.POSTRENDER,t,e)}renderDeferredInternal(t){}getRenderContext(t){return t.declutter&&!this.deferredContext_&&(this.deferredContext_=new py),t.declutter?this.deferredContext_.getContext():this.context}renderDeferred(t){t.declutter&&(this.dispatchRenderEvent_(xn.PRERENDER,this.context,t),t.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(t),this.dispatchRenderEvent_(xn.POSTRENDER,this.context,t))}getRenderTransform(t,e,i,s,o,l,h){const c=o/2,d=l/2,g=s/e,_=-g,y=-t[0]+h,v=-t[1];return vi(this.tempTransform,c,d,g,_,-i,y,v)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class VM extends vy{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Nn(),this.wrappedRenderedExtent_=Nn(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(t,e,i){const s=e.extent,o=e.viewState,l=o.center,h=o.resolution,c=o.projection,d=o.rotation,g=c.getExtent(),_=this.getLayer().getSource(),y=this.getLayer().getDeclutter(),v=e.pixelRatio,E=e.viewHints,M=!(E[de.ANIMATING]||E[de.INTERACTING]),w=this.context,S=Math.round(Nt(s)/h*v),R=Math.round(ge(s)/h*v),O=_.getWrapX()&&c.canWrapX(),P=O?Nt(g):null,k=O?Math.ceil((s[2]-g[2])/P)+1:1;let b=O?Math.floor((s[0]-g[0])/P):0;do{let B=this.getRenderTransform(l,h,0,v,S,R,b*P);e.declutter&&(B=B.slice(0)),t.execute(w,[w.canvas.width,w.canvas.height],B,d,M,i===void 0?Fs:i?yy:bM,i?y&&e.declutter[y]:void 0)}while(++b<k)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=Me(this.context.canvas.width,this.context.canvas.height,O_))}resetDrawContext_(){if(this.opacity_!==1){const t=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=t,wd(this.context),O_.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(t){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,t,!0)}renderDeferredInternal(t){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(t,e){const i=t.layerStatesArray[t.layerIndex];this.opacity_=i.opacity;const s=t.viewState;this.prepareContainer(t,e);const o=this.context,l=this.replayGroup_;let h=l&&!l.isEmpty();if(!h&&!(this.getLayer().hasListener(xn.PRERENDER)||this.getLayer().hasListener(xn.POSTRENDER)))return null;if(this.setDrawContext_(),this.preRender(o,t),s.projection,this.clipped_=!1,h&&i.extent&&this.clipping){const c=Nr(i.extent);h=Ge(c,t.extent),this.clipped_=h&&!tr(c,t.extent),this.clipped_&&this.clipUnrotated(o,t,c)}return h&&this.renderWorlds(l,t,this.getLayer().getDeclutter()?!1:void 0),!t.declutter&&this.clipped_&&o.restore(),this.postRender(o,t),this.renderedRotation_!==s.rotation&&(this.renderedRotation_=s.rotation,this.hitDetectionImageData_=null),t.declutter||this.resetDrawContext_(),this.container}getFeatures(t){return new Promise(e=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=this.frameState.size.slice(),s=this.renderedCenter_,o=this.renderedResolution_,l=this.renderedRotation_,h=this.renderedProjection_,c=this.wrappedRenderedExtent_,d=this.getLayer(),g=[],_=i[0]*Xn,y=i[1]*Xn;g.push(this.getRenderTransform(s,o,l,Xn,_,y,0).slice());const v=d.getSource(),E=h.getExtent();if(v.getWrapX()&&h.canWrapX()&&!tr(E,c)){let M=c[0];const w=Nt(E);let S=0,R;for(;M<E[0];)--S,R=w*S,g.push(this.getRenderTransform(s,o,l,Xn,_,y,R).slice()),M+=w;for(S=0,M=c[2];M>E[2];)++S,R=w*S,g.push(this.getRenderTransform(s,o,l,Xn,_,y,R).slice()),M-=w}this.hitDetectionImageData_=jM(i,g,this.renderedFeatures_,d.getStyleFunction(),c,o,l,w_(o,this.renderedPixelRatio_))}e(WM(t,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(t,e,i,s,o){var y,v;if(!this.replayGroup_)return;const l=e.viewState.resolution,h=e.viewState.rotation,c=this.getLayer(),d={},g=function(E,M,w){const S=ie(E),R=d[S];if(R){if(R!==!0&&w<R.distanceSq){if(w===0)return d[S]=!0,o.splice(o.lastIndexOf(R),1),s(E,c,M);R.geometry=M,R.distanceSq=w}}else{if(w===0)return d[S]=!0,s(E,c,M);o.push(d[S]={feature:E,layer:c,geometry:M,distanceSq:w,callback:s})}},_=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(t,l,h,i,g,_?(v=(y=e.declutter)==null?void 0:y[_])==null?void 0:v.all().map(E=>E.value):null)}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const e=this.getLayer(),i=e.getSource();if(!i)return!1;const s=t.viewHints[de.ANIMATING],o=t.viewHints[de.INTERACTING],l=e.getUpdateWhileAnimating(),h=e.getUpdateWhileInteracting();if(this.ready&&!l&&s||!h&&o)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const c=t.extent,d=t.viewState,g=d.projection,_=d.resolution,y=t.pixelRatio,v=e.getRevision(),E=e.getRenderBuffer();let M=e.getRenderOrder();M===void 0&&(M=dM);const w=d.center.slice(),S=Zf(c,E*_),R=S.slice(),O=[S.slice()],P=g.getExtent();if(i.getWrapX()&&g.canWrapX()&&!tr(P,t.extent)){const et=Nt(P),wt=Math.max(Nt(S)/2,et);S[0]=P[0]-wt,S[2]=P[2]+wt,gp(w,g);const st=dp(O[0],g);st[0]<P[0]&&st[2]<P[2]?O.push([st[0]+et,st[1],st[2]+et,st[3]]):st[0]>P[0]&&st[2]>P[2]&&O.push([st[0]-et,st[1],st[2]-et,st[3]])}if(this.ready&&this.renderedResolution_==_&&this.renderedRevision_==v&&this.renderedRenderOrder_==M&&this.renderedFrameDeclutter_===!!t.declutter&&tr(this.wrappedRenderedExtent_,S))return cr(this.renderedExtent_,R)||(this.hitDetectionImageData_=null,this.renderedExtent_=R),this.renderedCenter_=w,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const k=new OM(dy(_,y),S,_,y);let b;for(let et=0,wt=O.length;et<wt;++et)i.loadFeatures(O[et],_,g);const B=w_(_,y);let G=!0;const W=(et,wt)=>{let st;const nt=et.getStyleFunction()||e.getStyleFunction();if(nt&&(st=nt(et,_)),st){const z=this.renderFeature(et,B,st,k,b,this.getLayer().getDeclutter(),wt);G=G&&!z}},K=Cp(S),rt=i.getFeaturesInExtent(K);M&&rt.sort(M);for(let et=0,wt=rt.length;et<wt;++et)W(rt[et],et);this.renderedFeatures_=rt,this.ready=G;const lt=k.finish(),ct=new zM(S,_,y,i.getOverlaps(),lt,e.getRenderBuffer(),!!t.declutter);return this.renderedResolution_=_,this.renderedRevision_=v,this.renderedRenderOrder_=M,this.renderedFrameDeclutter_=!!t.declutter,this.renderedExtent_=R,this.wrappedRenderedExtent_=S,this.renderedCenter_=w,this.renderedProjection_=g,this.renderedPixelRatio_=y,this.replayGroup_=ct,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,e,i,s,o,l,h){if(!i)return!1;let c=!1;if(Array.isArray(i))for(let d=0,g=i.length;d<g;++d)c=C_(s,t,i[d],e,this.boundHandleStyleImageChange_,o,l,h)||c;else c=C_(s,t,i,e,this.boundHandleStyleImageChange_,o,l,h);return c}}class $M extends ay{constructor(t){super(t)}createRenderer(){return new VM(this)}}let vf;const uo=[];function N_(n,t,e,i,s){n.beginPath(),n.moveTo(0,0),n.lineTo(t,e),n.lineTo(i,s),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(t,i)+1,Math.max(e,s)),n.restore()}function xf(n,t){return Math.abs(n[t*4]-210)>2||Math.abs(n[t*4+3]-.75*255)>2}function YM(){if(vf===void 0){const n=Me(6,6,uo);n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",N_(n,4,5,4,0),N_(n,4,5,0,5);const t=n.getImageData(0,0,3,3).data;vf=xf(t,0)||xf(t,4)||xf(t,8),wd(n),uo.push(n.canvas)}return vf}function qM(n,t,e,i){const s=wp(e,t,n);let o=qm(t,i,e);const l=t.getMetersPerUnit();l!==void 0&&(o*=l);const h=n.getMetersPerUnit();h!==void 0&&(o/=h);const c=n.getExtent();if(!c||yo(c,s)){const d=qm(n,o,s)/o;isFinite(d)&&d>0&&(o/=d)}return o}function HM(n,t,e,i,s,o,l,h,c,d,g,_,y,v){const E=Me(Math.round(e*n),Math.round(e*t),uo);if(_||(E.imageSmoothingEnabled=!1),c.length===0)return E.canvas;E.scale(e,e);function M(k){return Math.round(k*e)/e}E.globalCompositeOperation="lighter";const w=Nn();c.forEach(function(k,b,B){cp(w,k.extent)});let S;const R=e/i,O=(_?1:1+Math.pow(2,-24))/R;(c.length!==1||d!==0)&&(S=Me(Math.round(Nt(w)*R),Math.round(ge(w)*R),uo),_||(S.imageSmoothingEnabled=!1),c.forEach(function(k,b,B){if(k.image.width>0&&k.image.height>0){if(k.clipExtent){S.save();const lt=(k.clipExtent[0]-w[0])*R,ct=-(k.clipExtent[3]-w[3])*R,et=Nt(k.clipExtent)*R,wt=ge(k.clipExtent)*R;S.rect(_?lt:Math.round(lt),_?ct:Math.round(ct),_?et:Math.round(lt+et)-Math.round(lt),_?wt:Math.round(ct+wt)-Math.round(ct)),S.clip()}const G=(k.extent[0]-w[0])*R,W=-(k.extent[3]-w[3])*R,K=Nt(k.extent)*R,rt=ge(k.extent)*R;S.drawImage(k.image,d,d,k.image.width-2*d,k.image.height-2*d,_?G:Math.round(G),_?W:Math.round(W),_?K:Math.round(G+K)-Math.round(G),_?rt:Math.round(W+rt)-Math.round(W)),k.clipExtent&&S.restore()}}));const P=Zh(l);return h.getTriangles().forEach(function(k,b,B){const G=k.source,W=k.target;let K=G[0][0],rt=G[0][1],lt=G[1][0],ct=G[1][1],et=G[2][0],wt=G[2][1];const st=M((W[0][0]-P[0])/o),nt=M(-(W[0][1]-P[1])/o),z=M((W[1][0]-P[0])/o),H=M(-(W[1][1]-P[1])/o),V=M((W[2][0]-P[0])/o),T=M(-(W[2][1]-P[1])/o),A=K,ft=rt;K=0,rt=0,lt-=A,ct-=ft,et-=A,wt-=ft;const dt=[[lt,ct,0,0,z-st],[et,wt,0,0,V-st],[0,0,lt,ct,H-nt],[0,0,et,wt,T-nt]],pt=a2(dt);if(!pt)return;if(E.save(),E.beginPath(),YM()||!_){E.moveTo(z,H);const St=4,Rt=st-z,kt=nt-H;for(let Wt=0;Wt<St;Wt++)E.lineTo(z+M((Wt+1)*Rt/St),H+M(Wt*kt/(St-1))),Wt!=St-1&&E.lineTo(z+M((Wt+1)*Rt/St),H+M((Wt+1)*kt/(St-1)));E.lineTo(V,T)}else E.moveTo(z,H),E.lineTo(st,nt),E.lineTo(V,T);E.clip(),E.transform(pt[0],pt[2],pt[1],pt[3],st,nt),E.translate(w[0]-A,w[3]-ft);let Et;if(S)Et=S.canvas,E.scale(O,-O);else{const St=c[0],Rt=St.extent;Et=St.image,E.scale(Nt(Rt)/Et.width,-ge(Rt)/Et.height)}E.drawImage(Et,0,0),E.restore()}),S&&(wd(S),uo.push(S.canvas)),E.canvas}const KM=10,D_=.25;class ZM{constructor(t,e,i,s,o,l,h){this.sourceProj_=t,this.targetProj_=e;let c={};const d=h?Af(O=>ve(h,wp(O,this.targetProj_,this.sourceProj_))):xo(this.targetProj_,this.sourceProj_);this.transformInv_=function(O){const P=O[0]+"/"+O[1];return c[P]||(c[P]=d(O)),c[P]},this.maxSourceExtent_=s,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!s&&!!this.sourceProj_.getExtent()&&Nt(s)>=Nt(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Nt(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Nt(this.targetProj_.getExtent()):null;const g=Zh(i),_=id(i),y=ed(i),v=td(i),E=this.transformInv_(g),M=this.transformInv_(_),w=this.transformInv_(y),S=this.transformInv_(v),R=KM+(l?Math.max(0,Math.ceil(Math.log2(u2(i)/(l*l*256*256)))):0);if(this.addQuad_(g,_,y,v,E,M,w,S,R),this.wrapsXInSource_){let O=1/0;this.triangles_.forEach(function(P,k,b){O=Math.min(O,P.source[0][0],P.source[1][0],P.source[2][0])}),this.triangles_.forEach(P=>{if(Math.max(P.source[0][0],P.source[1][0],P.source[2][0])-O>this.sourceWorldWidth_/2){const k=[[P.source[0][0],P.source[0][1]],[P.source[1][0],P.source[1][1]],[P.source[2][0],P.source[2][1]]];k[0][0]-O>this.sourceWorldWidth_/2&&(k[0][0]-=this.sourceWorldWidth_),k[1][0]-O>this.sourceWorldWidth_/2&&(k[1][0]-=this.sourceWorldWidth_),k[2][0]-O>this.sourceWorldWidth_/2&&(k[2][0]-=this.sourceWorldWidth_);const b=Math.min(k[0][0],k[1][0],k[2][0]);Math.max(k[0][0],k[1][0],k[2][0])-b<this.sourceWorldWidth_/2&&(P.source=k)}})}c={}}addTriangle_(t,e,i,s,o,l){this.triangles_.push({source:[s,o,l],target:[t,e,i]})}addQuad_(t,e,i,s,o,l,h,c,d){const g=Gm([o,l,h,c]),_=this.sourceWorldWidth_?Nt(g)/this.sourceWorldWidth_:null,y=this.sourceWorldWidth_,v=this.sourceProj_.canWrapX()&&_>.5&&_<1;let E=!1;if(d>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const w=Gm([t,e,i,s]);E=Nt(w)/this.targetWorldWidth_>D_||E}!v&&this.sourceProj_.isGlobal()&&_&&(E=_>D_||E)}if(!E&&this.maxSourceExtent_&&isFinite(g[0])&&isFinite(g[1])&&isFinite(g[2])&&isFinite(g[3])&&!Ge(g,this.maxSourceExtent_))return;let M=0;if(!E&&(!isFinite(o[0])||!isFinite(o[1])||!isFinite(l[0])||!isFinite(l[1])||!isFinite(h[0])||!isFinite(h[1])||!isFinite(c[0])||!isFinite(c[1]))){if(d>0)E=!0;else if(M=(!isFinite(o[0])||!isFinite(o[1])?8:0)+(!isFinite(l[0])||!isFinite(l[1])?4:0)+(!isFinite(h[0])||!isFinite(h[1])?2:0)+(!isFinite(c[0])||!isFinite(c[1])?1:0),M!=1&&M!=2&&M!=4&&M!=8)return}if(d>0){if(!E){const w=[(t[0]+i[0])/2,(t[1]+i[1])/2],S=this.transformInv_(w);let R;v?R=(lo(o[0],y)+lo(h[0],y))/2-lo(S[0],y):R=(o[0]+h[0])/2-S[0];const O=(o[1]+h[1])/2-S[1];E=R*R+O*O>this.errorThresholdSquared_}if(E){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){const w=[(e[0]+i[0])/2,(e[1]+i[1])/2],S=this.transformInv_(w),R=[(s[0]+t[0])/2,(s[1]+t[1])/2],O=this.transformInv_(R);this.addQuad_(t,e,w,R,o,l,S,O,d-1),this.addQuad_(R,w,i,s,O,S,h,c,d-1)}else{const w=[(t[0]+e[0])/2,(t[1]+e[1])/2],S=this.transformInv_(w),R=[(i[0]+s[0])/2,(i[1]+s[1])/2],O=this.transformInv_(R);this.addQuad_(t,w,R,s,o,S,O,c,d-1),this.addQuad_(w,e,i,R,S,l,h,O,d-1)}return}}if(v){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}M&11||this.addTriangle_(t,i,s,o,h,c),M&14||this.addTriangle_(t,i,e,o,h,l),M&&(M&13||this.addTriangle_(e,s,t,l,c,o),M&7||this.addTriangle_(e,s,i,l,c,h))}calculateSourceExtent(){const t=Nn();return this.triangles_.forEach(function(e,i,s){const o=e.source;ho(t,o[0]),ho(t,o[1]),ho(t,o[2])}),t}getTriangles(){return this.triangles_}}const QM=.5;class JM extends vy{constructor(t){super(t),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(t){const e=t.layerStatesArray[t.layerIndex],i=t.pixelRatio,s=t.viewState,o=s.resolution,l=this.getLayer().getSource(),h=t.viewHints;let c=t.extent;if(e.extent!==void 0&&(c=nd(c,Nr(e.extent,s.projection))),!h[de.ANIMATING]&&!h[de.INTERACTING]&&!na(c))if(l){const d=s.projection,g=l.getImage(c,o,i,d);g&&(this.loadImage(g)?this.image=g:g.getState()===ut.EMPTY&&(this.image=null))}else this.image=null;return!!this.image}getData(t){const e=this.frameState;if(!e)return null;const i=this.getLayer(),s=ve(e.pixelToCoordinateTransform,t.slice()),o=i.getExtent();if(o&&!yo(o,s))return null;const l=this.image.getExtent(),h=this.image.getImage(),c=Nt(l),d=Math.floor(h.width*((s[0]-l[0])/c));if(d<0||d>=h.width)return null;const g=ge(l),_=Math.floor(h.height*((l[3]-s[1])/g));return _<0||_>=h.height?null:this.getImageData(h,d,_)}renderFrame(t,e){const i=this.image,s=i.getExtent(),o=i.getResolution(),[l,h]=Array.isArray(o)?o:[o,o],c=i.getPixelRatio(),d=t.layerStatesArray[t.layerIndex],g=t.pixelRatio,_=t.viewState,y=_.center,v=_.resolution,E=g*l/(v*c),M=g*h/(v*c);this.prepareContainer(t,e);const w=this.context.canvas.width,S=this.context.canvas.height,R=this.getRenderContext(t);let O=!1,P=!0;if(d.extent){const W=Nr(d.extent,_.projection);P=Ge(W,t.extent),O=P&&!tr(W,t.extent),O&&this.clipUnrotated(R,t,W)}const k=i.getImage(),b=vi(this.tempTransform,w/2,S/2,E,M,0,c*(s[0]-y[0])/l,c*(y[1]-s[3])/h);this.renderedResolution=h*g/c;const B=k.width*b[0],G=k.height*b[3];if(this.getLayer().getSource().getInterpolate()||(R.imageSmoothingEnabled=!1),this.preRender(R,t),P&&B>=.5&&G>=.5){const W=b[4],K=b[5],rt=d.opacity;rt!==1&&(R.save(),R.globalAlpha=rt),R.drawImage(k,0,0,+k.width,+k.height,W,K,B,G),rt!==1&&R.restore()}return this.postRender(this.context,t),O&&R.restore(),R.imageSmoothingEnabled=!0,this.container}}class tw extends su{constructor(t){t=t||{},super(t)}}class ew extends tw{constructor(t){super(t)}createRenderer(){return new JM(this)}getData(t){return super.getData(t)}}function Bf(n){return Array.isArray(n)?Math.min(...n):n}class nw extends Od{constructor(t,e,i,s,o,l,h){let c=t.getExtent();c&&t.canWrapX()&&(c=c.slice(),c[0]=-1/0,c[2]=1/0);let d=e.getExtent();d&&e.canWrapX()&&(d=d.slice(),d[0]=-1/0,d[2]=1/0);const g=d?nd(i,d):i,_=yi(g),y=qM(t,e,_,s),v=QM,E=new ZM(t,e,g,c,y*v,s),M=E.calculateSourceExtent(),w=na(M)?null:l(M,y,o),S=w?ut.IDLE:ut.EMPTY,R=w?w.getPixelRatio():1;super(i,s,R,S),this.targetProj_=e,this.maxSourceExtent_=c,this.triangulation_=E,this.targetResolution_=s,this.targetExtent_=i,this.sourceImage_=w,this.sourcePixelRatio_=R,this.interpolate_=h,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==ut.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const t=this.sourceImage_.getState();if(t==ut.LOADED){const e=Nt(this.targetExtent_)/this.targetResolution_,i=ge(this.targetExtent_)/this.targetResolution_;this.canvas_=HM(e,i,this.sourcePixelRatio_,Bf(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_)}this.state=t,this.changed()}load(){if(this.state==ut.IDLE){this.state=ut.LOADING,this.changed();const t=this.sourceImage_.getState();t==ut.LOADED||t==ut.ERROR?this.reproject_():(this.sourceListenerKey_=At(this.sourceImage_,Ct.CHANGE,e=>{const i=this.sourceImage_.getState();(i==ut.LOADED||i==ut.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){Kt(this.sourceListenerKey_),this.sourceListenerKey_=null}}const mh=4,Ef={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class iw extends xi{constructor(t,e){super(t),this.image=e}}class rw extends _y{constructor(t){super({attributions:t.attributions,projection:t.projection,state:t.state,interpolate:t.interpolate!==void 0?t.interpolate:!0}),this.on,this.once,this.un,this.loader=t.loader||null,this.resolutions_=t.resolutions!==void 0?t.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=t.loader?t.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(t){this.resolutions_=t}findNearestResolution(t){const e=this.getResolutions();if(e){const i=Kf(e,t,0);t=e[i]}return t}getImage(t,e,i,s){const o=this.getProjection();if(!o||!s||kf(o,s))return o&&(s=o),this.getImageInternal(t,e,i,s);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&kf(this.reprojectedImage_.getProjection(),s)&&this.reprojectedImage_.getResolution()==e&&vo(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new nw(o,s,t,e,i,(l,h,c)=>this.getImageInternal(l,h,c,o),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(t,e,i,s){if(this.loader){const o=aw(t,e,i,1),l=this.findNearestResolution(e);if(this.image&&(this.static_||this.wantedProjection_===s&&(this.wantedExtent_&&tr(this.wantedExtent_,o)||tr(this.image.getExtent(),o))&&(this.wantedResolution_&&Bf(this.wantedResolution_)===l||Bf(this.image.getResolution())===l)))return this.image;this.wantedProjection_=s,this.wantedExtent_=o,this.wantedResolution_=l,this.image=new Od(o,l,i,this.loader),this.image.addEventListener(Ct.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(t){const e=t.target;let i;switch(e.getState()){case ut.LOADING:this.loading=!0,i=Ef.IMAGELOADSTART;break;case ut.LOADED:this.loading=!1,i=Ef.IMAGELOADEND;break;case ut.ERROR:this.loading=!1,i=Ef.IMAGELOADERROR;break;default:return}this.hasListener(i)&&this.dispatchEvent(new iw(i,e))}}function sw(n,t){n.getImage().src=t}function aw(n,t,e,i){const s=t/e,o=yi(n),l=oh(Nt(n)/s,mh),h=oh(ge(n)/s,mh),c=oh((i-1)*l/2,mh),d=l+2*c,g=oh((i-1)*h/2,mh),_=h+2*g;return Rh(o,s,0,[d,_])}function ow(n){const t=n.load||Zp,e=n.imageExtent,i=n.crossOrigin??null;return()=>{const s=new Image;return s.crossOrigin=i,t(s,n.url).then(o=>{const l=Nt(e)/o.width,h=ge(e)/o.height;return{image:o,extent:e,resolution:l!==h?[l,h]:h,pixelRatio:1}})}}class lw extends rw{constructor(t){const e=t.crossOrigin!==void 0?t.crossOrigin:null,i=t.imageLoadFunction!==void 0?t.imageLoadFunction:sw;super({attributions:t.attributions,interpolate:t.interpolate,projection:Jt(t.projection)}),this.url_=t.url,this.imageExtent_=t.imageExtent,this.image=null,this.image=new Od(this.imageExtent_,void 0,1,ow({url:t.url,imageExtent:t.imageExtent,crossOrigin:e,load:(s,o)=>(this.image.setImage(s),i(this.image,o),Zp(s))})),this.image.addEventListener(Ct.CHANGE,this.handleImageChange.bind(this))}getImageExtent(){return this.imageExtent_}getImageInternal(t,e,i,s){return Ge(t,this.image.getExtent())?this.image:null}getUrl(){return this.url_}}class hw{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=fu,this.supportedMediaTypes=null}getReadOptions(t,e){if(e){let i=e.dataProjection?Jt(e.dataProjection):this.readProjection(t);e.extent&&i&&i.getUnits()==="tile-pixels"&&(i=Jt(i),i.setWorldExtent(e.extent)),e={dataProjection:i,featureProjection:e.featureProjection}}return this.adaptOptions(e)}adaptOptions(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},t)}getType(){return Mt()}readFeature(t,e){return Mt()}readFeatures(t,e){return Mt()}readGeometry(t,e){return Mt()}readProjection(t){return Mt()}writeFeature(t,e){return Mt()}writeFeatures(t,e){return Mt()}writeGeometry(t,e){return Mt()}}function bd(n,t,e){const i=e?Jt(e.featureProjection):null,s=e?Jt(e.dataProjection):null;let o=n;if(i&&s&&!kf(i,s)){t&&(o=n.clone());const l=t?i:s,h=t?s:i;l.getUnits()==="tile-pixels"?o.transform(l,h):o.applyTransform(xo(l,h))}if(t&&e&&e.decimals!==void 0){const l=Math.pow(10,e.decimals),h=function(c){for(let d=0,g=c.length;d<g;++d)c[d]=Math.round(c[d]*l)/l;return c};o===n&&(o=n.clone()),o.applyTransform(h)}return o}const uw={Point:Ah,LineString:Js,Polygon:lr,MultiPoint:du,MultiLineString:jh,MultiPolygon:Wh};function cw(n,t,e){return Array.isArray(t[0])?(Fp(n,0,t,e)||(n=n.slice(),Df(n,0,t,e)),n):(yd(n,0,t,e)||(n=n.slice(),kh(n,0,t,e)),n)}function xy(n,t){var o;const e=n.geometry;if(!e)return[];if(Array.isArray(e))return e.map(l=>xy({...n,geometry:l})).flat();const i=e.type==="MultiPolygon"?"Polygon":e.type;if(i==="GeometryCollection"||i==="Circle")throw new Error("Unsupported geometry type: "+i);const s=e.layout.length;return bd(new hn(i,i==="Polygon"?cw(e.flatCoordinates,e.ends,s):e.flatCoordinates,(o=e.ends)==null?void 0:o.flat(),s,n.properties||{},n.id).enableSimplifyTransformed(),!1,t)}function zd(n,t){if(!n)return null;if(Array.isArray(n)){const i=n.map(s=>zd(s,t));return new Gh(i)}const e=uw[n.type];return bd(new e(n.flatCoordinates,n.layout||"XY",n.ends),!1,t)}class fw extends hw{constructor(){super()}getType(){return"json"}readFeature(t,e){return this.readFeatureFromObject(_h(t),this.getReadOptions(t,e))}readFeatures(t,e){return this.readFeaturesFromObject(_h(t),this.getReadOptions(t,e))}readFeatureFromObject(t,e){return Mt()}readFeaturesFromObject(t,e){return Mt()}readGeometry(t,e){return this.readGeometryFromObject(_h(t),this.getReadOptions(t,e))}readGeometryFromObject(t,e){return Mt()}readProjection(t){return this.readProjectionFromObject(_h(t))}readProjectionFromObject(t){return Mt()}writeFeature(t,e){return JSON.stringify(this.writeFeatureObject(t,e))}writeFeatureObject(t,e){return Mt()}writeFeatures(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))}writeFeaturesObject(t,e){return Mt()}writeGeometry(t,e){return JSON.stringify(this.writeGeometryObject(t,e))}writeGeometryObject(t,e){return Mt()}}function _h(n){if(typeof n=="string"){const t=JSON.parse(n);return t||null}return n!==null?n:null}class dw extends fw{constructor(t){t=t||{},super(),this.dataProjection=Jt(t.dataProjection?t.dataProjection:"EPSG:4326"),t.featureProjection&&(this.defaultFeatureProjection=Jt(t.featureProjection)),t.featureClass&&(this.featureClass=t.featureClass),this.geometryName_=t.geometryName,this.extractGeometryName_=t.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(t,e){let i=null;t.type==="Feature"?i=t:i={type:"Feature",geometry:t,properties:null};const s=Gd(i.geometry);if(this.featureClass===hn)return xy({geometry:s,id:i.id,properties:i.properties},e);const o=new fu;return this.geometryName_?o.setGeometryName(this.geometryName_):this.extractGeometryName_&&i.geometry_name&&o.setGeometryName(i.geometry_name),o.setGeometry(zd(s,e)),"id"in i&&o.setId(i.id),i.properties&&o.setProperties(i.properties,!0),o}readFeaturesFromObject(t,e){const i=t;let s=null;if(i.type==="FeatureCollection"){const o=t;s=[];const l=o.features;for(let h=0,c=l.length;h<c;++h){const d=this.readFeatureFromObject(l[h],e);d&&s.push(d)}}else s=[this.readFeatureFromObject(t,e)];return s.flat()}readGeometryFromObject(t,e){return gw(t,e)}readProjectionFromObject(t){const e=t.crs;let i;if(e)if(e.type=="name")i=Jt(e.properties.name);else if(e.type==="EPSG")i=Jt("EPSG:"+e.properties.code);else throw new Error("Unknown SRS type");else i=this.dataProjection;return i}writeFeatureObject(t,e){e=this.adaptOptions(e);const i={type:"Feature",geometry:null,properties:null},s=t.getId();if(s!==void 0&&(i.id=s),!t.hasProperties())return i;const o=t.getProperties(),l=t.getGeometry();return l&&(i.geometry=Uf(l,e),delete o[t.getGeometryName()]),jr(o)||(i.properties=o),i}writeFeaturesObject(t,e){e=this.adaptOptions(e);const i=[];for(let s=0,o=t.length;s<o;++s)i.push(this.writeFeatureObject(t[s],e));return{type:"FeatureCollection",features:i}}writeGeometryObject(t,e){return Uf(t,this.adaptOptions(e))}}function Gd(n,t){if(!n)return null;let e;switch(n.type){case"Point":{e=_w(n);break}case"LineString":{e=pw(n);break}case"Polygon":{e=Ew(n);break}case"MultiPoint":{e=vw(n);break}case"MultiLineString":{e=yw(n);break}case"MultiPolygon":{e=xw(n);break}case"GeometryCollection":{e=mw(n);break}default:throw new Error("Unsupported GeoJSON type: "+n.type)}return e}function gw(n,t){const e=Gd(n);return zd(e,t)}function mw(n,t){return n.geometries.map(function(i){return Gd(i)})}function _w(n){const t=n.coordinates;return{type:"Point",flatCoordinates:t,layout:Yr(t.length)}}function pw(n){var i;const t=n.coordinates,e=t.flat();return{type:"LineString",flatCoordinates:e,ends:[e.length],layout:Yr(((i=t[0])==null?void 0:i.length)||2)}}function yw(n){var o,l;const t=n.coordinates,e=((l=(o=t[0])==null?void 0:o[0])==null?void 0:l.length)||2,i=[],s=zo(i,0,t,e);return{type:"MultiLineString",flatCoordinates:i,ends:s,layout:Yr(e)}}function vw(n){var e;const t=n.coordinates;return{type:"MultiPoint",flatCoordinates:t.flat(),layout:Yr(((e=t[0])==null?void 0:e.length)||2)}}function xw(n){var o,l;const t=n.coordinates,e=[],i=((l=(o=t[0])==null?void 0:o[0])==null?void 0:l[0].length)||2,s=Lp(e,0,t,i);return{type:"MultiPolygon",flatCoordinates:e,ends:s,layout:Yr(i)}}function Ew(n){var o,l;const t=n.coordinates,e=[],i=(l=(o=t[0])==null?void 0:o[0])==null?void 0:l.length,s=zo(e,0,t,i);return{type:"Polygon",flatCoordinates:e,ends:s,layout:Yr(i)}}function Uf(n,t){n=bd(n,!0,t);const e=n.getType();let i;switch(e){case"Point":{i=Iw(n);break}case"LineString":{i=ww(n);break}case"Polygon":{i=Tw(n,t);break}case"MultiPoint":{i=Sw(n);break}case"MultiLineString":{i=Cw(n);break}case"MultiPolygon":{i=Rw(n,t);break}case"GeometryCollection":{i=Mw(n,t);break}case"Circle":{i={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+e)}return i}function Mw(n,t){return t=Object.assign({},t),delete t.featureProjection,{type:"GeometryCollection",geometries:n.getGeometriesArray().map(function(i){return Uf(i,t)})}}function ww(n,t){return{type:"LineString",coordinates:n.getCoordinates()}}function Cw(n,t){return{type:"MultiLineString",coordinates:n.getCoordinates()}}function Sw(n,t){return{type:"MultiPoint",coordinates:n.getCoordinates()}}function Rw(n,t){let e;return t&&(e=t.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(e)}}function Iw(n,t){return{type:"Point",coordinates:n.getCoordinates()}}function Tw(n,t){let e;return t&&(e=t.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(e)}}function Pw(n){n("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),n("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),n("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var t=1;t<=60;++t)n("EPSG:"+(32600+t),"+proj=utm +zone="+t+" +datum=WGS84 +units=m"),n("EPSG:"+(32700+t),"+proj=utm +zone="+t+" +south +datum=WGS84 +units=m");n.WGS84=n["EPSG:4326"],n["EPSG:3785"]=n["EPSG:3857"],n.GOOGLE=n["EPSG:3857"],n["EPSG:900913"]=n["EPSG:3857"],n["EPSG:102113"]=n["EPSG:3857"]}var Ur=1,Xr=2,Us=3,Lw=4,Xf=5,F_=6378137,Aw=6356752314e-3,b_=.0066943799901413165,co=484813681109536e-20,$=Math.PI/2,kw=.16666666666666666,Ow=.04722222222222222,Nw=.022156084656084655,Z=1e-10,ye=.017453292519943295,Yn=57.29577951308232,Ft=Math.PI/4,Lo=Math.PI*2,xe=3.14159265359,en={};en.greenwich=0;en.lisbon=-9.131906111111;en.paris=2.337229166667;en.bogota=-74.080916666667;en.madrid=-3.687938888889;en.rome=12.452333333333;en.bern=7.439583333333;en.jakarta=106.807719444444;en.ferro=-17.666666666667;en.brussels=4.367975;en.stockholm=18.058277777778;en.athens=23.7163375;en.oslo=10.722916666667;const Dw={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.01},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var z_=/[\s_\-\/\(\)]/g;function hr(n,t){if(n[t])return n[t];for(var e=Object.keys(n),i=t.toLowerCase().replace(z_,""),s=-1,o,l;++s<e.length;)if(o=e[s],l=o.toLowerCase().replace(z_,""),l===i)return n[o]}function Vf(n){var t={},e=n.split("+").map(function(h){return h.trim()}).filter(function(h){return h}).reduce(function(h,c){var d=c.split("=");return d.push(!0),h[d[0].toLowerCase()]=d[1],h},{}),i,s,o,l={proj:"projName",datum:"datumCode",rf:function(h){t.rf=parseFloat(h)},lat_0:function(h){t.lat0=h*ye},lat_1:function(h){t.lat1=h*ye},lat_2:function(h){t.lat2=h*ye},lat_ts:function(h){t.lat_ts=h*ye},lon_0:function(h){t.long0=h*ye},lon_1:function(h){t.long1=h*ye},lon_2:function(h){t.long2=h*ye},alpha:function(h){t.alpha=parseFloat(h)*ye},gamma:function(h){t.rectified_grid_angle=parseFloat(h)},lonc:function(h){t.longc=h*ye},x_0:function(h){t.x0=parseFloat(h)},y_0:function(h){t.y0=parseFloat(h)},k_0:function(h){t.k0=parseFloat(h)},k:function(h){t.k0=parseFloat(h)},a:function(h){t.a=parseFloat(h)},b:function(h){t.b=parseFloat(h)},r:function(h){t.a=t.b=parseFloat(h)},r_a:function(){t.R_A=!0},zone:function(h){t.zone=parseInt(h,10)},south:function(){t.utmSouth=!0},towgs84:function(h){t.datum_params=h.split(",").map(function(c){return parseFloat(c)})},to_meter:function(h){t.to_meter=parseFloat(h)},units:function(h){t.units=h;var c=hr(Dw,h);c&&(t.to_meter=c.to_meter)},from_greenwich:function(h){t.from_greenwich=h*ye},pm:function(h){var c=hr(en,h);t.from_greenwich=(c||parseFloat(h))*ye},nadgrids:function(h){h==="@null"?t.datumCode="none":t.nadgrids=h},axis:function(h){var c="ewnsud";h.length===3&&c.indexOf(h.substr(0,1))!==-1&&c.indexOf(h.substr(1,1))!==-1&&c.indexOf(h.substr(2,1))!==-1&&(t.axis=h)},approx:function(){t.approx=!0}};for(i in e)s=e[i],i in l?(o=l[i],typeof o=="function"?o(s):t[o]=s):t[i]=s;return typeof t.datumCode=="string"&&t.datumCode!=="WGS84"&&(t.datumCode=t.datumCode.toLowerCase()),t}var Ao=1,Ey=2,My=3,Uh=4,wy=5,jd=-1,Fw=/\s/,bw=/[A-Za-z]/,zw=/[A-Za-z84_]/,gu=/[,\]]/,Cy=/[\d\.E\-\+]/;function Mi(n){if(typeof n!="string")throw new Error("not a string");this.text=n.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=Ao}Mi.prototype.readCharicter=function(){var n=this.text[this.place++];if(this.state!==Uh)for(;Fw.test(n);){if(this.place>=this.text.length)return;n=this.text[this.place++]}switch(this.state){case Ao:return this.neutral(n);case Ey:return this.keyword(n);case Uh:return this.quoted(n);case wy:return this.afterquote(n);case My:return this.number(n);case jd:return}};Mi.prototype.afterquote=function(n){if(n==='"'){this.word+='"',this.state=Uh;return}if(gu.test(n)){this.word=this.word.trim(),this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in afterquote yet, index '+this.place)};Mi.prototype.afterItem=function(n){if(n===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=Ao;return}if(n==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=Ao,this.currentObject=this.stack.pop(),this.currentObject||(this.state=jd);return}};Mi.prototype.number=function(n){if(Cy.test(n)){this.word+=n;return}if(gu.test(n)){this.word=parseFloat(this.word),this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in number yet, index '+this.place)};Mi.prototype.quoted=function(n){if(n==='"'){this.state=wy;return}this.word+=n};Mi.prototype.keyword=function(n){if(zw.test(n)){this.word+=n;return}if(n==="["){var t=[];t.push(this.word),this.level++,this.root===null?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,this.state=Ao;return}if(gu.test(n)){this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in keyword yet, index '+this.place)};Mi.prototype.neutral=function(n){if(bw.test(n)){this.word=n,this.state=Ey;return}if(n==='"'){this.word="",this.state=Uh;return}if(Cy.test(n)){this.word=n,this.state=My;return}if(gu.test(n)){this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in neutral yet, index '+this.place)};Mi.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===jd)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function Gw(n){var t=new Mi(n);return t.output()}function Mf(n,t,e){Array.isArray(t)&&(e.unshift(t),t=null);var i=t?{}:n,s=e.reduce(function(o,l){return bs(l,o),o},i);t&&(n[t]=s)}function bs(n,t){if(!Array.isArray(n)){t[n]=!0;return}var e=n.shift();if(e==="PARAMETER"&&(e=n.shift()),n.length===1){if(Array.isArray(n[0])){t[e]={},bs(n[0],t[e]);return}t[e]=n[0];return}if(!n.length){t[e]=!0;return}if(e==="TOWGS84"){t[e]=n;return}if(e==="AXIS"){e in t||(t[e]=[]),t[e].push(n);return}Array.isArray(e)||(t[e]={});var i;switch(e){case"UNIT":case"PRIMEM":case"VERT_DATUM":t[e]={name:n[0].toLowerCase(),convert:n[1]},n.length===3&&bs(n[2],t[e]);return;case"SPHEROID":case"ELLIPSOID":t[e]={name:n[0],a:n[1],rf:n[2]},n.length===4&&bs(n[3],t[e]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":n[0]=["name",n[0]],Mf(t,e,n);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":n[0]=["name",n[0]],Mf(t,e,n),t[e].type=e;return;default:for(i=-1;++i<n.length;)if(!Array.isArray(n[i]))return bs(n,t[e]);return Mf(t,e,n)}}var jw=.017453292519943295,Ww=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function Bw(n,t){var e=t[0],i=t[1];!(e in n)&&i in n&&(n[e]=n[i],t.length===3&&(n[e]=t[2](n[e])))}function Bn(n){return n*jw}function Sy(n){for(var t=Object.keys(n),e=0,i=t.length;e<i;++e){var s=t[e];Ww.indexOf(s)!==-1&&Uw(n[s]),typeof n[s]=="object"&&Sy(n[s])}}function Uw(n){if(n.AUTHORITY){var t=Object.keys(n.AUTHORITY)[0];t&&t in n.AUTHORITY&&(n.title=t+":"+n.AUTHORITY[t])}if(n.type==="GEOGCS"?n.projName="longlat":n.type==="LOCAL_CS"?(n.projName="identity",n.local=!0):typeof n.PROJECTION=="object"?n.projName=Object.keys(n.PROJECTION)[0]:n.projName=n.PROJECTION,n.AXIS){for(var e="",i=0,s=n.AXIS.length;i<s;++i){var o=[n.AXIS[i][0].toLowerCase(),n.AXIS[i][1].toLowerCase()];o[0].indexOf("north")!==-1||(o[0]==="y"||o[0]==="lat")&&o[1]==="north"?e+="n":o[0].indexOf("south")!==-1||(o[0]==="y"||o[0]==="lat")&&o[1]==="south"?e+="s":o[0].indexOf("east")!==-1||(o[0]==="x"||o[0]==="lon")&&o[1]==="east"?e+="e":(o[0].indexOf("west")!==-1||(o[0]==="x"||o[0]==="lon")&&o[1]==="west")&&(e+="w")}e.length===2&&(e+="u"),e.length===3&&(n.axis=e)}n.UNIT&&(n.units=n.UNIT.name.toLowerCase(),n.units==="metre"&&(n.units="meter"),n.UNIT.convert&&(n.type==="GEOGCS"?n.DATUM&&n.DATUM.SPHEROID&&(n.to_meter=n.UNIT.convert*n.DATUM.SPHEROID.a):n.to_meter=n.UNIT.convert));var l=n.GEOGCS;n.type==="GEOGCS"&&(l=n),l&&(l.DATUM?n.datumCode=l.DATUM.name.toLowerCase():n.datumCode=l.name.toLowerCase(),n.datumCode.slice(0,2)==="d_"&&(n.datumCode=n.datumCode.slice(2)),n.datumCode==="new_zealand_1949"&&(n.datumCode="nzgd49"),(n.datumCode==="wgs_1984"||n.datumCode==="world_geodetic_system_1984")&&(n.PROJECTION==="Mercator_Auxiliary_Sphere"&&(n.sphere=!0),n.datumCode="wgs84"),n.datumCode==="belge_1972"&&(n.datumCode="rnb72"),l.DATUM&&l.DATUM.SPHEROID&&(n.ellps=l.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),n.ellps.toLowerCase().slice(0,13)==="international"&&(n.ellps="intl"),n.a=l.DATUM.SPHEROID.a,n.rf=parseFloat(l.DATUM.SPHEROID.rf,10)),l.DATUM&&l.DATUM.TOWGS84&&(n.datum_params=l.DATUM.TOWGS84),~n.datumCode.indexOf("osgb_1936")&&(n.datumCode="osgb36"),~n.datumCode.indexOf("osni_1952")&&(n.datumCode="osni52"),(~n.datumCode.indexOf("tm65")||~n.datumCode.indexOf("geodetic_datum_of_1965"))&&(n.datumCode="ire65"),n.datumCode==="ch1903+"&&(n.datumCode="ch1903"),~n.datumCode.indexOf("israel")&&(n.datumCode="isr93")),n.b&&!isFinite(n.b)&&(n.b=n.a);function h(g){var _=n.to_meter||1;return g*_}var c=function(g){return Bw(n,g)},d=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Bn],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Bn],["x0","false_easting",h],["y0","false_northing",h],["long0","central_meridian",Bn],["lat0","latitude_of_origin",Bn],["lat0","standard_parallel_1",Bn],["lat1","standard_parallel_1",Bn],["lat2","standard_parallel_2",Bn],["azimuth","Azimuth"],["alpha","azimuth",Bn],["srsCode","name"]];d.forEach(c),!n.long0&&n.longc&&(n.projName==="Albers_Conic_Equal_Area"||n.projName==="Lambert_Azimuthal_Equal_Area")&&(n.long0=n.longc),!n.lat_ts&&n.lat1&&(n.projName==="Stereographic_South_Pole"||n.projName==="Polar Stereographic (variant B)")?(n.lat0=Bn(n.lat1>0?90:-90),n.lat_ts=n.lat1):!n.lat_ts&&n.lat0&&n.projName==="Polar_Stereographic"&&(n.lat_ts=n.lat0,n.lat0=Bn(n.lat0>0?90:-90))}function Ry(n){var t=Gw(n),e=t[0],i={};return bs(t,i),Sy(i),i[e]}function be(n){var t=this;if(arguments.length===2){var e=arguments[1];typeof e=="string"?e.charAt(0)==="+"?be[n]=Vf(arguments[1]):be[n]=Ry(arguments[1]):be[n]=e}else if(arguments.length===1){if(Array.isArray(n))return n.map(function(i){Array.isArray(i)?be.apply(t,i):be(i)});if(typeof n=="string"){if(n in be)return be[n]}else"EPSG"in n?be["EPSG:"+n.EPSG]=n:"ESRI"in n?be["ESRI:"+n.ESRI]=n:"IAU2000"in n?be["IAU2000:"+n.IAU2000]=n:console.log(n);return}}Pw(be);function Xw(n){return typeof n=="string"}function Vw(n){return n in be}var $w=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function Yw(n){return $w.some(function(t){return n.indexOf(t)>-1})}var qw=["3857","900913","3785","102113"];function Hw(n){var t=hr(n,"authority");if(t){var e=hr(t,"epsg");return e&&qw.indexOf(e)>-1}}function Kw(n){var t=hr(n,"extension");if(t)return hr(t,"proj4")}function Zw(n){return n[0]==="+"}function Qw(n){if(Xw(n)){if(Vw(n))return be[n];if(Yw(n)){var t=Ry(n);if(Hw(t))return be["EPSG:3857"];var e=Kw(t);return e?Vf(e):t}if(Zw(n))return Vf(n)}else return n}function G_(n,t){n=n||{};var e,i;if(!t)return n;for(i in t)e=t[i],e!==void 0&&(n[i]=e);return n}function Kn(n,t,e){var i=n*t;return e/Math.sqrt(1-i*i)}function Xo(n){return n<0?-1:1}function Q(n){return Math.abs(n)<=xe?n:n-Xo(n)*Lo}function On(n,t,e){var i=n*e,s=.5*n;return i=Math.pow((1-i)/(1+i),s),Math.tan(.5*($-t))/i}function ko(n,t){for(var e=.5*n,i,s,o=$-2*Math.atan(t),l=0;l<=15;l++)if(i=n*Math.sin(o),s=$-2*Math.atan(t*Math.pow((1-i)/(1+i),e))-o,o+=s,Math.abs(s)<=1e-10)return o;return-9999}function Jw(){var n=this.b/this.a;this.es=1-n*n,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Kn(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function tC(n){var t=n.x,e=n.y;if(e*Yn>90&&e*Yn<-90&&t*Yn>180&&t*Yn<-180)return null;var i,s;if(Math.abs(Math.abs(e)-$)<=Z)return null;if(this.sphere)i=this.x0+this.a*this.k0*Q(t-this.long0),s=this.y0+this.a*this.k0*Math.log(Math.tan(Ft+.5*e));else{var o=Math.sin(e),l=On(this.e,e,o);i=this.x0+this.a*this.k0*Q(t-this.long0),s=this.y0-this.a*this.k0*Math.log(l)}return n.x=i,n.y=s,n}function eC(n){var t=n.x-this.x0,e=n.y-this.y0,i,s;if(this.sphere)s=$-2*Math.atan(Math.exp(-e/(this.a*this.k0)));else{var o=Math.exp(-e/(this.a*this.k0));if(s=ko(this.e,o),s===-9999)return null}return i=Q(this.long0+t/(this.a*this.k0)),n.x=i,n.y=s,n}var nC=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const iC={init:Jw,forward:tC,inverse:eC,names:nC};function rC(){}function j_(n){return n}var sC=["longlat","identity"];const aC={init:rC,forward:j_,inverse:j_,names:sC};var oC=[iC,aC],Eh={},Xh=[];function Iy(n,t){var e=Xh.length;return n.names?(Xh[e]=n,n.names.forEach(function(i){Eh[i.toLowerCase()]=e}),this):(console.log(t),!0)}function lC(n){if(!n)return!1;var t=n.toLowerCase();if(typeof Eh[t]<"u"&&Xh[Eh[t]])return Xh[Eh[t]]}function hC(){oC.forEach(Iy)}const uC={start:hC,add:Iy,get:lC};var xt={};xt.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};xt.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};xt.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};xt.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};xt.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};xt.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};xt.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};xt.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};xt.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};xt.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};xt.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};xt.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};xt.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};xt.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};xt.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};xt.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};xt.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};xt.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};xt.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};xt.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};xt.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};xt.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};xt.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};xt.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};xt.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};xt.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};xt.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};xt.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};xt.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};xt.hough={a:6378270,rf:297,ellipseName:"Hough"};xt.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};xt.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};xt.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};xt.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};xt.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};xt.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};xt.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};xt.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};xt.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};xt.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};xt.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};xt.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var cC=xt.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};xt.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function fC(n,t,e,i){var s=n*n,o=t*t,l=(s-o)/s,h=0;i?(n*=1-l*(kw+l*(Ow+l*Nw)),s=n*n,l=0):h=Math.sqrt(l);var c=(s-o)/o;return{es:l,e:h,ep2:c}}function dC(n,t,e,i,s){if(!n){var o=hr(xt,i);o||(o=cC),n=o.a,t=o.b,e=o.rf}return e&&!t&&(t=(1-1/e)*n),(e===0||Math.abs(n-t)<Z)&&(s=!0,t=n),{a:n,b:t,rf:e,sphere:s}}var Mh={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};for(var gC in Mh){var W_=Mh[gC];Mh[W_.datumName]=W_}function mC(n,t,e,i,s,o,l){var h={};return n===void 0||n==="none"?h.datum_type=Xf:h.datum_type=Lw,t&&(h.datum_params=t.map(parseFloat),(h.datum_params[0]!==0||h.datum_params[1]!==0||h.datum_params[2]!==0)&&(h.datum_type=Ur),h.datum_params.length>3&&(h.datum_params[3]!==0||h.datum_params[4]!==0||h.datum_params[5]!==0||h.datum_params[6]!==0)&&(h.datum_type=Xr,h.datum_params[3]*=co,h.datum_params[4]*=co,h.datum_params[5]*=co,h.datum_params[6]=h.datum_params[6]/1e6+1)),l&&(h.datum_type=Us,h.grids=l),h.a=e,h.b=i,h.es=s,h.ep2=o,h}var Ty={};function _C(n,t){var e=new DataView(t),i=vC(e),s=xC(e,i),o=EC(e,s,i),l={header:s,subgrids:o};return Ty[n]=l,l}function pC(n){if(n===void 0)return null;var t=n.split(",");return t.map(yC)}function yC(n){if(n.length===0)return null;var t=n[0]==="@";return t&&(n=n.slice(1)),n==="null"?{name:"null",mandatory:!t,grid:null,isNull:!0}:{name:n,mandatory:!t,grid:Ty[n]||null,isNull:!1}}function zs(n){return n/3600*Math.PI/180}function vC(n){var t=n.getInt32(8,!1);return t===11?!1:(t=n.getInt32(8,!0),t!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function xC(n,t){return{nFields:n.getInt32(8,t),nSubgridFields:n.getInt32(24,t),nSubgrids:n.getInt32(40,t),shiftType:$f(n,56,64).trim(),fromSemiMajorAxis:n.getFloat64(120,t),fromSemiMinorAxis:n.getFloat64(136,t),toSemiMajorAxis:n.getFloat64(152,t),toSemiMinorAxis:n.getFloat64(168,t)}}function $f(n,t,e){return String.fromCharCode.apply(null,new Uint8Array(n.buffer.slice(t,e)))}function EC(n,t,e){for(var i=176,s=[],o=0;o<t.nSubgrids;o++){var l=wC(n,i,e),h=CC(n,i,l,e),c=Math.round(1+(l.upperLongitude-l.lowerLongitude)/l.longitudeInterval),d=Math.round(1+(l.upperLatitude-l.lowerLatitude)/l.latitudeInterval);s.push({ll:[zs(l.lowerLongitude),zs(l.lowerLatitude)],del:[zs(l.longitudeInterval),zs(l.latitudeInterval)],lim:[c,d],count:l.gridNodeCount,cvs:MC(h)}),i+=176+l.gridNodeCount*16}return s}function MC(n){return n.map(function(t){return[zs(t.longitudeShift),zs(t.latitudeShift)]})}function wC(n,t,e){return{name:$f(n,t+8,t+16).trim(),parent:$f(n,t+24,t+24+8).trim(),lowerLatitude:n.getFloat64(t+72,e),upperLatitude:n.getFloat64(t+88,e),lowerLongitude:n.getFloat64(t+104,e),upperLongitude:n.getFloat64(t+120,e),latitudeInterval:n.getFloat64(t+136,e),longitudeInterval:n.getFloat64(t+152,e),gridNodeCount:n.getInt32(t+168,e)}}function CC(n,t,e,i){for(var s=t+176,o=16,l=[],h=0;h<e.gridNodeCount;h++){var c={latitudeShift:n.getFloat32(s+h*o,i),longitudeShift:n.getFloat32(s+h*o+4,i),latitudeAccuracy:n.getFloat32(s+h*o+8,i),longitudeAccuracy:n.getFloat32(s+h*o+12,i)};l.push(c)}return l}function Hn(n,t){if(!(this instanceof Hn))return new Hn(n);t=t||function(d){if(d)throw d};var e=Qw(n);if(typeof e!="object"){t("Could not parse to valid json: "+n);return}var i=Hn.projections.get(e.projName);if(!i){t("Could not get projection name from: "+n);return}if(e.datumCode&&e.datumCode!=="none"){var s=hr(Mh,e.datumCode);s&&(e.datum_params=e.datum_params||(s.towgs84?s.towgs84.split(","):null),e.ellps=s.ellipse,e.datumName=s.datumName?s.datumName:e.datumCode)}e.k0=e.k0||1,e.axis=e.axis||"enu",e.ellps=e.ellps||"wgs84",e.lat1=e.lat1||e.lat0;var o=dC(e.a,e.b,e.rf,e.ellps,e.sphere),l=fC(o.a,o.b,o.rf,e.R_A),h=pC(e.nadgrids),c=e.datum||mC(e.datumCode,e.datum_params,o.a,o.b,l.es,l.ep2,h);G_(this,e),G_(this,i),this.a=o.a,this.b=o.b,this.rf=o.rf,this.sphere=o.sphere,this.es=l.es,this.e=l.e,this.ep2=l.ep2,this.datum=c,this.init(),t(null,this)}Hn.projections=uC;Hn.projections.start();function SC(n,t){return n.datum_type!==t.datum_type||n.a!==t.a||Math.abs(n.es-t.es)>5e-11?!1:n.datum_type===Ur?n.datum_params[0]===t.datum_params[0]&&n.datum_params[1]===t.datum_params[1]&&n.datum_params[2]===t.datum_params[2]:n.datum_type===Xr?n.datum_params[0]===t.datum_params[0]&&n.datum_params[1]===t.datum_params[1]&&n.datum_params[2]===t.datum_params[2]&&n.datum_params[3]===t.datum_params[3]&&n.datum_params[4]===t.datum_params[4]&&n.datum_params[5]===t.datum_params[5]&&n.datum_params[6]===t.datum_params[6]:!0}function Py(n,t,e){var i=n.x,s=n.y,o=n.z?n.z:0,l,h,c,d;if(s<-$&&s>-1.001*$)s=-$;else if(s>$&&s<1.001*$)s=$;else{if(s<-$)return{x:-1/0,y:-1/0,z:n.z};if(s>$)return{x:1/0,y:1/0,z:n.z}}return i>Math.PI&&(i-=2*Math.PI),h=Math.sin(s),d=Math.cos(s),c=h*h,l=e/Math.sqrt(1-t*c),{x:(l+o)*d*Math.cos(i),y:(l+o)*d*Math.sin(i),z:(l*(1-t)+o)*h}}function Ly(n,t,e,i){var s=1e-12,o=s*s,l=30,h,c,d,g,_,y,v,E,M,w,S,R,O,P=n.x,k=n.y,b=n.z?n.z:0,B,G,W;if(h=Math.sqrt(P*P+k*k),c=Math.sqrt(P*P+k*k+b*b),h/e<s){if(B=0,c/e<s)return G=$,W=-i,{x:n.x,y:n.y,z:n.z}}else B=Math.atan2(k,P);d=b/c,g=h/c,_=1/Math.sqrt(1-t*(2-t)*g*g),E=g*(1-t)*_,M=d*_,O=0;do O++,v=e/Math.sqrt(1-t*M*M),W=h*E+b*M-v*(1-t*M*M),y=t*v/(v+W),_=1/Math.sqrt(1-y*(2-y)*g*g),w=g*(1-y)*_,S=d*_,R=S*E-w*M,E=w,M=S;while(R*R>o&&O<l);return G=Math.atan(S/Math.abs(w)),{x:B,y:G,z:W}}function RC(n,t,e){if(t===Ur)return{x:n.x+e[0],y:n.y+e[1],z:n.z+e[2]};if(t===Xr){var i=e[0],s=e[1],o=e[2],l=e[3],h=e[4],c=e[5],d=e[6];return{x:d*(n.x-c*n.y+h*n.z)+i,y:d*(c*n.x+n.y-l*n.z)+s,z:d*(-h*n.x+l*n.y+n.z)+o}}}function IC(n,t,e){if(t===Ur)return{x:n.x-e[0],y:n.y-e[1],z:n.z-e[2]};if(t===Xr){var i=e[0],s=e[1],o=e[2],l=e[3],h=e[4],c=e[5],d=e[6],g=(n.x-i)/d,_=(n.y-s)/d,y=(n.z-o)/d;return{x:g+c*_-h*y,y:-c*g+_+l*y,z:h*g-l*_+y}}}function ph(n){return n===Ur||n===Xr}function TC(n,t,e){if(SC(n,t)||n.datum_type===Xf||t.datum_type===Xf)return e;var i=n.a,s=n.es;if(n.datum_type===Us){var o=B_(n,!1,e);if(o!==0)return;i=F_,s=b_}var l=t.a,h=t.b,c=t.es;if(t.datum_type===Us&&(l=F_,h=Aw,c=b_),s===c&&i===l&&!ph(n.datum_type)&&!ph(t.datum_type))return e;if(e=Py(e,s,i),ph(n.datum_type)&&(e=RC(e,n.datum_type,n.datum_params)),ph(t.datum_type)&&(e=IC(e,t.datum_type,t.datum_params)),e=Ly(e,c,l,h),t.datum_type===Us){var d=B_(t,!0,e);if(d!==0)return}return e}function B_(n,t,e){if(n.grids===null||n.grids.length===0)return console.log("Grid shift grids not found"),-1;var i={x:-e.x,y:e.y},s={x:Number.NaN,y:Number.NaN},o=[];t:for(var l=0;l<n.grids.length;l++){var h=n.grids[l];if(o.push(h.name),h.isNull){s=i;break}if(h.mandatory,h.grid===null){if(h.mandatory)return console.log("Unable to find mandatory grid '"+h.name+"'"),-1;continue}for(var c=h.grid.subgrids,d=0,g=c.length;d<g;d++){var _=c[d],y=(Math.abs(_.del[1])+Math.abs(_.del[0]))/1e4,v=_.ll[0]-y,E=_.ll[1]-y,M=_.ll[0]+(_.lim[0]-1)*_.del[0]+y,w=_.ll[1]+(_.lim[1]-1)*_.del[1]+y;if(!(E>i.y||v>i.x||w<i.y||M<i.x)&&(s=PC(i,t,_),!isNaN(s.x)))break t}}return isNaN(s.x)?(console.log("Failed to find a grid shift table for location '"+-i.x*Yn+" "+i.y*Yn+" tried: '"+o+"'"),-1):(e.x=-s.x,e.y=s.y,0)}function PC(n,t,e){var i={x:Number.NaN,y:Number.NaN};if(isNaN(n.x))return i;var s={x:n.x,y:n.y};s.x-=e.ll[0],s.y-=e.ll[1],s.x=Q(s.x-Math.PI)+Math.PI;var o=U_(s,e);if(t){if(isNaN(o.x))return i;o.x=s.x-o.x,o.y=s.y-o.y;var l=9,h=1e-12,c,d;do{if(d=U_(o,e),isNaN(d.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}c={x:s.x-(d.x+o.x),y:s.y-(d.y+o.y)},o.x+=c.x,o.y+=c.y}while(l--&&Math.abs(c.x)>h&&Math.abs(c.y)>h);if(l<0)return console.log("Inverse grid shift iterator failed to converge."),i;i.x=Q(o.x+e.ll[0]),i.y=o.y+e.ll[1]}else isNaN(o.x)||(i.x=n.x+o.x,i.y=n.y+o.y);return i}function U_(n,t){var e={x:n.x/t.del[0],y:n.y/t.del[1]},i={x:Math.floor(e.x),y:Math.floor(e.y)},s={x:e.x-1*i.x,y:e.y-1*i.y},o={x:Number.NaN,y:Number.NaN},l;if(i.x<0||i.x>=t.lim[0]||i.y<0||i.y>=t.lim[1])return o;l=i.y*t.lim[0]+i.x;var h={x:t.cvs[l][0],y:t.cvs[l][1]};l++;var c={x:t.cvs[l][0],y:t.cvs[l][1]};l+=t.lim[0];var d={x:t.cvs[l][0],y:t.cvs[l][1]};l--;var g={x:t.cvs[l][0],y:t.cvs[l][1]},_=s.x*s.y,y=s.x*(1-s.y),v=(1-s.x)*(1-s.y),E=(1-s.x)*s.y;return o.x=v*h.x+y*c.x+E*g.x+_*d.x,o.y=v*h.y+y*c.y+E*g.y+_*d.y,o}function X_(n,t,e){var i=e.x,s=e.y,o=e.z||0,l,h,c,d={};for(c=0;c<3;c++)if(!(t&&c===2&&e.z===void 0))switch(c===0?(l=i,"ew".indexOf(n.axis[c])!==-1?h="x":h="y"):c===1?(l=s,"ns".indexOf(n.axis[c])!==-1?h="y":h="x"):(l=o,h="z"),n.axis[c]){case"e":d[h]=l;break;case"w":d[h]=-l;break;case"n":d[h]=l;break;case"s":d[h]=-l;break;case"u":e[h]!==void 0&&(d.z=l);break;case"d":e[h]!==void 0&&(d.z=-l);break;default:return null}return d}function Ay(n){var t={x:n[0],y:n[1]};return n.length>2&&(t.z=n[2]),n.length>3&&(t.m=n[3]),t}function LC(n){V_(n.x),V_(n.y)}function V_(n){if(typeof Number.isFinite=="function"){if(Number.isFinite(n))return;throw new TypeError("coordinates must be finite numbers")}if(typeof n!="number"||n!==n||!isFinite(n))throw new TypeError("coordinates must be finite numbers")}function AC(n,t){return(n.datum.datum_type===Ur||n.datum.datum_type===Xr||n.datum.datum_type===Us)&&t.datumCode!=="WGS84"||(t.datum.datum_type===Ur||t.datum.datum_type===Xr||t.datum.datum_type===Us)&&n.datumCode!=="WGS84"}function Vh(n,t,e,i){var s;Array.isArray(e)?e=Ay(e):e={x:e.x,y:e.y,z:e.z,m:e.m};var o=e.z!==void 0;if(LC(e),n.datum&&t.datum&&AC(n,t)&&(s=new Hn("WGS84"),e=Vh(n,s,e,i),n=s),i&&n.axis!=="enu"&&(e=X_(n,!1,e)),n.projName==="longlat")e={x:e.x*ye,y:e.y*ye,z:e.z||0};else if(n.to_meter&&(e={x:e.x*n.to_meter,y:e.y*n.to_meter,z:e.z||0}),e=n.inverse(e),!e)return;if(n.from_greenwich&&(e.x+=n.from_greenwich),e=TC(n.datum,t.datum,e),!!e)return t.from_greenwich&&(e={x:e.x-t.from_greenwich,y:e.y,z:e.z||0}),t.projName==="longlat"?e={x:e.x*Yn,y:e.y*Yn,z:e.z||0}:(e=t.forward(e),t.to_meter&&(e={x:e.x/t.to_meter,y:e.y/t.to_meter,z:e.z||0})),i&&t.axis!=="enu"?X_(t,!0,e):(e&&!o&&delete e.z,e)}var $_=Hn("WGS84");function wf(n,t,e,i){var s,o,l;return Array.isArray(e)?(s=Vh(n,t,e,i)||{x:NaN,y:NaN},e.length>2?typeof n.name<"u"&&n.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"?typeof s.z=="number"?[s.x,s.y,s.z].concat(e.slice(3)):[s.x,s.y,e[2]].concat(e.slice(3)):[s.x,s.y].concat(e.slice(2)):[s.x,s.y]):(o=Vh(n,t,e,i),l=Object.keys(e),l.length===2||l.forEach(function(h){if(typeof n.name<"u"&&n.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"){if(h==="x"||h==="y"||h==="z")return}else if(h==="x"||h==="y")return;o[h]=e[h]}),o)}function Y_(n){return n instanceof Hn?n:n.oProj?n.oProj:Hn(n)}function tn(n,t,e){n=Y_(n);var i=!1,s;return typeof t>"u"?(t=n,n=$_,i=!0):(typeof t.x<"u"||Array.isArray(t))&&(e=t,t=n,n=$_,i=!0),t=Y_(t),e?wf(n,t,e):(s={forward:function(o,l){return wf(n,t,o,l)},inverse:function(o,l){return wf(t,n,o,l)}},i&&(s.oProj=t),s)}var q_=6,ky="AJSAJS",Oy="AFAFAF",Gs=65,qe=73,vn=79,so=86,ao=90;const kC={forward:Ny,inverse:OC,toPoint:Dy};function Ny(n,t){return t=t||5,FC(NC({lat:n[1],lon:n[0]}),t)}function OC(n){var t=Wd(by(n.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat,t.lon,t.lat]:[t.left,t.bottom,t.right,t.top]}function Dy(n){var t=Wd(by(n.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function Cf(n){return n*(Math.PI/180)}function H_(n){return 180*(n/Math.PI)}function NC(n){var t=n.lat,e=n.lon,i=6378137,s=.00669438,o=.9996,l,h,c,d,g,_,y,v=Cf(t),E=Cf(e),M,w;w=Math.floor((e+180)/6)+1,e===180&&(w=60),t>=56&&t<64&&e>=3&&e<12&&(w=32),t>=72&&t<84&&(e>=0&&e<9?w=31:e>=9&&e<21?w=33:e>=21&&e<33?w=35:e>=33&&e<42&&(w=37)),l=(w-1)*6-180+3,M=Cf(l),h=s/(1-s),c=i/Math.sqrt(1-s*Math.sin(v)*Math.sin(v)),d=Math.tan(v)*Math.tan(v),g=h*Math.cos(v)*Math.cos(v),_=Math.cos(v)*(E-M),y=i*((1-s/4-3*s*s/64-5*s*s*s/256)*v-(3*s/8+3*s*s/32+45*s*s*s/1024)*Math.sin(2*v)+(15*s*s/256+45*s*s*s/1024)*Math.sin(4*v)-35*s*s*s/3072*Math.sin(6*v));var S=o*c*(_+(1-d+g)*_*_*_/6+(5-18*d+d*d+72*g-58*h)*_*_*_*_*_/120)+5e5,R=o*(y+c*Math.tan(v)*(_*_/2+(5-d+9*g+4*g*g)*_*_*_*_/24+(61-58*d+d*d+600*g-330*h)*_*_*_*_*_*_/720));return t<0&&(R+=1e7),{northing:Math.round(R),easting:Math.round(S),zoneNumber:w,zoneLetter:DC(t)}}function Wd(n){var t=n.northing,e=n.easting,i=n.zoneLetter,s=n.zoneNumber;if(s<0||s>60)return null;var o=.9996,l=6378137,h=.00669438,c,d=(1-Math.sqrt(1-h))/(1+Math.sqrt(1-h)),g,_,y,v,E,M,w,S,R,O=e-5e5,P=t;i<"N"&&(P-=1e7),w=(s-1)*6-180+3,c=h/(1-h),M=P/o,S=M/(l*(1-h/4-3*h*h/64-5*h*h*h/256)),R=S+(3*d/2-27*d*d*d/32)*Math.sin(2*S)+(21*d*d/16-55*d*d*d*d/32)*Math.sin(4*S)+151*d*d*d/96*Math.sin(6*S),g=l/Math.sqrt(1-h*Math.sin(R)*Math.sin(R)),_=Math.tan(R)*Math.tan(R),y=c*Math.cos(R)*Math.cos(R),v=l*(1-h)/Math.pow(1-h*Math.sin(R)*Math.sin(R),1.5),E=O/(g*o);var k=R-g*Math.tan(R)/v*(E*E/2-(5+3*_+10*y-4*y*y-9*c)*E*E*E*E/24+(61+90*_+298*y+45*_*_-252*c-3*y*y)*E*E*E*E*E*E/720);k=H_(k);var b=(E-(1+2*_+y)*E*E*E/6+(5-2*y+28*_-3*y*y+8*c+24*_*_)*E*E*E*E*E/120)/Math.cos(R);b=w+H_(b);var B;if(n.accuracy){var G=Wd({northing:n.northing+n.accuracy,easting:n.easting+n.accuracy,zoneLetter:n.zoneLetter,zoneNumber:n.zoneNumber});B={top:G.lat,right:G.lon,bottom:k,left:b}}else B={lat:k,lon:b};return B}function DC(n){var t="Z";return 84>=n&&n>=72?t="X":72>n&&n>=64?t="W":64>n&&n>=56?t="V":56>n&&n>=48?t="U":48>n&&n>=40?t="T":40>n&&n>=32?t="S":32>n&&n>=24?t="R":24>n&&n>=16?t="Q":16>n&&n>=8?t="P":8>n&&n>=0?t="N":0>n&&n>=-8?t="M":-8>n&&n>=-16?t="L":-16>n&&n>=-24?t="K":-24>n&&n>=-32?t="J":-32>n&&n>=-40?t="H":-40>n&&n>=-48?t="G":-48>n&&n>=-56?t="F":-56>n&&n>=-64?t="E":-64>n&&n>=-72?t="D":-72>n&&n>=-80&&(t="C"),t}function FC(n,t){var e="00000"+n.easting,i="00000"+n.northing;return n.zoneNumber+n.zoneLetter+bC(n.easting,n.northing,n.zoneNumber)+e.substr(e.length-5,t)+i.substr(i.length-5,t)}function bC(n,t,e){var i=Fy(e),s=Math.floor(n/1e5),o=Math.floor(t/1e5)%20;return zC(s,o,i)}function Fy(n){var t=n%q_;return t===0&&(t=q_),t}function zC(n,t,e){var i=e-1,s=ky.charCodeAt(i),o=Oy.charCodeAt(i),l=s+n-1,h=o+t,c=!1;l>ao&&(l=l-ao+Gs-1,c=!0),(l===qe||s<qe&&l>qe||(l>qe||s<qe)&&c)&&l++,(l===vn||s<vn&&l>vn||(l>vn||s<vn)&&c)&&(l++,l===qe&&l++),l>ao&&(l=l-ao+Gs-1),h>so?(h=h-so+Gs-1,c=!0):c=!1,(h===qe||o<qe&&h>qe||(h>qe||o<qe)&&c)&&h++,(h===vn||o<vn&&h>vn||(h>vn||o<vn)&&c)&&(h++,h===qe&&h++),h>so&&(h=h-so+Gs-1);var d=String.fromCharCode(l)+String.fromCharCode(h);return d}function by(n){if(n&&n.length===0)throw"MGRSPoint coverting from nothing";for(var t=n.length,e=null,i="",s,o=0;!/[A-Z]/.test(s=n.charAt(o));){if(o>=2)throw"MGRSPoint bad conversion from: "+n;i+=s,o++}var l=parseInt(i,10);if(o===0||o+3>t)throw"MGRSPoint bad conversion from: "+n;var h=n.charAt(o++);if(h<="A"||h==="B"||h==="Y"||h>="Z"||h==="I"||h==="O")throw"MGRSPoint zone letter "+h+" not handled: "+n;e=n.substring(o,o+=2);for(var c=Fy(l),d=GC(e.charAt(0),c),g=jC(e.charAt(1),c);g<WC(h);)g+=2e6;var _=t-o;if(_%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+n;var y=_/2,v=0,E=0,M,w,S,R,O;return y>0&&(M=1e5/Math.pow(10,y),w=n.substring(o,o+y),v=parseFloat(w)*M,S=n.substring(o+y),E=parseFloat(S)*M),R=v+d,O=E+g,{easting:R,northing:O,zoneLetter:h,zoneNumber:l,accuracy:M}}function GC(n,t){for(var e=ky.charCodeAt(t-1),i=1e5,s=!1;e!==n.charCodeAt(0);){if(e++,e===qe&&e++,e===vn&&e++,e>ao){if(s)throw"Bad character: "+n;e=Gs,s=!0}i+=1e5}return i}function jC(n,t){if(n>"V")throw"MGRSPoint given invalid Northing "+n;for(var e=Oy.charCodeAt(t-1),i=0,s=!1;e!==n.charCodeAt(0);){if(e++,e===qe&&e++,e===vn&&e++,e>so){if(s)throw"Bad character: "+n;e=Gs,s=!0}i+=1e5}return i}function WC(n){var t;switch(n){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+n}function ta(n,t,e){if(!(this instanceof ta))return new ta(n,t,e);if(Array.isArray(n))this.x=n[0],this.y=n[1],this.z=n[2]||0;else if(typeof n=="object")this.x=n.x,this.y=n.y,this.z=n.z||0;else if(typeof n=="string"&&typeof t>"u"){var i=n.split(",");this.x=parseFloat(i[0],10),this.y=parseFloat(i[1],10),this.z=parseFloat(i[2],10)||0}else this.x=n,this.y=t,this.z=e||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}ta.fromMGRS=function(n){return new ta(Dy(n))};ta.prototype.toMGRS=function(n){return Ny([this.x,this.y],n)};var BC=1,UC=.25,K_=.046875,Z_=.01953125,Q_=.01068115234375,XC=.75,VC=.46875,$C=.013020833333333334,YC=.007120768229166667,qC=.3645833333333333,HC=.005696614583333333,KC=.3076171875;function Bd(n){var t=[];t[0]=BC-n*(UC+n*(K_+n*(Z_+n*Q_))),t[1]=n*(XC-n*(K_+n*(Z_+n*Q_)));var e=n*n;return t[2]=e*(VC-n*($C+n*YC)),e*=n,t[3]=e*(qC-n*HC),t[4]=e*n*KC,t}function aa(n,t,e,i){return e*=t,t*=t,i[0]*n-e*(i[1]+t*(i[2]+t*(i[3]+t*i[4])))}var ZC=20;function Ud(n,t,e){for(var i=1/(1-t),s=n,o=ZC;o;--o){var l=Math.sin(s),h=1-t*l*l;if(h=(aa(s,l,Math.cos(s),e)-n)*(h*Math.sqrt(h))*i,s-=h,Math.abs(h)<Z)return s}return s}function QC(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=Bd(this.es),this.ml0=aa(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function JC(n){var t=n.x,e=n.y,i=Q(t-this.long0),s,o,l,h=Math.sin(e),c=Math.cos(e);if(this.es){var g=c*i,_=Math.pow(g,2),y=this.ep2*Math.pow(c,2),v=Math.pow(y,2),E=Math.abs(c)>Z?Math.tan(e):0,M=Math.pow(E,2),w=Math.pow(M,2);s=1-this.es*Math.pow(h,2),g=g/Math.sqrt(s);var S=aa(e,h,c,this.en);o=this.a*(this.k0*g*(1+_/6*(1-M+y+_/20*(5-18*M+w+14*y-58*M*y+_/42*(61+179*w-w*M-479*M)))))+this.x0,l=this.a*(this.k0*(S-this.ml0+h*i*g/2*(1+_/12*(5-M+9*y+4*v+_/30*(61+w-58*M+270*y-330*M*y+_/56*(1385+543*w-w*M-3111*M))))))+this.y0}else{var d=c*Math.sin(i);if(Math.abs(Math.abs(d)-1)<Z)return 93;if(o=.5*this.a*this.k0*Math.log((1+d)/(1-d))+this.x0,l=c*Math.cos(i)/Math.sqrt(1-Math.pow(d,2)),d=Math.abs(l),d>=1){if(d-1>Z)return 93;l=0}else l=Math.acos(l);e<0&&(l=-l),l=this.a*this.k0*(l-this.lat0)+this.y0}return n.x=o,n.y=l,n}function tS(n){var t,e,i,s,o=(n.x-this.x0)*(1/this.a),l=(n.y-this.y0)*(1/this.a);if(this.es)if(t=this.ml0+l/this.k0,e=Ud(t,this.es,this.en),Math.abs(e)<$){var _=Math.sin(e),y=Math.cos(e),v=Math.abs(y)>Z?Math.tan(e):0,E=this.ep2*Math.pow(y,2),M=Math.pow(E,2),w=Math.pow(v,2),S=Math.pow(w,2);t=1-this.es*Math.pow(_,2);var R=o*Math.sqrt(t)/this.k0,O=Math.pow(R,2);t=t*v,i=e-t*O/(1-this.es)*.5*(1-O/12*(5+3*w-9*E*w+E-4*M-O/30*(61+90*w-252*E*w+45*S+46*E-O/56*(1385+3633*w+4095*S+1574*S*w)))),s=Q(this.long0+R*(1-O/6*(1+2*w+E-O/20*(5+28*w+24*S+8*E*w+6*E-O/42*(61+662*w+1320*S+720*S*w))))/y)}else i=$*Xo(l),s=0;else{var h=Math.exp(o/this.k0),c=.5*(h-1/h),d=this.lat0+l/this.k0,g=Math.cos(d);t=Math.sqrt((1-Math.pow(g,2))/(1+Math.pow(c,2))),i=Math.asin(t),l<0&&(i=-i),c===0&&g===0?s=0:s=Q(Math.atan2(c,g)+this.long0)}return n.x=s,n.y=i,n}var eS=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const wh={init:QC,forward:JC,inverse:tS,names:eS};function zy(n){var t=Math.exp(n);return t=(t-1/t)/2,t}function Je(n,t){n=Math.abs(n),t=Math.abs(t);var e=Math.max(n,t),i=Math.min(n,t)/(e||1);return e*Math.sqrt(1+Math.pow(i,2))}function nS(n){var t=1+n,e=t-1;return e===0?n:n*Math.log(t)/e}function iS(n){var t=Math.abs(n);return t=nS(t*(1+t/(Je(1,t)+1))),n<0?-t:t}function Xd(n,t){for(var e=2*Math.cos(2*t),i=n.length-1,s=n[i],o=0,l;--i>=0;)l=-o+e*s+n[i],o=s,s=l;return t+l*Math.sin(2*t)}function rS(n,t){for(var e=2*Math.cos(t),i=n.length-1,s=n[i],o=0,l;--i>=0;)l=-o+e*s+n[i],o=s,s=l;return Math.sin(t)*l}function sS(n){var t=Math.exp(n);return t=(t+1/t)/2,t}function Gy(n,t,e){for(var i=Math.sin(t),s=Math.cos(t),o=zy(e),l=sS(e),h=2*s*l,c=-2*i*o,d=n.length-1,g=n[d],_=0,y=0,v=0,E,M;--d>=0;)E=y,M=_,y=g,_=v,g=-E+h*y-c*_+n[d],v=-M+c*y+h*_;return h=i*l,c=s*o,[h*g-c*v,h*v+c*g]}function aS(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(wh.init.apply(this),this.forward=wh.forward,this.inverse=wh.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var n=this.es/(1+Math.sqrt(1-this.es)),t=n/(2-n),e=t;this.cgb[0]=t*(2+t*(-2/3+t*(-2+t*(116/45+t*(26/45+t*(-2854/675)))))),this.cbg[0]=t*(-2+t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725)))))),e=e*t,this.cgb[1]=e*(7/3+t*(-8/5+t*(-227/45+t*(2704/315+t*(2323/945))))),this.cbg[1]=e*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945))))),e=e*t,this.cgb[2]=e*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835)))),this.cbg[2]=e*(-26/15+t*(34/21+t*(8/5+t*(-12686/2835)))),e=e*t,this.cgb[3]=e*(4279/630+t*(-332/35+t*(-399572/14175))),this.cbg[3]=e*(1237/630+t*(-12/5+t*(-24832/14175))),e=e*t,this.cgb[4]=e*(4174/315+t*(-144838/6237)),this.cbg[4]=e*(-734/315+t*(109598/31185)),e=e*t,this.cgb[5]=e*(601676/22275),this.cbg[5]=e*(444337/155925),e=Math.pow(t,2),this.Qn=this.k0/(1+t)*(1+e*(1/4+e*(1/64+e/256))),this.utg[0]=t*(-.5+t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800)))))),this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800)))))),this.utg[1]=e*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720))))),this.gtu[1]=e*(13/48+t*(-3/5+t*(557/1440+t*(281/630+t*(-1983433/1935360))))),e=e*t,this.utg[2]=e*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720)))),this.gtu[2]=e*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440)))),e=e*t,this.utg[3]=e*(-4397/161280+t*(11/504+t*(830251/7257600))),this.gtu[3]=e*(49561/161280+t*(-179/168+t*(6601661/7257600))),e=e*t,this.utg[4]=e*(-4583/161280+t*(108847/3991680)),this.gtu[4]=e*(34729/80640+t*(-3418889/1995840)),e=e*t,this.utg[5]=e*(-20648693/638668800),this.gtu[5]=e*(212378941/319334400);var i=Xd(this.cbg,this.lat0);this.Zb=-this.Qn*(i+rS(this.gtu,2*i))}function oS(n){var t=Q(n.x-this.long0),e=n.y;e=Xd(this.cbg,e);var i=Math.sin(e),s=Math.cos(e),o=Math.sin(t),l=Math.cos(t);e=Math.atan2(i,l*s),t=Math.atan2(o*s,Je(i,s*l)),t=iS(Math.tan(t));var h=Gy(this.gtu,2*e,2*t);e=e+h[0],t=t+h[1];var c,d;return Math.abs(t)<=2.623395162778?(c=this.a*(this.Qn*t)+this.x0,d=this.a*(this.Qn*e+this.Zb)+this.y0):(c=1/0,d=1/0),n.x=c,n.y=d,n}function lS(n){var t=(n.x-this.x0)*(1/this.a),e=(n.y-this.y0)*(1/this.a);e=(e-this.Zb)/this.Qn,t=t/this.Qn;var i,s;if(Math.abs(t)<=2.623395162778){var o=Gy(this.utg,2*e,2*t);e=e+o[0],t=t+o[1],t=Math.atan(zy(t));var l=Math.sin(e),h=Math.cos(e),c=Math.sin(t),d=Math.cos(t);e=Math.atan2(l*d,Je(c,d*h)),t=Math.atan2(c,d*h),i=Q(t+this.long0),s=Xd(this.cgb,e)}else i=1/0,s=1/0;return n.x=i,n.y=s,n}var hS=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const Ch={init:aS,forward:oS,inverse:lS,names:hS};function uS(n,t){if(n===void 0){if(n=Math.floor((Q(t)+Math.PI)*30/Math.PI)+1,n<0)return 0;if(n>60)return 60}return n}var cS="etmerc";function fS(){var n=uS(this.zone,this.long0);if(n===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(n)-183)*ye,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Ch.init.apply(this),this.forward=Ch.forward,this.inverse=Ch.inverse}var dS=["Universal Transverse Mercator System","utm"];const gS={init:fS,names:dS,dependsOn:cS};function Vd(n,t){return Math.pow((1-n)/(1+n),t)}var mS=20;function _S(){var n=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*n*n),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(n/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Ft)/(Math.pow(Math.tan(.5*this.lat0+Ft),this.C)*Vd(this.e*n,this.ratexp))}function pS(n){var t=n.x,e=n.y;return n.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*e+Ft),this.C)*Vd(this.e*Math.sin(e),this.ratexp))-$,n.x=this.C*t,n}function yS(n){for(var t=1e-14,e=n.x/this.C,i=n.y,s=Math.pow(Math.tan(.5*i+Ft)/this.K,1/this.C),o=mS;o>0&&(i=2*Math.atan(s*Vd(this.e*Math.sin(n.y),-.5*this.e))-$,!(Math.abs(i-n.y)<t));--o)n.y=i;return o?(n.x=e,n.y=i,n):null}var vS=["gauss"];const $d={init:_S,forward:pS,inverse:yS,names:vS};function xS(){$d.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function ES(n){var t,e,i,s;return n.x=Q(n.x-this.long0),$d.forward.apply(this,[n]),t=Math.sin(n.y),e=Math.cos(n.y),i=Math.cos(n.x),s=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*e*i),n.x=s*e*Math.sin(n.x),n.y=s*(this.cosc0*t-this.sinc0*e*i),n.x=this.a*n.x+this.x0,n.y=this.a*n.y+this.y0,n}function MS(n){var t,e,i,s,o;if(n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,n.x/=this.k0,n.y/=this.k0,o=Je(n.x,n.y)){var l=2*Math.atan2(o,this.R2);t=Math.sin(l),e=Math.cos(l),s=Math.asin(e*this.sinc0+n.y*t*this.cosc0/o),i=Math.atan2(n.x*t,o*this.cosc0*e-n.y*this.sinc0*t)}else s=this.phic0,i=0;return n.x=i,n.y=s,$d.inverse.apply(this,[n]),n.x=Q(n.x+this.long0),n}var wS=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const CS={init:xS,forward:ES,inverse:MS,names:wS};function SS(n,t,e){return t*=e,Math.tan(.5*($+n))*Math.pow((1-t)/(1+t),.5*e)}function RS(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Z&&(this.k0=.5*(1+Xo(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=Z&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Z&&Math.abs(Math.cos(this.lat_ts))>Z&&(this.k0=.5*this.cons*Kn(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/On(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Kn(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-$,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function IS(n){var t=n.x,e=n.y,i=Math.sin(e),s=Math.cos(e),o,l,h,c,d,g,_=Q(t-this.long0);return Math.abs(Math.abs(t-this.long0)-Math.PI)<=Z&&Math.abs(e+this.lat0)<=Z?(n.x=NaN,n.y=NaN,n):this.sphere?(o=2*this.k0/(1+this.sinlat0*i+this.coslat0*s*Math.cos(_)),n.x=this.a*o*s*Math.sin(_)+this.x0,n.y=this.a*o*(this.coslat0*i-this.sinlat0*s*Math.cos(_))+this.y0,n):(l=2*Math.atan(this.ssfn_(e,i,this.e))-$,c=Math.cos(l),h=Math.sin(l),Math.abs(this.coslat0)<=Z?(d=On(this.e,e*this.con,this.con*i),g=2*this.a*this.k0*d/this.cons,n.x=this.x0+g*Math.sin(t-this.long0),n.y=this.y0-this.con*g*Math.cos(t-this.long0),n):(Math.abs(this.sinlat0)<Z?(o=2*this.a*this.k0/(1+c*Math.cos(_)),n.y=o*h):(o=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*h+this.cosX0*c*Math.cos(_))),n.y=o*(this.cosX0*h-this.sinX0*c*Math.cos(_))+this.y0),n.x=o*c*Math.sin(_)+this.x0,n))}function TS(n){n.x-=this.x0,n.y-=this.y0;var t,e,i,s,o,l=Math.sqrt(n.x*n.x+n.y*n.y);if(this.sphere){var h=2*Math.atan(l/(2*this.a*this.k0));return t=this.long0,e=this.lat0,l<=Z?(n.x=t,n.y=e,n):(e=Math.asin(Math.cos(h)*this.sinlat0+n.y*Math.sin(h)*this.coslat0/l),Math.abs(this.coslat0)<Z?this.lat0>0?t=Q(this.long0+Math.atan2(n.x,-1*n.y)):t=Q(this.long0+Math.atan2(n.x,n.y)):t=Q(this.long0+Math.atan2(n.x*Math.sin(h),l*this.coslat0*Math.cos(h)-n.y*this.sinlat0*Math.sin(h))),n.x=t,n.y=e,n)}else if(Math.abs(this.coslat0)<=Z){if(l<=Z)return e=this.lat0,t=this.long0,n.x=t,n.y=e,n;n.x*=this.con,n.y*=this.con,i=l*this.cons/(2*this.a*this.k0),e=this.con*ko(this.e,i),t=this.con*Q(this.con*this.long0+Math.atan2(n.x,-1*n.y))}else s=2*Math.atan(l*this.cosX0/(2*this.a*this.k0*this.ms1)),t=this.long0,l<=Z?o=this.X0:(o=Math.asin(Math.cos(s)*this.sinX0+n.y*Math.sin(s)*this.cosX0/l),t=Q(this.long0+Math.atan2(n.x*Math.sin(s),l*this.cosX0*Math.cos(s)-n.y*this.sinX0*Math.sin(s)))),e=-1*ko(this.e,Math.tan(.5*($+o)));return n.x=t,n.y=e,n}var PS=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"];const LS={init:RS,forward:IS,inverse:TS,names:PS,ssfn_:SS};function AS(){var n=this.lat0;this.lambda0=this.long0;var t=Math.sin(n),e=this.a,i=this.rf,s=1/i,o=2*s-Math.pow(s,2),l=this.e=Math.sqrt(o);this.R=this.k0*e*Math.sqrt(1-o)/(1-o*Math.pow(t,2)),this.alpha=Math.sqrt(1+o/(1-o)*Math.pow(Math.cos(n),4)),this.b0=Math.asin(t/this.alpha);var h=Math.log(Math.tan(Math.PI/4+this.b0/2)),c=Math.log(Math.tan(Math.PI/4+n/2)),d=Math.log((1+l*t)/(1-l*t));this.K=h-this.alpha*c+this.alpha*l/2*d}function kS(n){var t=Math.log(Math.tan(Math.PI/4-n.y/2)),e=this.e/2*Math.log((1+this.e*Math.sin(n.y))/(1-this.e*Math.sin(n.y))),i=-this.alpha*(t+e)+this.K,s=2*(Math.atan(Math.exp(i))-Math.PI/4),o=this.alpha*(n.x-this.lambda0),l=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(s)+Math.cos(this.b0)*Math.cos(o))),h=Math.asin(Math.cos(this.b0)*Math.sin(s)-Math.sin(this.b0)*Math.cos(s)*Math.cos(o));return n.y=this.R/2*Math.log((1+Math.sin(h))/(1-Math.sin(h)))+this.y0,n.x=this.R*l+this.x0,n}function OS(n){for(var t=n.x-this.x0,e=n.y-this.y0,i=t/this.R,s=2*(Math.atan(Math.exp(e/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(s)+Math.sin(this.b0)*Math.cos(s)*Math.cos(i)),l=Math.atan(Math.sin(i)/(Math.cos(this.b0)*Math.cos(i)-Math.sin(this.b0)*Math.tan(s))),h=this.lambda0+l/this.alpha,c=0,d=o,g=-1e3,_=0;Math.abs(d-g)>1e-7;){if(++_>20)return;c=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(d))/2)),g=d,d=2*Math.atan(Math.exp(c))-Math.PI/2}return n.x=h,n.y=d,n}var NS=["somerc"];const DS={init:AS,forward:kS,inverse:OS,names:NS};var Ns=1e-7;function FS(n){var t=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],e=typeof n.PROJECTION=="object"?Object.keys(n.PROJECTION)[0]:n.PROJECTION;return"no_uoff"in n||"no_off"in n||t.indexOf(e)!==-1}function bS(){var n,t,e,i,s,o,l,h,c,d,g=0,_,y=0,v=0,E=0,M=0,w=0,S=0;this.no_off=FS(this),this.no_rot="no_rot"in this;var R=!1;"alpha"in this&&(R=!0);var O=!1;if("rectified_grid_angle"in this&&(O=!0),R&&(S=this.alpha),O&&(g=this.rectified_grid_angle*ye),R||O)y=this.longc;else if(v=this.long1,M=this.lat1,E=this.long2,w=this.lat2,Math.abs(M-w)<=Ns||(n=Math.abs(M))<=Ns||Math.abs(n-$)<=Ns||Math.abs(Math.abs(this.lat0)-$)<=Ns||Math.abs(Math.abs(w)-$)<=Ns)throw new Error;var P=1-this.es;t=Math.sqrt(P),Math.abs(this.lat0)>Z?(h=Math.sin(this.lat0),e=Math.cos(this.lat0),n=1-this.es*h*h,this.B=e*e,this.B=Math.sqrt(1+this.es*this.B*this.B/P),this.A=this.B*this.k0*t/n,i=this.B*t/(e*Math.sqrt(n)),s=i*i-1,s<=0?s=0:(s=Math.sqrt(s),this.lat0<0&&(s=-s)),this.E=s+=i,this.E*=Math.pow(On(this.e,this.lat0,h),this.B)):(this.B=1/t,this.A=this.k0,this.E=i=s=1),R||O?(R?(_=Math.asin(Math.sin(S)/i),O||(g=S)):(_=g,S=Math.asin(i*Math.sin(_))),this.lam0=y-Math.asin(.5*(s-1/s)*Math.tan(_))/this.B):(o=Math.pow(On(this.e,M,Math.sin(M)),this.B),l=Math.pow(On(this.e,w,Math.sin(w)),this.B),s=this.E/o,c=(l-o)/(l+o),d=this.E*this.E,d=(d-l*o)/(d+l*o),n=v-E,n<-Math.pi?E-=Lo:n>Math.pi&&(E+=Lo),this.lam0=Q(.5*(v+E)-Math.atan(d*Math.tan(.5*this.B*(v-E))/c)/this.B),_=Math.atan(2*Math.sin(this.B*Q(v-this.lam0))/(s-1/s)),g=S=Math.asin(i*Math.sin(_))),this.singam=Math.sin(_),this.cosgam=Math.cos(_),this.sinrot=Math.sin(g),this.cosrot=Math.cos(g),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(i*i-1)/Math.cos(S))),this.lat0<0&&(this.u_0=-this.u_0)),s=.5*_,this.v_pole_n=this.ArB*Math.log(Math.tan(Ft-s)),this.v_pole_s=this.ArB*Math.log(Math.tan(Ft+s))}function zS(n){var t={},e,i,s,o,l,h,c,d;if(n.x=n.x-this.lam0,Math.abs(Math.abs(n.y)-$)>Z){if(l=this.E/Math.pow(On(this.e,n.y,Math.sin(n.y)),this.B),h=1/l,e=.5*(l-h),i=.5*(l+h),o=Math.sin(this.B*n.x),s=(e*this.singam-o*this.cosgam)/i,Math.abs(Math.abs(s)-1)<Z)throw new Error;d=.5*this.ArB*Math.log((1-s)/(1+s)),h=Math.cos(this.B*n.x),Math.abs(h)<Ns?c=this.A*n.x:c=this.ArB*Math.atan2(e*this.cosgam+o*this.singam,h)}else d=n.y>0?this.v_pole_n:this.v_pole_s,c=this.ArB*n.y;return this.no_rot?(t.x=c,t.y=d):(c-=this.u_0,t.x=d*this.cosrot+c*this.sinrot,t.y=c*this.cosrot-d*this.sinrot),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function GS(n){var t,e,i,s,o,l,h,c={};if(n.x=(n.x-this.x0)*(1/this.a),n.y=(n.y-this.y0)*(1/this.a),this.no_rot?(e=n.y,t=n.x):(e=n.x*this.cosrot-n.y*this.sinrot,t=n.y*this.cosrot+n.x*this.sinrot+this.u_0),i=Math.exp(-this.BrA*e),s=.5*(i-1/i),o=.5*(i+1/i),l=Math.sin(this.BrA*t),h=(l*this.cosgam+s*this.singam)/o,Math.abs(Math.abs(h)-1)<Z)c.x=0,c.y=h<0?-$:$;else{if(c.y=this.E/Math.sqrt((1+h)/(1-h)),c.y=ko(this.e,Math.pow(c.y,1/this.B)),c.y===1/0)throw new Error;c.x=-this.rB*Math.atan2(s*this.cosgam-l*this.singam,Math.cos(this.BrA*t))}return c.x+=this.lam0,c}var jS=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const WS={init:bS,forward:zS,inverse:GS,names:jS};function BS(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<Z)){var n=this.b/this.a;this.e=Math.sqrt(1-n*n);var t=Math.sin(this.lat1),e=Math.cos(this.lat1),i=Kn(this.e,t,e),s=On(this.e,this.lat1,t),o=Math.sin(this.lat2),l=Math.cos(this.lat2),h=Kn(this.e,o,l),c=On(this.e,this.lat2,o),d=On(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>Z?this.ns=Math.log(i/h)/Math.log(s/c):this.ns=t,isNaN(this.ns)&&(this.ns=t),this.f0=i/(this.ns*Math.pow(s,this.ns)),this.rh=this.a*this.f0*Math.pow(d,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function US(n){var t=n.x,e=n.y;Math.abs(2*Math.abs(e)-Math.PI)<=Z&&(e=Xo(e)*($-2*Z));var i=Math.abs(Math.abs(e)-$),s,o;if(i>Z)s=On(this.e,e,Math.sin(e)),o=this.a*this.f0*Math.pow(s,this.ns);else{if(i=e*this.ns,i<=0)return null;o=0}var l=this.ns*Q(t-this.long0);return n.x=this.k0*(o*Math.sin(l))+this.x0,n.y=this.k0*(this.rh-o*Math.cos(l))+this.y0,n}function XS(n){var t,e,i,s,o,l=(n.x-this.x0)/this.k0,h=this.rh-(n.y-this.y0)/this.k0;this.ns>0?(t=Math.sqrt(l*l+h*h),e=1):(t=-Math.sqrt(l*l+h*h),e=-1);var c=0;if(t!==0&&(c=Math.atan2(e*l,e*h)),t!==0||this.ns>0){if(e=1/this.ns,i=Math.pow(t/(this.a*this.f0),e),s=ko(this.e,i),s===-9999)return null}else s=-$;return o=Q(c/this.ns+this.long0),n.x=o,n.y=s,n}var VS=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const $S={init:BS,forward:US,inverse:XS,names:VS};function YS(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function qS(n){var t,e,i,s,o,l,h,c=n.x,d=n.y,g=Q(c-this.long0);return t=Math.pow((1+this.e*Math.sin(d))/(1-this.e*Math.sin(d)),this.alfa*this.e/2),e=2*(Math.atan(this.k*Math.pow(Math.tan(d/2+this.s45),this.alfa)/t)-this.s45),i=-g*this.alfa,s=Math.asin(Math.cos(this.ad)*Math.sin(e)+Math.sin(this.ad)*Math.cos(e)*Math.cos(i)),o=Math.asin(Math.cos(e)*Math.sin(i)/Math.cos(s)),l=this.n*o,h=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(s/2+this.s45),this.n),n.y=h*Math.cos(l)/1,n.x=h*Math.sin(l)/1,this.czech||(n.y*=-1,n.x*=-1),n}function HS(n){var t,e,i,s,o,l,h,c,d=n.x;n.x=n.y,n.y=d,this.czech||(n.y*=-1,n.x*=-1),l=Math.sqrt(n.x*n.x+n.y*n.y),o=Math.atan2(n.y,n.x),s=o/Math.sin(this.s0),i=2*(Math.atan(Math.pow(this.ro0/l,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(i)-Math.sin(this.ad)*Math.cos(i)*Math.cos(s)),e=Math.asin(Math.cos(i)*Math.sin(s)/Math.cos(t)),n.x=this.long0-e/this.alfa,h=t,c=0;var g=0;do n.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(h))/(1-this.e*Math.sin(h)),this.e/2))-this.s45),Math.abs(h-n.y)<1e-10&&(c=1),h=n.y,g+=1;while(c===0&&g<15);return g>=15?null:n}var KS=["Krovak","krovak"];const ZS={init:YS,forward:qS,inverse:HS,names:KS};function je(n,t,e,i,s){return n*s-t*Math.sin(2*s)+e*Math.sin(4*s)-i*Math.sin(6*s)}function Vo(n){return 1-.25*n*(1+n/16*(3+1.25*n))}function $o(n){return .375*n*(1+.25*n*(1+.46875*n))}function Yo(n){return .05859375*n*n*(1+.75*n)}function qo(n){return n*n*n*(35/3072)}function ea(n,t,e){var i=t*e;return n/Math.sqrt(1-i*i)}function fr(n){return Math.abs(n)<$?n:n-Xo(n)*Math.PI}function $h(n,t,e,i,s){var o,l;o=n/t;for(var h=0;h<15;h++)if(l=(n-(t*o-e*Math.sin(2*o)+i*Math.sin(4*o)-s*Math.sin(6*o)))/(t-2*e*Math.cos(2*o)+4*i*Math.cos(4*o)-6*s*Math.cos(6*o)),o+=l,Math.abs(l)<=1e-10)return o;return NaN}function QS(){this.sphere||(this.e0=Vo(this.es),this.e1=$o(this.es),this.e2=Yo(this.es),this.e3=qo(this.es),this.ml0=this.a*je(this.e0,this.e1,this.e2,this.e3,this.lat0))}function JS(n){var t,e,i=n.x,s=n.y;if(i=Q(i-this.long0),this.sphere)t=this.a*Math.asin(Math.cos(s)*Math.sin(i)),e=this.a*(Math.atan2(Math.tan(s),Math.cos(i))-this.lat0);else{var o=Math.sin(s),l=Math.cos(s),h=ea(this.a,this.e,o),c=Math.tan(s)*Math.tan(s),d=i*Math.cos(s),g=d*d,_=this.es*l*l/(1-this.es),y=this.a*je(this.e0,this.e1,this.e2,this.e3,s);t=h*d*(1-g*c*(1/6-(8-c+8*_)*g/120)),e=y-this.ml0+h*o/l*g*(.5+(5-c+6*_)*g/24)}return n.x=t+this.x0,n.y=e+this.y0,n}function tR(n){n.x-=this.x0,n.y-=this.y0;var t=n.x/this.a,e=n.y/this.a,i,s;if(this.sphere){var o=e+this.lat0;i=Math.asin(Math.sin(o)*Math.cos(t)),s=Math.atan2(Math.tan(t),Math.cos(o))}else{var l=this.ml0/this.a+e,h=$h(l,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(h)-$)<=Z)return n.x=this.long0,n.y=$,e<0&&(n.y*=-1),n;var c=ea(this.a,this.e,Math.sin(h)),d=c*c*c/this.a/this.a*(1-this.es),g=Math.pow(Math.tan(h),2),_=t*this.a/c,y=_*_;i=h-c*Math.tan(h)/d*_*_*(.5-(1+3*g)*_*_/24),s=_*(1-y*(g/3+(1+3*g)*g*y/15))/Math.cos(h)}return n.x=Q(s+this.long0),n.y=fr(i),n}var eR=["Cassini","Cassini_Soldner","cass"];const nR={init:QS,forward:JS,inverse:tR,names:eR};function ar(n,t){var e;return n>1e-7?(e=n*t,(1-n*n)*(t/(1-e*e)-.5/n*Math.log((1-e)/(1+e)))):2*t}var iR=1,rR=2,sR=3,aR=4;function oR(){var n=Math.abs(this.lat0);if(Math.abs(n-$)<Z?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(n)<Z?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var t;switch(this.qp=ar(this.e,1),this.mmf=.5/(1-this.es),this.apa=_R(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=ar(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function lR(n){var t,e,i,s,o,l,h,c,d,g,_=n.x,y=n.y;if(_=Q(_-this.long0),this.sphere){if(o=Math.sin(y),g=Math.cos(y),i=Math.cos(_),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e=this.mode===this.EQUIT?1+g*i:1+this.sinph0*o+this.cosph0*g*i,e<=Z)return null;e=Math.sqrt(2/e),t=e*g*Math.sin(_),e*=this.mode===this.EQUIT?o:this.cosph0*o-this.sinph0*g*i}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),Math.abs(y+this.lat0)<Z)return null;e=Ft-y*.5,e=2*(this.mode===this.S_POLE?Math.cos(e):Math.sin(e)),t=e*Math.sin(_),e*=i}}else{switch(h=0,c=0,d=0,i=Math.cos(_),s=Math.sin(_),o=Math.sin(y),l=ar(this.e,o),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(h=l/this.qp,c=Math.sqrt(1-h*h)),this.mode){case this.OBLIQ:d=1+this.sinb1*h+this.cosb1*c*i;break;case this.EQUIT:d=1+c*i;break;case this.N_POLE:d=$+y,l=this.qp-l;break;case this.S_POLE:d=y-$,l=this.qp+l;break}if(Math.abs(d)<Z)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:d=Math.sqrt(2/d),this.mode===this.OBLIQ?e=this.ymf*d*(this.cosb1*h-this.sinb1*c*i):e=(d=Math.sqrt(2/(1+c*i)))*h*this.ymf,t=this.xmf*d*c*s;break;case this.N_POLE:case this.S_POLE:l>=0?(t=(d=Math.sqrt(l))*s,e=i*(this.mode===this.S_POLE?d:-d)):t=e=0;break}}return n.x=this.a*t+this.x0,n.y=this.a*e+this.y0,n}function hR(n){n.x-=this.x0,n.y-=this.y0;var t=n.x/this.a,e=n.y/this.a,i,s,o,l,h,c,d;if(this.sphere){var g=0,_,y=0;if(_=Math.sqrt(t*t+e*e),s=_*.5,s>1)return null;switch(s=2*Math.asin(s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(y=Math.sin(s),g=Math.cos(s)),this.mode){case this.EQUIT:s=Math.abs(_)<=Z?0:Math.asin(e*y/_),t*=y,e=g*_;break;case this.OBLIQ:s=Math.abs(_)<=Z?this.lat0:Math.asin(g*this.sinph0+e*y*this.cosph0/_),t*=y*this.cosph0,e=(g-Math.sin(s)*this.sinph0)*_;break;case this.N_POLE:e=-e,s=$-s;break;case this.S_POLE:s-=$;break}i=e===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(t,e)}else{if(d=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t/=this.dd,e*=this.dd,c=Math.sqrt(t*t+e*e),c<Z)return n.x=this.long0,n.y=this.lat0,n;l=2*Math.asin(.5*c/this.rq),o=Math.cos(l),t*=l=Math.sin(l),this.mode===this.OBLIQ?(d=o*this.sinb1+e*l*this.cosb1/c,h=this.qp*d,e=c*this.cosb1*o-e*this.sinb1*l):(d=e*l/c,h=this.qp*d,e=c*o)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(e=-e),h=t*t+e*e,!h)return n.x=this.long0,n.y=this.lat0,n;d=1-h/this.qp,this.mode===this.S_POLE&&(d=-d)}i=Math.atan2(t,e),s=pR(Math.asin(d),this.apa)}return n.x=Q(this.long0+i),n.y=s,n}var uR=.3333333333333333,cR=.17222222222222222,fR=.10257936507936508,dR=.06388888888888888,gR=.0664021164021164,mR=.016415012942191543;function _R(n){var t,e=[];return e[0]=n*uR,t=n*n,e[0]+=t*cR,e[1]=t*dR,t*=n,e[0]+=t*fR,e[1]+=t*gR,e[2]=t*mR,e}function pR(n,t){var e=n+n;return n+t[0]*Math.sin(e)+t[1]*Math.sin(e+e)+t[2]*Math.sin(e+e+e)}var yR=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const vR={init:oR,forward:lR,inverse:hR,names:yR,S_POLE:iR,N_POLE:rR,EQUIT:sR,OBLIQ:aR};function ur(n){return Math.abs(n)>1&&(n=n>1?1:-1),Math.asin(n)}function xR(){Math.abs(this.lat1+this.lat2)<Z||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Kn(this.e3,this.sin_po,this.cos_po),this.qs1=ar(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Kn(this.e3,this.sin_po,this.cos_po),this.qs2=ar(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=ar(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>Z?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function ER(n){var t=n.x,e=n.y;this.sin_phi=Math.sin(e),this.cos_phi=Math.cos(e);var i=ar(this.e3,this.sin_phi),s=this.a*Math.sqrt(this.c-this.ns0*i)/this.ns0,o=this.ns0*Q(t-this.long0),l=s*Math.sin(o)+this.x0,h=this.rh-s*Math.cos(o)+this.y0;return n.x=l,n.y=h,n}function MR(n){var t,e,i,s,o,l;return n.x-=this.x0,n.y=this.rh-n.y+this.y0,this.ns0>=0?(t=Math.sqrt(n.x*n.x+n.y*n.y),i=1):(t=-Math.sqrt(n.x*n.x+n.y*n.y),i=-1),s=0,t!==0&&(s=Math.atan2(i*n.x,i*n.y)),i=t*this.ns0/this.a,this.sphere?l=Math.asin((this.c-i*i)/(2*this.ns0)):(e=(this.c-i*i)/this.ns0,l=this.phi1z(this.e3,e)),o=Q(s/this.ns0+this.long0),n.x=o,n.y=l,n}function wR(n,t){var e,i,s,o,l,h=ur(.5*t);if(n<Z)return h;for(var c=n*n,d=1;d<=25;d++)if(e=Math.sin(h),i=Math.cos(h),s=n*e,o=1-s*s,l=.5*o*o/i*(t/(1-c)-e/o+.5/n*Math.log((1-s)/(1+s))),h=h+l,Math.abs(l)<=1e-7)return h;return null}var CR=["Albers_Conic_Equal_Area","Albers","aea"];const SR={init:xR,forward:ER,inverse:MR,names:CR,phi1z:wR};function RR(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function IR(n){var t,e,i,s,o,l,h,c,d=n.x,g=n.y;return i=Q(d-this.long0),t=Math.sin(g),e=Math.cos(g),s=Math.cos(i),l=this.sin_p14*t+this.cos_p14*e*s,o=1,l>0||Math.abs(l)<=Z?(h=this.x0+this.a*o*e*Math.sin(i)/l,c=this.y0+this.a*o*(this.cos_p14*t-this.sin_p14*e*s)/l):(h=this.x0+this.infinity_dist*e*Math.sin(i),c=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*e*s)),n.x=h,n.y=c,n}function TR(n){var t,e,i,s,o,l;return n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,n.x/=this.k0,n.y/=this.k0,(t=Math.sqrt(n.x*n.x+n.y*n.y))?(s=Math.atan2(t,this.rc),e=Math.sin(s),i=Math.cos(s),l=ur(i*this.sin_p14+n.y*e*this.cos_p14/t),o=Math.atan2(n.x*e,t*this.cos_p14*i-n.y*this.sin_p14*e),o=Q(this.long0+o)):(l=this.phic0,o=0),n.x=o,n.y=l,n}var PR=["gnom"];const LR={init:RR,forward:IR,inverse:TR,names:PR};function AR(n,t){var e=1-(1-n*n)/(2*n)*Math.log((1-n)/(1+n));if(Math.abs(Math.abs(t)-e)<1e-6)return t<0?-1*$:$;for(var i=Math.asin(.5*t),s,o,l,h,c=0;c<30;c++)if(o=Math.sin(i),l=Math.cos(i),h=n*o,s=Math.pow(1-h*h,2)/(2*l)*(t/(1-n*n)-o/(1-h*h)+.5/n*Math.log((1-h)/(1+h))),i+=s,Math.abs(s)<=1e-10)return i;return NaN}function kR(){this.sphere||(this.k0=Kn(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function OR(n){var t=n.x,e=n.y,i,s,o=Q(t-this.long0);if(this.sphere)i=this.x0+this.a*o*Math.cos(this.lat_ts),s=this.y0+this.a*Math.sin(e)/Math.cos(this.lat_ts);else{var l=ar(this.e,Math.sin(e));i=this.x0+this.a*this.k0*o,s=this.y0+this.a*l*.5/this.k0}return n.x=i,n.y=s,n}function NR(n){n.x-=this.x0,n.y-=this.y0;var t,e;return this.sphere?(t=Q(this.long0+n.x/this.a/Math.cos(this.lat_ts)),e=Math.asin(n.y/this.a*Math.cos(this.lat_ts))):(e=AR(this.e,2*n.y*this.k0/this.a),t=Q(this.long0+n.x/(this.a*this.k0))),n.x=t,n.y=e,n}var DR=["cea"];const FR={init:kR,forward:OR,inverse:NR,names:DR};function bR(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function zR(n){var t=n.x,e=n.y,i=Q(t-this.long0),s=fr(e-this.lat0);return n.x=this.x0+this.a*i*this.rc,n.y=this.y0+this.a*s,n}function GR(n){var t=n.x,e=n.y;return n.x=Q(this.long0+(t-this.x0)/(this.a*this.rc)),n.y=fr(this.lat0+(e-this.y0)/this.a),n}var jR=["Equirectangular","Equidistant_Cylindrical","eqc"];const WR={init:bR,forward:zR,inverse:GR,names:jR};var J_=20;function BR(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Vo(this.es),this.e1=$o(this.es),this.e2=Yo(this.es),this.e3=qo(this.es),this.ml0=this.a*je(this.e0,this.e1,this.e2,this.e3,this.lat0)}function UR(n){var t=n.x,e=n.y,i,s,o,l=Q(t-this.long0);if(o=l*Math.sin(e),this.sphere)Math.abs(e)<=Z?(i=this.a*l,s=-1*this.a*this.lat0):(i=this.a*Math.sin(o)/Math.tan(e),s=this.a*(fr(e-this.lat0)+(1-Math.cos(o))/Math.tan(e)));else if(Math.abs(e)<=Z)i=this.a*l,s=-1*this.ml0;else{var h=ea(this.a,this.e,Math.sin(e))/Math.tan(e);i=h*Math.sin(o),s=this.a*je(this.e0,this.e1,this.e2,this.e3,e)-this.ml0+h*(1-Math.cos(o))}return n.x=i+this.x0,n.y=s+this.y0,n}function XR(n){var t,e,i,s,o,l,h,c,d;if(i=n.x-this.x0,s=n.y-this.y0,this.sphere)if(Math.abs(s+this.a*this.lat0)<=Z)t=Q(i/this.a+this.long0),e=0;else{l=this.lat0+s/this.a,h=i*i/this.a/this.a+l*l,c=l;var g;for(o=J_;o;--o)if(g=Math.tan(c),d=-1*(l*(c*g+1)-c-.5*(c*c+h)*g)/((c-l)/g-1),c+=d,Math.abs(d)<=Z){e=c;break}t=Q(this.long0+Math.asin(i*Math.tan(c)/this.a)/Math.sin(e))}else if(Math.abs(s+this.ml0)<=Z)e=0,t=Q(this.long0+i/this.a);else{l=(this.ml0+s)/this.a,h=i*i/this.a/this.a+l*l,c=l;var _,y,v,E,M;for(o=J_;o;--o)if(M=this.e*Math.sin(c),_=Math.sqrt(1-M*M)*Math.tan(c),y=this.a*je(this.e0,this.e1,this.e2,this.e3,c),v=this.e0-2*this.e1*Math.cos(2*c)+4*this.e2*Math.cos(4*c)-6*this.e3*Math.cos(6*c),E=y/this.a,d=(l*(_*E+1)-E-.5*_*(E*E+h))/(this.es*Math.sin(2*c)*(E*E+h-2*l*E)/(4*_)+(l-E)*(_*v-2/Math.sin(2*c))-v),c-=d,Math.abs(d)<=Z){e=c;break}_=Math.sqrt(1-this.es*Math.pow(Math.sin(e),2))*Math.tan(e),t=Q(this.long0+Math.asin(i*_/this.a)/Math.sin(e))}return n.x=t,n.y=e,n}var VR=["Polyconic","poly"];const $R={init:BR,forward:UR,inverse:XR,names:VR};function YR(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function qR(n){var t,e=n.x,i=n.y,s=i-this.lat0,o=e-this.long0,l=s/co*1e-5,h=o,c=1,d=0;for(t=1;t<=10;t++)c=c*l,d=d+this.A[t]*c;var g=d,_=h,y=1,v=0,E,M,w=0,S=0;for(t=1;t<=6;t++)E=y*g-v*_,M=v*g+y*_,y=E,v=M,w=w+this.B_re[t]*y-this.B_im[t]*v,S=S+this.B_im[t]*y+this.B_re[t]*v;return n.x=S*this.a+this.x0,n.y=w*this.a+this.y0,n}function HR(n){var t,e=n.x,i=n.y,s=e-this.x0,o=i-this.y0,l=o/this.a,h=s/this.a,c=1,d=0,g,_,y=0,v=0;for(t=1;t<=6;t++)g=c*l-d*h,_=d*l+c*h,c=g,d=_,y=y+this.C_re[t]*c-this.C_im[t]*d,v=v+this.C_im[t]*c+this.C_re[t]*d;for(var E=0;E<this.iterations;E++){var M=y,w=v,S,R,O=l,P=h;for(t=2;t<=6;t++)S=M*y-w*v,R=w*y+M*v,M=S,w=R,O=O+(t-1)*(this.B_re[t]*M-this.B_im[t]*w),P=P+(t-1)*(this.B_im[t]*M+this.B_re[t]*w);M=1,w=0;var k=this.B_re[1],b=this.B_im[1];for(t=2;t<=6;t++)S=M*y-w*v,R=w*y+M*v,M=S,w=R,k=k+t*(this.B_re[t]*M-this.B_im[t]*w),b=b+t*(this.B_im[t]*M+this.B_re[t]*w);var B=k*k+b*b;y=(O*k+P*b)/B,v=(P*k-O*b)/B}var G=y,W=v,K=1,rt=0;for(t=1;t<=9;t++)K=K*G,rt=rt+this.D[t]*K;var lt=this.lat0+rt*co*1e5,ct=this.long0+W;return n.x=ct,n.y=lt,n}var KR=["New_Zealand_Map_Grid","nzmg"];const ZR={init:YR,forward:qR,inverse:HR,names:KR};function QR(){}function JR(n){var t=n.x,e=n.y,i=Q(t-this.long0),s=this.x0+this.a*i,o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+e/2.5))*1.25;return n.x=s,n.y=o,n}function tI(n){n.x-=this.x0,n.y-=this.y0;var t=Q(this.long0+n.x/this.a),e=2.5*(Math.atan(Math.exp(.8*n.y/this.a))-Math.PI/4);return n.x=t,n.y=e,n}var eI=["Miller_Cylindrical","mill"];const nI={init:QR,forward:JR,inverse:tI,names:eI};var iI=20;function rI(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Bd(this.es)}function sI(n){var t,e,i=n.x,s=n.y;if(i=Q(i-this.long0),this.sphere){if(!this.m)s=this.n!==1?Math.asin(this.n*Math.sin(s)):s;else for(var o=this.n*Math.sin(s),l=iI;l;--l){var h=(this.m*s+Math.sin(s)-o)/(this.m+Math.cos(s));if(s-=h,Math.abs(h)<Z)break}t=this.a*this.C_x*i*(this.m+Math.cos(s)),e=this.a*this.C_y*s}else{var c=Math.sin(s),d=Math.cos(s);e=this.a*aa(s,c,d,this.en),t=this.a*i*d/Math.sqrt(1-this.es*c*c)}return n.x=t,n.y=e,n}function aI(n){var t,e,i,s;return n.x-=this.x0,i=n.x/this.a,n.y-=this.y0,t=n.y/this.a,this.sphere?(t/=this.C_y,i=i/(this.C_x*(this.m+Math.cos(t))),this.m?t=ur((this.m*t+Math.sin(t))/this.n):this.n!==1&&(t=ur(Math.sin(t)/this.n)),i=Q(i+this.long0),t=fr(t)):(t=Ud(n.y/this.a,this.es,this.en),s=Math.abs(t),s<$?(s=Math.sin(t),e=this.long0+n.x*Math.sqrt(1-this.es*s*s)/(this.a*Math.cos(t)),i=Q(e)):s-Z<$&&(i=this.long0)),n.x=i,n.y=t,n}var oI=["Sinusoidal","sinu"];const lI={init:rI,forward:sI,inverse:aI,names:oI};function hI(){}function uI(n){for(var t=n.x,e=n.y,i=Q(t-this.long0),s=e,o=Math.PI*Math.sin(e);;){var l=-(s+Math.sin(s)-o)/(1+Math.cos(s));if(s+=l,Math.abs(l)<Z)break}s/=2,Math.PI/2-Math.abs(e)<Z&&(i=0);var h=.900316316158*this.a*i*Math.cos(s)+this.x0,c=1.4142135623731*this.a*Math.sin(s)+this.y0;return n.x=h,n.y=c,n}function cI(n){var t,e;n.x-=this.x0,n.y-=this.y0,e=n.y/(1.4142135623731*this.a),Math.abs(e)>.999999999999&&(e=.999999999999),t=Math.asin(e);var i=Q(this.long0+n.x/(.900316316158*this.a*Math.cos(t)));i<-Math.PI&&(i=-Math.PI),i>Math.PI&&(i=Math.PI),e=(2*t+Math.sin(2*t))/Math.PI,Math.abs(e)>1&&(e=1);var s=Math.asin(e);return n.x=i,n.y=s,n}var fI=["Mollweide","moll"];const dI={init:hI,forward:uI,inverse:cI,names:fI};function gI(){Math.abs(this.lat1+this.lat2)<Z||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Vo(this.es),this.e1=$o(this.es),this.e2=Yo(this.es),this.e3=qo(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Kn(this.e,this.sinphi,this.cosphi),this.ml1=je(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<Z?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Kn(this.e,this.sinphi,this.cosphi),this.ml2=je(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=je(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function mI(n){var t=n.x,e=n.y,i;if(this.sphere)i=this.a*(this.g-e);else{var s=je(this.e0,this.e1,this.e2,this.e3,e);i=this.a*(this.g-s)}var o=this.ns*Q(t-this.long0),l=this.x0+i*Math.sin(o),h=this.y0+this.rh-i*Math.cos(o);return n.x=l,n.y=h,n}function _I(n){n.x-=this.x0,n.y=this.rh-n.y+this.y0;var t,e,i,s;this.ns>=0?(e=Math.sqrt(n.x*n.x+n.y*n.y),t=1):(e=-Math.sqrt(n.x*n.x+n.y*n.y),t=-1);var o=0;if(e!==0&&(o=Math.atan2(t*n.x,t*n.y)),this.sphere)return s=Q(this.long0+o/this.ns),i=fr(this.g-e/this.a),n.x=s,n.y=i,n;var l=this.g-e/this.a;return i=$h(l,this.e0,this.e1,this.e2,this.e3),s=Q(this.long0+o/this.ns),n.x=s,n.y=i,n}var pI=["Equidistant_Conic","eqdc"];const yI={init:gI,forward:mI,inverse:_I,names:pI};function vI(){this.R=this.a}function xI(n){var t=n.x,e=n.y,i=Q(t-this.long0),s,o;Math.abs(e)<=Z&&(s=this.x0+this.R*i,o=this.y0);var l=ur(2*Math.abs(e/Math.PI));(Math.abs(i)<=Z||Math.abs(Math.abs(e)-$)<=Z)&&(s=this.x0,e>=0?o=this.y0+Math.PI*this.R*Math.tan(.5*l):o=this.y0+Math.PI*this.R*-Math.tan(.5*l));var h=.5*Math.abs(Math.PI/i-i/Math.PI),c=h*h,d=Math.sin(l),g=Math.cos(l),_=g/(d+g-1),y=_*_,v=_*(2/d-1),E=v*v,M=Math.PI*this.R*(h*(_-E)+Math.sqrt(c*(_-E)*(_-E)-(E+c)*(y-E)))/(E+c);i<0&&(M=-M),s=this.x0+M;var w=c+_;return M=Math.PI*this.R*(v*w-h*Math.sqrt((E+c)*(c+1)-w*w))/(E+c),e>=0?o=this.y0+M:o=this.y0-M,n.x=s,n.y=o,n}function EI(n){var t,e,i,s,o,l,h,c,d,g,_,y,v;return n.x-=this.x0,n.y-=this.y0,_=Math.PI*this.R,i=n.x/_,s=n.y/_,o=i*i+s*s,l=-Math.abs(s)*(1+o),h=l-2*s*s+i*i,c=-2*l+1+2*s*s+o*o,v=s*s/c+(2*h*h*h/c/c/c-9*l*h/c/c)/27,d=(l-h*h/3/c)/c,g=2*Math.sqrt(-d/3),_=3*v/d/g,Math.abs(_)>1&&(_>=0?_=1:_=-1),y=Math.acos(_)/3,n.y>=0?e=(-g*Math.cos(y+Math.PI/3)-h/3/c)*Math.PI:e=-(-g*Math.cos(y+Math.PI/3)-h/3/c)*Math.PI,Math.abs(i)<Z?t=this.long0:t=Q(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(i*i-s*s)+o*o))/2/i),n.x=t,n.y=e,n}var MI=["Van_der_Grinten_I","VanDerGrinten","vandg"];const wI={init:vI,forward:xI,inverse:EI,names:MI};function CI(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function SI(n){var t=n.x,e=n.y,i=Math.sin(n.y),s=Math.cos(n.y),o=Q(t-this.long0),l,h,c,d,g,_,y,v,E,M,w,S,R,O,P,k,b,B,G,W,K,rt,lt;return this.sphere?Math.abs(this.sin_p12-1)<=Z?(n.x=this.x0+this.a*($-e)*Math.sin(o),n.y=this.y0-this.a*($-e)*Math.cos(o),n):Math.abs(this.sin_p12+1)<=Z?(n.x=this.x0+this.a*($+e)*Math.sin(o),n.y=this.y0+this.a*($+e)*Math.cos(o),n):(B=this.sin_p12*i+this.cos_p12*s*Math.cos(o),k=Math.acos(B),b=k?k/Math.sin(k):1,n.x=this.x0+this.a*b*s*Math.sin(o),n.y=this.y0+this.a*b*(this.cos_p12*i-this.sin_p12*s*Math.cos(o)),n):(l=Vo(this.es),h=$o(this.es),c=Yo(this.es),d=qo(this.es),Math.abs(this.sin_p12-1)<=Z?(g=this.a*je(l,h,c,d,$),_=this.a*je(l,h,c,d,e),n.x=this.x0+(g-_)*Math.sin(o),n.y=this.y0-(g-_)*Math.cos(o),n):Math.abs(this.sin_p12+1)<=Z?(g=this.a*je(l,h,c,d,$),_=this.a*je(l,h,c,d,e),n.x=this.x0+(g+_)*Math.sin(o),n.y=this.y0+(g+_)*Math.cos(o),n):(y=i/s,v=ea(this.a,this.e,this.sin_p12),E=ea(this.a,this.e,i),M=Math.atan((1-this.es)*y+this.es*v*this.sin_p12/(E*s)),w=Math.atan2(Math.sin(o),this.cos_p12*Math.tan(M)-this.sin_p12*Math.cos(o)),w===0?G=Math.asin(this.cos_p12*Math.sin(M)-this.sin_p12*Math.cos(M)):Math.abs(Math.abs(w)-Math.PI)<=Z?G=-Math.asin(this.cos_p12*Math.sin(M)-this.sin_p12*Math.cos(M)):G=Math.asin(Math.sin(o)*Math.cos(M)/Math.sin(w)),S=this.e*this.sin_p12/Math.sqrt(1-this.es),R=this.e*this.cos_p12*Math.cos(w)/Math.sqrt(1-this.es),O=S*R,P=R*R,W=G*G,K=W*G,rt=K*G,lt=rt*G,k=v*G*(1-W*P*(1-P)/6+K/8*O*(1-2*P)+rt/120*(P*(4-7*P)-3*S*S*(1-7*P))-lt/48*O),n.x=this.x0+k*Math.sin(w),n.y=this.y0+k*Math.cos(w),n))}function RI(n){n.x-=this.x0,n.y-=this.y0;var t,e,i,s,o,l,h,c,d,g,_,y,v,E,M,w,S,R,O,P,k,b,B,G;return this.sphere?(t=Math.sqrt(n.x*n.x+n.y*n.y),t>2*$*this.a?void 0:(e=t/this.a,i=Math.sin(e),s=Math.cos(e),o=this.long0,Math.abs(t)<=Z?l=this.lat0:(l=ur(s*this.sin_p12+n.y*i*this.cos_p12/t),h=Math.abs(this.lat0)-$,Math.abs(h)<=Z?this.lat0>=0?o=Q(this.long0+Math.atan2(n.x,-n.y)):o=Q(this.long0-Math.atan2(-n.x,n.y)):o=Q(this.long0+Math.atan2(n.x*i,t*this.cos_p12*s-n.y*this.sin_p12*i))),n.x=o,n.y=l,n)):(c=Vo(this.es),d=$o(this.es),g=Yo(this.es),_=qo(this.es),Math.abs(this.sin_p12-1)<=Z?(y=this.a*je(c,d,g,_,$),t=Math.sqrt(n.x*n.x+n.y*n.y),v=y-t,l=$h(v/this.a,c,d,g,_),o=Q(this.long0+Math.atan2(n.x,-1*n.y)),n.x=o,n.y=l,n):Math.abs(this.sin_p12+1)<=Z?(y=this.a*je(c,d,g,_,$),t=Math.sqrt(n.x*n.x+n.y*n.y),v=t-y,l=$h(v/this.a,c,d,g,_),o=Q(this.long0+Math.atan2(n.x,n.y)),n.x=o,n.y=l,n):(t=Math.sqrt(n.x*n.x+n.y*n.y),w=Math.atan2(n.x,n.y),E=ea(this.a,this.e,this.sin_p12),S=Math.cos(w),R=this.e*this.cos_p12*S,O=-R*R/(1-this.es),P=3*this.es*(1-O)*this.sin_p12*this.cos_p12*S/(1-this.es),k=t/E,b=k-O*(1+O)*Math.pow(k,3)/6-P*(1+3*O)*Math.pow(k,4)/24,B=1-O*b*b/2-k*b*b*b/6,M=Math.asin(this.sin_p12*Math.cos(b)+this.cos_p12*Math.sin(b)*S),o=Q(this.long0+Math.asin(Math.sin(w)*Math.sin(b)/Math.cos(M))),G=Math.sin(M),l=Math.atan2((G-this.es*B*this.sin_p12)*Math.tan(M),G*(1-this.es)),n.x=o,n.y=l,n))}var II=["Azimuthal_Equidistant","aeqd"];const TI={init:CI,forward:SI,inverse:RI,names:II};function PI(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function LI(n){var t,e,i,s,o,l,h,c,d=n.x,g=n.y;return i=Q(d-this.long0),t=Math.sin(g),e=Math.cos(g),s=Math.cos(i),l=this.sin_p14*t+this.cos_p14*e*s,o=1,(l>0||Math.abs(l)<=Z)&&(h=this.a*o*e*Math.sin(i),c=this.y0+this.a*o*(this.cos_p14*t-this.sin_p14*e*s)),n.x=h,n.y=c,n}function AI(n){var t,e,i,s,o,l,h;return n.x-=this.x0,n.y-=this.y0,t=Math.sqrt(n.x*n.x+n.y*n.y),e=ur(t/this.a),i=Math.sin(e),s=Math.cos(e),l=this.long0,Math.abs(t)<=Z?(h=this.lat0,n.x=l,n.y=h,n):(h=ur(s*this.sin_p14+n.y*i*this.cos_p14/t),o=Math.abs(this.lat0)-$,Math.abs(o)<=Z?(this.lat0>=0?l=Q(this.long0+Math.atan2(n.x,-n.y)):l=Q(this.long0-Math.atan2(-n.x,n.y)),n.x=l,n.y=h,n):(l=Q(this.long0+Math.atan2(n.x*i,t*this.cos_p14*s-n.y*this.sin_p14*i)),n.x=l,n.y=h,n))}var kI=["ortho"];const OI={init:PI,forward:LI,inverse:AI,names:kI};var Ht={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},bt={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function NI(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=$-Ft/2?this.face=Ht.TOP:this.lat0<=-($-Ft/2)?this.face=Ht.BOTTOM:Math.abs(this.long0)<=Ft?this.face=Ht.FRONT:Math.abs(this.long0)<=$+Ft?this.face=this.long0>0?Ht.RIGHT:Ht.LEFT:this.face=Ht.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function DI(n){var t={x:0,y:0},e,i,s,o,l,h,c={value:0};if(n.x-=this.long0,this.es!==0?e=Math.atan(this.one_minus_f_squared*Math.tan(n.y)):e=n.y,i=n.x,this.face===Ht.TOP)o=$-e,i>=Ft&&i<=$+Ft?(c.value=bt.AREA_0,s=i-$):i>$+Ft||i<=-($+Ft)?(c.value=bt.AREA_1,s=i>0?i-xe:i+xe):i>-($+Ft)&&i<=-Ft?(c.value=bt.AREA_2,s=i+$):(c.value=bt.AREA_3,s=i);else if(this.face===Ht.BOTTOM)o=$+e,i>=Ft&&i<=$+Ft?(c.value=bt.AREA_0,s=-i+$):i<Ft&&i>=-Ft?(c.value=bt.AREA_1,s=-i):i<-Ft&&i>=-($+Ft)?(c.value=bt.AREA_2,s=-i-$):(c.value=bt.AREA_3,s=i>0?-i+xe:-i-xe);else{var d,g,_,y,v,E,M;this.face===Ht.RIGHT?i=Xs(i,+$):this.face===Ht.BACK?i=Xs(i,3.14159265359):this.face===Ht.LEFT&&(i=Xs(i,-$)),y=Math.sin(e),v=Math.cos(e),E=Math.sin(i),M=Math.cos(i),d=v*M,g=v*E,_=y,this.face===Ht.FRONT?(o=Math.acos(d),s=yh(o,_,g,c)):this.face===Ht.RIGHT?(o=Math.acos(g),s=yh(o,_,-d,c)):this.face===Ht.BACK?(o=Math.acos(-d),s=yh(o,_,-g,c)):this.face===Ht.LEFT?(o=Math.acos(-g),s=yh(o,_,d,c)):(o=s=0,c.value=bt.AREA_0)}return h=Math.atan(12/xe*(s+Math.acos(Math.sin(s)*Math.cos(Ft))-$)),l=Math.sqrt((1-Math.cos(o))/(Math.cos(h)*Math.cos(h))/(1-Math.cos(Math.atan(1/Math.cos(s))))),c.value===bt.AREA_1?h+=$:c.value===bt.AREA_2?h+=xe:c.value===bt.AREA_3&&(h+=1.5*xe),t.x=l*Math.cos(h),t.y=l*Math.sin(h),t.x=t.x*this.a+this.x0,t.y=t.y*this.a+this.y0,n.x=t.x,n.y=t.y,n}function FI(n){var t={lam:0,phi:0},e,i,s,o,l,h,c,d,g,_={value:0};if(n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,i=Math.atan(Math.sqrt(n.x*n.x+n.y*n.y)),e=Math.atan2(n.y,n.x),n.x>=0&&n.x>=Math.abs(n.y)?_.value=bt.AREA_0:n.y>=0&&n.y>=Math.abs(n.x)?(_.value=bt.AREA_1,e-=$):n.x<0&&-n.x>=Math.abs(n.y)?(_.value=bt.AREA_2,e=e<0?e+xe:e-xe):(_.value=bt.AREA_3,e+=$),g=xe/12*Math.tan(e),l=Math.sin(g)/(Math.cos(g)-1/Math.sqrt(2)),h=Math.atan(l),s=Math.cos(e),o=Math.tan(i),c=1-s*s*o*o*(1-Math.cos(Math.atan(1/Math.cos(h)))),c<-1?c=-1:c>1&&(c=1),this.face===Ht.TOP)d=Math.acos(c),t.phi=$-d,_.value===bt.AREA_0?t.lam=h+$:_.value===bt.AREA_1?t.lam=h<0?h+xe:h-xe:_.value===bt.AREA_2?t.lam=h-$:t.lam=h;else if(this.face===Ht.BOTTOM)d=Math.acos(c),t.phi=d-$,_.value===bt.AREA_0?t.lam=-h+$:_.value===bt.AREA_1?t.lam=-h:_.value===bt.AREA_2?t.lam=-h-$:t.lam=h<0?-h-xe:-h+xe;else{var y,v,E;y=c,g=y*y,g>=1?E=0:E=Math.sqrt(1-g)*Math.sin(h),g+=E*E,g>=1?v=0:v=Math.sqrt(1-g),_.value===bt.AREA_1?(g=v,v=-E,E=g):_.value===bt.AREA_2?(v=-v,E=-E):_.value===bt.AREA_3&&(g=v,v=E,E=-g),this.face===Ht.RIGHT?(g=y,y=-v,v=g):this.face===Ht.BACK?(y=-y,v=-v):this.face===Ht.LEFT&&(g=y,y=v,v=-g),t.phi=Math.acos(-E)-$,t.lam=Math.atan2(v,y),this.face===Ht.RIGHT?t.lam=Xs(t.lam,-$):this.face===Ht.BACK?t.lam=Xs(t.lam,-3.14159265359):this.face===Ht.LEFT&&(t.lam=Xs(t.lam,+$))}if(this.es!==0){var M,w,S;M=t.phi<0?1:0,w=Math.tan(t.phi),S=this.b/Math.sqrt(w*w+this.one_minus_f_squared),t.phi=Math.atan(Math.sqrt(this.a*this.a-S*S)/(this.one_minus_f*S)),M&&(t.phi=-t.phi)}return t.lam+=this.long0,n.x=t.lam,n.y=t.phi,n}function yh(n,t,e,i){var s;return n<Z?(i.value=bt.AREA_0,s=0):(s=Math.atan2(t,e),Math.abs(s)<=Ft?i.value=bt.AREA_0:s>Ft&&s<=$+Ft?(i.value=bt.AREA_1,s-=$):s>$+Ft||s<=-($+Ft)?(i.value=bt.AREA_2,s=s>=0?s-xe:s+xe):(i.value=bt.AREA_3,s+=$)),s}function Xs(n,t){var e=n+t;return e<-3.14159265359?e+=Lo:e>3.14159265359&&(e-=Lo),e}var bI=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const zI={init:NI,forward:DI,inverse:FI,names:bI};var Yf=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],oo=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],jy=.8487,Wy=1.3523,By=Yn/5,GI=1/By,js=18,Yh=function(n,t){return n[0]+t*(n[1]+t*(n[2]+t*n[3]))},jI=function(n,t){return n[1]+t*(2*n[2]+t*3*n[3])};function WI(n,t,e,i){for(var s=t;i;--i){var o=n(s);if(s-=o,Math.abs(o)<e)break}return s}function BI(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function UI(n){var t=Q(n.x-this.long0),e=Math.abs(n.y),i=Math.floor(e*By);i<0?i=0:i>=js&&(i=js-1),e=Yn*(e-GI*i);var s={x:Yh(Yf[i],e)*t,y:Yh(oo[i],e)};return n.y<0&&(s.y=-s.y),s.x=s.x*this.a*jy+this.x0,s.y=s.y*this.a*Wy+this.y0,s}function XI(n){var t={x:(n.x-this.x0)/(this.a*jy),y:Math.abs(n.y-this.y0)/(this.a*Wy)};if(t.y>=1)t.x/=Yf[js][0],t.y=n.y<0?-$:$;else{var e=Math.floor(t.y*js);for(e<0?e=0:e>=js&&(e=js-1);;)if(oo[e][0]>t.y)--e;else if(oo[e+1][0]<=t.y)++e;else break;var i=oo[e],s=5*(t.y-i[0])/(oo[e+1][0]-i[0]);s=WI(function(o){return(Yh(i,o)-t.y)/jI(i,o)},s,Z,100),t.x/=Yh(Yf[e],s),t.y=(5*e+s)*ye,n.y<0&&(t.y=-t.y)}return t.x=Q(t.x+this.long0),t}var VI=["Robinson","robin"];const $I={init:BI,forward:UI,inverse:XI,names:VI};function YI(){this.name="geocent"}function qI(n){var t=Py(n,this.es,this.a);return t}function HI(n){var t=Ly(n,this.es,this.a,this.b);return t}var KI=["Geocentric","geocentric","geocent","Geocent"];const ZI={init:YI,forward:qI,inverse:HI,names:KI};var Te={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},Qa={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function QI(){if(Object.keys(Qa).forEach((function(e){if(typeof this[e]>"u")this[e]=Qa[e].def;else{if(Qa[e].num&&isNaN(this[e]))throw new Error("Invalid parameter value, must be numeric "+e+" = "+this[e]);Qa[e].num&&(this[e]=parseFloat(this[e]))}Qa[e].degrees&&(this[e]=this[e]*ye)}).bind(this)),Math.abs(Math.abs(this.lat0)-$)<Z?this.mode=this.lat0<0?Te.S_POLE:Te.N_POLE:Math.abs(this.lat0)<Z?this.mode=Te.EQUIT:(this.mode=Te.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var n=this.tilt,t=this.azi;this.cg=Math.cos(t),this.sg=Math.sin(t),this.cw=Math.cos(n),this.sw=Math.sin(n)}function JI(n){n.x-=this.long0;var t=Math.sin(n.y),e=Math.cos(n.y),i=Math.cos(n.x),s,o;switch(this.mode){case Te.OBLIQ:o=this.sinph0*t+this.cosph0*e*i;break;case Te.EQUIT:o=e*i;break;case Te.S_POLE:o=-t;break;case Te.N_POLE:o=t;break}switch(o=this.pn1/(this.p-o),s=o*e*Math.sin(n.x),this.mode){case Te.OBLIQ:o*=this.cosph0*t-this.sinph0*e*i;break;case Te.EQUIT:o*=t;break;case Te.N_POLE:o*=-(e*i);break;case Te.S_POLE:o*=e*i;break}var l,h;return l=o*this.cg+s*this.sg,h=1/(l*this.sw*this.h1+this.cw),s=(s*this.cg-o*this.sg)*this.cw*h,o=l*h,n.x=s*this.a,n.y=o*this.a,n}function t3(n){n.x/=this.a,n.y/=this.a;var t={x:n.x,y:n.y},e,i,s;s=1/(this.pn1-n.y*this.sw),e=this.pn1*n.x*s,i=this.pn1*n.y*this.cw*s,n.x=e*this.cg+i*this.sg,n.y=i*this.cg-e*this.sg;var o=Je(n.x,n.y);if(Math.abs(o)<Z)t.x=0,t.y=n.y;else{var l,h;switch(h=1-o*o*this.pfact,h=(this.p-Math.sqrt(h))/(this.pn1/o+o/this.pn1),l=Math.sqrt(1-h*h),this.mode){case Te.OBLIQ:t.y=Math.asin(l*this.sinph0+n.y*h*this.cosph0/o),n.y=(l-this.sinph0*Math.sin(t.y))*o,n.x*=h*this.cosph0;break;case Te.EQUIT:t.y=Math.asin(n.y*h/o),n.y=l*o,n.x*=h;break;case Te.N_POLE:t.y=Math.asin(l),n.y=-n.y;break;case Te.S_POLE:t.y=-Math.asin(l);break}t.x=Math.atan2(n.x,n.y)}return n.x=t.x+this.long0,n.y=t.y,n}var e3=["Tilted_Perspective","tpers"];const n3={init:QI,forward:JI,inverse:t3,names:e3};function i3(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var n=1-this.es,t=1/n;this.radius_p=Math.sqrt(n),this.radius_p2=n,this.radius_p_inv2=t,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function r3(n){var t=n.x,e=n.y,i,s,o,l;if(t=t-this.long0,this.shape==="ellipse"){e=Math.atan(this.radius_p2*Math.tan(e));var h=this.radius_p/Je(this.radius_p*Math.cos(e),Math.sin(e));if(s=h*Math.cos(t)*Math.cos(e),o=h*Math.sin(t)*Math.cos(e),l=h*Math.sin(e),(this.radius_g-s)*s-o*o-l*l*this.radius_p_inv2<0)return n.x=Number.NaN,n.y=Number.NaN,n;i=this.radius_g-s,this.flip_axis?(n.x=this.radius_g_1*Math.atan(o/Je(l,i)),n.y=this.radius_g_1*Math.atan(l/i)):(n.x=this.radius_g_1*Math.atan(o/i),n.y=this.radius_g_1*Math.atan(l/Je(o,i)))}else this.shape==="sphere"&&(i=Math.cos(e),s=Math.cos(t)*i,o=Math.sin(t)*i,l=Math.sin(e),i=this.radius_g-s,this.flip_axis?(n.x=this.radius_g_1*Math.atan(o/Je(l,i)),n.y=this.radius_g_1*Math.atan(l/i)):(n.x=this.radius_g_1*Math.atan(o/i),n.y=this.radius_g_1*Math.atan(l/Je(o,i))));return n.x=n.x*this.a,n.y=n.y*this.a,n}function s3(n){var t=-1,e=0,i=0,s,o,l,h;if(n.x=n.x/this.a,n.y=n.y/this.a,this.shape==="ellipse"){this.flip_axis?(i=Math.tan(n.y/this.radius_g_1),e=Math.tan(n.x/this.radius_g_1)*Je(1,i)):(e=Math.tan(n.x/this.radius_g_1),i=Math.tan(n.y/this.radius_g_1)*Je(1,e));var c=i/this.radius_p;if(s=e*e+c*c+t*t,o=2*this.radius_g*t,l=o*o-4*s*this.C,l<0)return n.x=Number.NaN,n.y=Number.NaN,n;h=(-o-Math.sqrt(l))/(2*s),t=this.radius_g+h*t,e*=h,i*=h,n.x=Math.atan2(e,t),n.y=Math.atan(i*Math.cos(n.x)/t),n.y=Math.atan(this.radius_p_inv2*Math.tan(n.y))}else if(this.shape==="sphere"){if(this.flip_axis?(i=Math.tan(n.y/this.radius_g_1),e=Math.tan(n.x/this.radius_g_1)*Math.sqrt(1+i*i)):(e=Math.tan(n.x/this.radius_g_1),i=Math.tan(n.y/this.radius_g_1)*Math.sqrt(1+e*e)),s=e*e+i*i+t*t,o=2*this.radius_g*t,l=o*o-4*s*this.C,l<0)return n.x=Number.NaN,n.y=Number.NaN,n;h=(-o-Math.sqrt(l))/(2*s),t=this.radius_g+h*t,e*=h,i*=h,n.x=Math.atan2(e,t),n.y=Math.atan(i*Math.cos(n.x)/t)}return n.x=n.x+this.long0,n}var a3=["Geostationary Satellite View","Geostationary_Satellite","geos"];const o3={init:i3,forward:r3,inverse:s3,names:a3};var fo=1.340264,go=-.081106,mo=893e-6,_o=.003796,qh=Math.sqrt(3)/2;function l3(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function h3(n){var t=Q(n.x-this.long0),e=n.y,i=Math.asin(qh*Math.sin(e)),s=i*i,o=s*s*s;return n.x=t*Math.cos(i)/(qh*(fo+3*go*s+o*(7*mo+9*_o*s))),n.y=i*(fo+go*s+o*(mo+_o*s)),n.x=this.a*n.x+this.x0,n.y=this.a*n.y+this.y0,n}function u3(n){n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a;var t=1e-9,e=12,i=n.y,s,o,l,h,c,d;for(d=0;d<e&&(s=i*i,o=s*s*s,l=i*(fo+go*s+o*(mo+_o*s))-n.y,h=fo+3*go*s+o*(7*mo+9*_o*s),i-=c=l/h,!(Math.abs(c)<t));++d);return s=i*i,o=s*s*s,n.x=qh*n.x*(fo+3*go*s+o*(7*mo+9*_o*s))/Math.cos(i),n.y=Math.asin(Math.sin(i)/qh),n.x=Q(n.x+this.long0),n}var c3=["eqearth","Equal Earth","Equal_Earth"];const f3={init:l3,forward:h3,inverse:u3,names:c3};var Oo=1e-10;function d3(){var n;if(this.phi1=this.lat1,Math.abs(this.phi1)<Oo)throw new Error;this.es?(this.en=Bd(this.es),this.m1=aa(this.phi1,this.am1=Math.sin(this.phi1),n=Math.cos(this.phi1),this.en),this.am1=n/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=m3,this.forward=g3):(Math.abs(this.phi1)+Oo>=$?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=p3,this.forward=_3)}function g3(n){var t=Q(n.x-(this.long0||0)),e=n.y,i,s,o;return i=this.am1+this.m1-aa(e,s=Math.sin(e),o=Math.cos(e),this.en),s=o*t/(i*Math.sqrt(1-this.es*s*s)),n.x=i*Math.sin(s),n.y=this.am1-i*Math.cos(s),n.x=this.a*n.x+(this.x0||0),n.y=this.a*n.y+(this.y0||0),n}function m3(n){n.x=(n.x-(this.x0||0))/this.a,n.y=(n.y-(this.y0||0))/this.a;var t,e,i,s;if(e=Je(n.x,n.y=this.am1-n.y),s=Ud(this.am1+this.m1-e,this.es,this.en),(t=Math.abs(s))<$)t=Math.sin(s),i=e*Math.atan2(n.x,n.y)*Math.sqrt(1-this.es*t*t)/Math.cos(s);else if(Math.abs(t-$)<=Oo)i=0;else throw new Error;return n.x=Q(i+(this.long0||0)),n.y=fr(s),n}function _3(n){var t=Q(n.x-(this.long0||0)),e=n.y,i,s;return s=this.cphi1+this.phi1-e,Math.abs(s)>Oo?(n.x=s*Math.sin(i=t*Math.cos(e)/s),n.y=this.cphi1-s*Math.cos(i)):n.x=n.y=0,n.x=this.a*n.x+(this.x0||0),n.y=this.a*n.y+(this.y0||0),n}function p3(n){n.x=(n.x-(this.x0||0))/this.a,n.y=(n.y-(this.y0||0))/this.a;var t,e,i=Je(n.x,n.y=this.cphi1-n.y);if(e=this.cphi1+this.phi1-i,Math.abs(e)>$)throw new Error;return Math.abs(Math.abs(e)-$)<=Oo?t=0:t=i*Math.atan2(n.x,n.y)/Math.cos(e),n.x=Q(t+(this.long0||0)),n.y=fr(e),n}var y3=["bonne","Bonne (Werner lat_1=90)"];const v3={init:d3,names:y3};function x3(n){n.Proj.projections.add(wh),n.Proj.projections.add(Ch),n.Proj.projections.add(gS),n.Proj.projections.add(CS),n.Proj.projections.add(LS),n.Proj.projections.add(DS),n.Proj.projections.add(WS),n.Proj.projections.add($S),n.Proj.projections.add(ZS),n.Proj.projections.add(nR),n.Proj.projections.add(vR),n.Proj.projections.add(SR),n.Proj.projections.add(LR),n.Proj.projections.add(FR),n.Proj.projections.add(WR),n.Proj.projections.add($R),n.Proj.projections.add(ZR),n.Proj.projections.add(nI),n.Proj.projections.add(lI),n.Proj.projections.add(dI),n.Proj.projections.add(yI),n.Proj.projections.add(wI),n.Proj.projections.add(TI),n.Proj.projections.add(OI),n.Proj.projections.add(zI),n.Proj.projections.add($I),n.Proj.projections.add(ZI),n.Proj.projections.add(n3),n.Proj.projections.add(o3),n.Proj.projections.add(f3),n.Proj.projections.add(v3)}tn.defaultDatum="WGS84";tn.Proj=Hn;tn.WGS84=new tn.Proj("WGS84");tn.Point=ta;tn.toPoint=Ay;tn.defs=be;tn.nadgrid=_C;tn.transform=Vh;tn.mgrs=kC;tn.version="__VERSION__";x3(tn);function E3(n){const t=Object.keys(n.defs),e=t.length;let i,s;for(i=0;i<e;++i){const o=t[i];if(!vh(o)){const l=n.defs(o);let h=l.units;!h&&l.projName==="longlat"&&(h="degrees"),Lh(new Qh({code:o,axisOrientation:l.axis,metersPerUnit:l.to_meter,units:h}))}}for(i=0;i<e;++i){const o=t[i],l=vh(o);for(s=0;s<e;++s){const h=t[s],c=vh(h);if(!xh(o,h))if(n.defs[o]===n.defs[h])Lf([l,c]);else{const d=n(o,h);Y2(l,c,Hm(l,c,d.forward),Hm(c,l,d.inverse))}}}}tn.defs("EPSG:32617","+proj=utm +zone=17 +datum=WGS84 +units=m +no_defs");E3(tn);const M3=({date:n})=>{const t=ne.useRef(),e=ne.useRef(null),[i,s]=ne.useState(null),[o,l]=ne.useState(null),[h,c]=ne.useState(null),[d,g]=ne.useState(null),[_,y]=ne.useState(null),[v,E]=ne.useState(!0),[M,w]=ne.useState(null),[S,R]=ne.useState(0),[O,P]=ne.useState(""),[k,b]=ne.useState(0),[B,G]=ne.useState(""),[W,K]=ne.useState(new Set),[rt,lt]=ne.useState(null),[ct,et]=ne.useState(""),wt="https://ee-yaravakavya31.uc.r.appspot.com";ne.useEffect(()=>{(async()=>{try{const[H,V]=await Promise.all([fetch(`${wt}/image?date=${n}`),fetch(`${wt}/crowns?date=${n}`)]);if(!H.ok||!V.ok)throw new Error("Data fetch failed");const[T,A]=await Promise.all([H.json(),V.json()]);s(T),l(A);const ft=T.bands[0],dt=ft.crs_transform,[pt,Et]=ft.dimensions,St=dt[2],Rt=dt[5],kt=dt[0],Wt=dt[4],Qn=[St,Rt+Et*Wt,St+pt*kt,Rt],Hr=new ew({source:new lw({url:`${wt}/render-image?date=${n}`,imageExtent:Qn,projection:"EPSG:32617"})});c(Hr),g(Qn)}catch(H){w(H.message)}finally{E(!1)}})()},[n]),ne.useEffect(()=>{if(!t.current||!i||!o)return;const z=new RM({features:new dw().readFeatures(o,{dataProjection:"EPSG:4326",featureProjection:"EPSG:32617"})}),H=new $M({source:z,style:T=>{var dt;const A=`${T.get("GlobalID")}+${T.get("date")}`;let ft=((dt=T.get("style"))==null?void 0:dt.color)||"#FF0000";return W.has(A)&&(ft="#0000FF"),_&&T.get("GlobalID")===_.globalID&&T.get("date")===_.date&&(ft="#FFFF00"),new sr({stroke:new Wo({color:ft,width:2}),fill:new sa({color:"rgba(0,0,0,0)"})})}});if(lt(H),e.current)e.current.setLayers([h,H]);else{const T=new oM({target:t.current,layers:[h,H],view:new Un({projection:"EPSG:32617",center:[(d[0]+d[2])/2,(d[1]+d[3])/2],zoom:14,maxZoom:20})});T.getView().fit(d,{padding:[50,50,50,50]}),e.current=T}const V=T=>{const A=e.current.getFeaturesAtPixel(T.pixel)[0];y(A?{globalID:A.get("GlobalID"),latinName:A.get("latin"),date:A.get("date")}:null),H&&H.getSource().refresh()};return e.current.on("click",V),()=>{e.current&&e.current.un("click",V)}},[i,o,n,W,_]),ne.useEffect(()=>{R(0),P(null),b(0),G(""),et("")},[_]);const st=async z=>{if(z.preventDefault(),!_||S===null){et("Please enter the leafing value");return}try{(await fetch("/api/observations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({globalId:_.globalID,latinName:_.latinName,date:_.date,leafing:S,isFlowering:O,floweringIntensity:k,segmentation:B})})).ok?(et("Observation submitted successfully!"),K(V=>new Set([...V,`${_.globalID}+${_.date}`])),rt&&rt.getSource().refresh(),y(null)):et("Error submitting observation")}catch{et("Network error - please try again")}setTimeout(()=>et(""),3e3)},nt=_&&ot.jsxs("div",{style:{height:"100%",overflowY:"auto",backgroundColor:"white",padding:"1.5rem",borderLeft:"1px solid #e5e7eb"},children:[ot.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem"},children:"Feature Details"}),ot.jsx("div",{style:{marginBottom:"1rem"},children:ot.jsx("table",{style:{width:"100%"},children:ot.jsxs("tbody",{children:[ot.jsxs("tr",{children:[ot.jsx("td",{style:{padding:"0.25rem 0"},children:ot.jsx("strong",{children:"Global ID:"})}),ot.jsx("td",{children:_.globalID})]}),ot.jsxs("tr",{children:[ot.jsx("td",{style:{padding:"0.25rem 0"},children:ot.jsx("strong",{children:"Latin Name:"})}),ot.jsx("td",{children:_.latinName})]}),ot.jsxs("tr",{children:[ot.jsx("td",{style:{padding:"0.25rem 0"},children:ot.jsx("strong",{children:"Date:"})}),ot.jsx("td",{children:_.date})]})]})})}),ot.jsxs("form",{onSubmit:st,style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[ot.jsx("div",{children:ot.jsxs("label",{style:{display:"block",marginBottom:"0.5rem"},children:["Leafing Amount (0-10):",ot.jsx("input",{type:"range",min:"0",max:"10",value:S,onChange:z=>R(parseInt(z.target.value)),style:{width:"100%",marginTop:"0.5rem"},required:!0}),ot.jsx("div",{style:{textAlign:"center",marginTop:"0.25rem"},children:S===0?"None":S})]})}),ot.jsxs("fieldset",{style:{border:"1px solid #e5e7eb",borderRadius:"4px",padding:"1rem",margin:"0"},children:[ot.jsx("legend",{style:{padding:"0 0.5rem",fontSize:"0.875rem"},children:"Is Flowering? (Required)"}),ot.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[ot.jsxs("label",{style:{display:"inline-flex",alignItems:"center"},children:[ot.jsx("input",{type:"radio",name:"flowering",value:"yes",checked:O==="yes",onChange:z=>{P(z.target.value),b(1)},required:!0,style:{marginRight:"0.5rem"}}),"Yes"]}),ot.jsxs("label",{style:{display:"inline-flex",alignItems:"center"},children:[ot.jsx("input",{type:"radio",name:"flowering",value:"no",checked:O==="no",onChange:z=>{P(z.target.value),b(0)},style:{marginRight:"0.5rem"}}),"No"]}),ot.jsxs("label",{style:{display:"inline-flex",alignItems:"center"},children:[ot.jsx("input",{type:"radio",name:"flowering",value:"maybe",checked:O==="maybe",onChange:z=>{P(z.target.value),b(2)},style:{marginRight:"0.5rem"}}),"Maybe"]})]})]}),O==="yes"&&ot.jsx("div",{children:ot.jsxs("label",{style:{display:"block",marginBottom:"0.5rem"},children:["Flowering Intensity (1-5):",ot.jsx("input",{type:"range",min:"1",max:"5",value:k,onChange:z=>b(parseInt(z.target.value)),style:{width:"100%",marginTop:"0.5rem"},required:!0}),ot.jsx("div",{style:{textAlign:"center",marginTop:"0.25rem"},children:k})]})}),ot.jsx("div",{children:ot.jsxs("label",{style:{display:"block",marginBottom:"0.5rem"},children:["Segmentation Quality:",ot.jsxs("select",{value:B,onChange:z=>G(z.target.value),style:{width:"100%",padding:"0.5rem",border:"1px solid #e5e7eb",borderRadius:"4px",marginTop:"0.5rem"},required:!0,children:[ot.jsx("option",{value:"",disabled:!0,children:"Select one"}),ot.jsx("option",{value:"good",children:"Good"}),ot.jsx("option",{value:"okay",children:"Okay"}),ot.jsx("option",{value:"bad",children:"Bad"})]})]})}),ot.jsx("button",{type:"submit",style:{width:"100%",padding:"0.5rem 1rem",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",marginTop:"1rem"},children:"Submit Observation"})]}),ct&&ot.jsx("div",{style:{marginTop:"1rem",padding:"0.5rem",textAlign:"center",borderRadius:"4px",backgroundColor:ct.includes("success")?"#f0fdf4":"#fef2f2",color:ct.includes("success")?"#166534":"#dc2626"},children:ct})]});return v?ot.jsx("div",{className:"loading",children:"Loading data..."}):M?ot.jsxs("div",{className:"error",children:["Error: ",M]}):ot.jsxs("div",{style:{display:"flex",flexDirection:window.innerWidth<768?"column":"row",height:"100vh"},children:[ot.jsx("div",{style:{flex:1,width:_&&window.innerWidth>=768?"66.666667%":"100%"},children:ot.jsx("div",{ref:t,style:{width:"100%",height:"100%"}})}),_&&ot.jsx("div",{style:{width:window.innerWidth>=768?"33.333333%":"100%",maxWidth:"32rem"},children:nt})]})},w3=()=>{const n=["2018-04-04","2018-04-25","2018-05-23","2018-07-24","2018-08-27","2018-10-26","2018-11-26","2018-12-26","2019-01-28","2019-02-25","2019-03-25","2019-04-24","2019-05-31","2019-06-27","2019-07-24","2019-08-28","2019-09-23","2019-10-17","2019-11-28","2019-12-26","2020-01-24","2020-02-27","2020-05-27","2020-06-15","2020-08-01","2020-09-21","2020-10-26","2020-11-25","2020-12-22","2021-01-27","2021-02-25","2021-03-25","2021-04-29","2021-05-26","2021-07-02","2021-07-28","2021-08-25","2021-09-29","2021-10-27","2021-11-24","2021-12-28","2022-01-26","2022-02-24","2022-03-30","2022-04-27","2022-05-25","2022-06-29","2022-07-27","2022-08-24","2022-09-29","2022-10-27","2022-11-24","2022-12-28","2023-01-30","2023-02-07","2023-02-14","2023-02-22","2023-02-28","2023-03-07","2023-03-14","2023-03-21","2023-03-28","2023-04-04","2023-04-11","2023-04-18","2023-04-25","2023-05-02","2023-05-09","2023-05-16","2023-05-23","2023-05-30","2023-06-06","2023-06-13","2023-06-21","2023-06-27","2023-07-05","2023-07-11","2023-07-19","2023-07-26","2023-08-01","2023-08-08","2023-08-15","2023-09-05","2023-09-12","2023-09-19","2023-09-26","2023-10-03","2023-10-11","2023-10-17","2023-10-24","2023-10-31","2023-11-14","2023-11-27","2023-12-05","2023-12-12","2024-01-03","2024-01-09","2024-01-17","2024-01-25","2024-02-01","2024-02-08","2024-02-15","2024-02-21","2024-02-28","2024-03-06","2024-03-18"],[t,e]=ne.useState(n[0]??""),i=s=>{e(s.target.value)};return ot.jsxs("div",{style:{padding:"20px"},children:[ot.jsx("h1",{style:{textAlign:"center"},children:"Forest Crown Visualization"}),ot.jsxs("div",{style:{marginBottom:"20px",textAlign:"center"},children:[ot.jsx("label",{htmlFor:"date-select",style:{marginRight:"10px"},children:"Select Date:"}),ot.jsx("select",{id:"date-select",value:t,onChange:i,style:{padding:"8px",borderRadius:"4px",border:"1px solid #ccc",minWidth:"200px",textAlign:"center"},children:n.map(s=>ot.jsx("option",{value:s,children:s},s))})]}),ot.jsx(M3,{date:t,maxSize:2048})]})};function C3(){return ot.jsx("div",{className:"App",children:ot.jsx(w3,{})})}$v.createRoot(document.getElementById("root")).render(ot.jsx(ne.StrictMode,{children:ot.jsx(C3,{})}))});export default S3();
